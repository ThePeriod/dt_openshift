apiVersion: v1
items:
- apiVersion: v1
  kind: ReplicationController
  metadata:
    annotations:
      kubectl.kubernetes.io/original-replicas: "1"
      openshift.io/deployer-pod.completed-at: 2023-06-04 23:55:18 +0000 UTC
      openshift.io/deployer-pod.created-at: 2023-06-04 23:50:45 +0000 UTC
      openshift.io/deployer-pod.name: apicast-production-1-deploy
      openshift.io/deployment-config.latest-version: "1"
      openshift.io/deployment-config.name: apicast-production
      openshift.io/deployment.phase: Complete
      openshift.io/deployment.replicas: "1"
      openshift.io/deployment.status-reason: config change
      openshift.io/encoded-deployment-config: |
        {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"apicast-production","namespace":"3scale","uid":"c4c62896-edc3-404e-b31b-29dc0e70e08e","resourceVersion":"20279560","generation":2,"creationTimestamp":"2023-06-04T23:50:41Z","labels":{"app":"3scale-api-management","migration.openshift.io/migrated-by-migmigration":"d260e821-c8d9-409f-9013-a81dd35264d4","migration.openshift.io/migrated-by-migplan":"49357516-407e-4d22-8a38-498daa6ef155","threescale_component":"apicast","threescale_component_element":"production","velero.io/backup-name":"migration-05da4-initial-s7jkt","velero.io/restore-name":"migration-05da4-final-h89cb"},"annotations":{"openshift.io/backup-registry-hostname":"docker-registry.default.svc:5000","openshift.io/backup-server-version":"1.11","openshift.io/generated-by":"OpenShiftNewApp","openshift.io/migration-registry":"172.30.138.125:5000","openshift.io/restore-registry-hostname":"image-registry.openshift-image-registry.svc:5000","openshift.io/restore-server-version":"1.23"},"managedFields":[{"manager":"velero-server","operation":"Update","apiVersion":"apps.openshift.io/v1","time":"2023-06-04T23:50:41Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:openshift.io/backup-registry-hostname":{},"f:openshift.io/backup-server-version":{},"f:openshift.io/generated-by":{},"f:openshift.io/migration-registry":{},"f:openshift.io/restore-registry-hostname":{},"f:openshift.io/restore-server-version":{}},"f:labels":{".":{},"f:app":{},"f:migration.openshift.io/migrated-by-migmigration":{},"f:migration.openshift.io/migrated-by-migplan":{},"f:threescale_component":{},"f:threescale_component_element":{},"f:velero.io/backup-name":{},"f:velero.io/restore-name":{}}},"f:spec":{"f:replicas":{},"f:revisionHistoryLimit":{},"f:selector":{".":{},"f:deploymentConfig":{}},"f:strategy":{"f:activeDeadlineSeconds":{},"f:rollingParams":{".":{},"f:intervalSeconds":{},"f:maxSurge":{},"f:maxUnavailable":{},"f:timeoutSeconds":{},"f:updatePeriodSeconds":{}},"f:type":{}},"f:template":{".":{},"f:metadata":{".":{},"f:annotations":{".":{},"f:openshift.io/generated-by":{},"f:prometheus.io/port":{},"f:prometheus.io/scrape":{}},"f:creationTimestamp":{},"f:labels":{".":{},"f:app":{},"f:deploymentConfig":{},"f:threescale_component":{},"f:threescale_component_element":{}}},"f:spec":{".":{},"f:containers":{".":{},"k:{\"name\":\"apicast-production\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"APICAST_CONFIGURATION_CACHE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"APICAST_CONFIGURATION_LOADER\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"APICAST_MANAGEMENT_API\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"APICAST_OIDC_LOG_LEVEL\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"APICAST_RESPONSE_CODES\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"BACKEND_ENDPOINT_OVERRIDE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"OPENSSL_VERIFY\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"THREESCALE_DEPLOYMENT_ENV\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"THREESCALE_PORTAL_ENDPOINT\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}}},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:failureThreshold":{},"f:httpGet":{".":{},"f:path":{},"f:port":{},"f:scheme":{}},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":8080,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:protocol":{}},"k:{\"containerPort\":8090,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:protocol":{}},"k:{\"containerPort\":9421,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:httpGet":{".":{},"f:path":{},"f:port":{},"f:scheme":{}},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:initContainers":{".":{},"k:{\"name\":\"system-master-svc\"}":{".":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"SLEEP_SECONDS\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{}}}}}},{"manager":"openshift-controller-manager","operation":"Update","apiVersion":"apps.openshift.io/v1","time":"2023-06-04T23:50:44Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:triggers":{}}}},{"manager":"openshift-controller-manager","operation":"Update","apiVersion":"apps.openshift.io/v1","time":"2023-06-04T23:50:44Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{".":{},"k:{\"type\":\"Available\"}":{".":{},"f:lastTransitionTime":{},"f:lastUpdateTime":{},"f:message":{},"f:status":{},"f:type":{}}},"f:details":{".":{},"f:causes":{},"f:message":{}},"f:latestVersion":{},"f:observedGeneration":{}}},"subresource":"status"}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":1800,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["system-master-svc","apicast-production"],"from":{"kind":"ImageStreamTag","namespace":"3scale","name":"amp-apicast:latest"},"lastTriggeredImage":"registry.redhat.io/3scale-amp2/apicast-gateway-rhel7@sha256:26700c6cb5f43fa8061cee274caef5561646995a0e7d803273f394d9cdda1391"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"apicast-production"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"apicast-production","threescale_component":"apicast","threescale_component_element":"production"},"annotations":{"openshift.io/generated-by":"OpenShiftNewApp","prometheus.io/port":"9421","prometheus.io/scrape":"true"}},"spec":{"initContainers":[{"name":"system-master-svc","image":"registry.redhat.io/3scale-amp2/apicast-gateway-rhel7@sha256:26700c6cb5f43fa8061cee274caef5561646995a0e7d803273f394d9cdda1391","command":["sh","-c","until $(curl --output /dev/null --silent --fail --head http://system-master:3000/status); do sleep $SLEEP_SECONDS; done"],"env":[{"name":"SLEEP_SECONDS","value":"1"}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"apicast-production","image":"registry.redhat.io/3scale-amp2/apicast-gateway-rhel7@sha256:26700c6cb5f43fa8061cee274caef5561646995a0e7d803273f394d9cdda1391","ports":[{"containerPort":8080,"protocol":"TCP"},{"containerPort":8090,"protocol":"TCP"},{"name":"metrics","containerPort":9421,"protocol":"TCP"}],"env":[{"name":"THREESCALE_PORTAL_ENDPOINT","valueFrom":{"secretKeyRef":{"name":"system-master-apicast","key":"PROXY_CONFIGS_ENDPOINT"}}},{"name":"BACKEND_ENDPOINT_OVERRIDE","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"service_endpoint"}}},{"name":"APICAST_MANAGEMENT_API","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"APICAST_MANAGEMENT_API"}}},{"name":"OPENSSL_VERIFY","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"OPENSSL_VERIFY"}}},{"name":"APICAST_RESPONSE_CODES","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"APICAST_RESPONSE_CODES"}}},{"name":"APICAST_CONFIGURATION_LOADER","value":"boot"},{"name":"APICAST_CONFIGURATION_CACHE","value":"300"},{"name":"THREESCALE_DEPLOYMENT_ENV","value":"production"},{"name":"APICAST_OIDC_LOG_LEVEL","value":"debug"}],"resources":{"limits":{"cpu":"1","memory":"128Mi"},"requests":{"cpu":"500m","memory":"64Mi"}},"livenessProbe":{"httpGet":{"path":"/status/live","port":8090,"scheme":"HTTP"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"httpGet":{"path":"/status/ready","port":8090,"scheme":"HTTP"},"initialDelaySeconds":15,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":1,"observedGeneration":1,"replicas":0,"updatedReplicas":0,"availableReplicas":0,"unavailableReplicas":0,"details":{"message":"config change","causes":[{"type":"ConfigChange"}]},"conditions":[{"type":"Available","status":"False","lastUpdateTime":"2023-06-04T23:50:41Z","lastTransitionTime":"2023-06-04T23:50:41Z","message":"Deployment config does not have minimum availability."}]}}
    creationTimestamp: "2023-06-04T23:50:44Z"
    generation: 3
    labels:
      app: 3scale-api-management
      migration.openshift.io/migrated-by-migmigration: d260e821-c8d9-409f-9013-a81dd35264d4
      migration.openshift.io/migrated-by-migplan: 49357516-407e-4d22-8a38-498daa6ef155
      openshift.io/deployment-config.name: apicast-production
      threescale_component: apicast
      threescale_component_element: production
      velero.io/backup-name: migration-05da4-initial-s7jkt
      velero.io/restore-name: migration-05da4-final-h89cb
    name: apicast-production-1
    namespace: 3scale
    ownerReferences:
    - apiVersion: apps.openshift.io/v1
      blockOwnerDeletion: true
      controller: true
      kind: DeploymentConfig
      name: apicast-production
      uid: c4c62896-edc3-404e-b31b-29dc0e70e08e
    resourceVersion: "480987392"
    uid: af71c28b-7342-4e53-b8bf-742f3b224054
  spec:
    replicas: 0
    selector:
      deployment: apicast-production-1
      deploymentConfig: apicast-production
      deploymentconfig: apicast-production
    template:
      metadata:
        annotations:
          openshift.io/deployment-config.latest-version: "1"
          openshift.io/deployment-config.name: apicast-production
          openshift.io/deployment.name: apicast-production-1
          openshift.io/generated-by: OpenShiftNewApp
          prometheus.io/port: "9421"
          prometheus.io/scrape: "true"
        creationTimestamp: null
        labels:
          app: 3scale-api-management
          deployment: apicast-production-1
          deploymentConfig: apicast-production
          deploymentconfig: apicast-production
          threescale_component: apicast
          threescale_component_element: production
      spec:
        containers:
        - env:
          - name: THREESCALE_PORTAL_ENDPOINT
            valueFrom:
              secretKeyRef:
                key: PROXY_CONFIGS_ENDPOINT
                name: system-master-apicast
          - name: BACKEND_ENDPOINT_OVERRIDE
            valueFrom:
              secretKeyRef:
                key: service_endpoint
                name: backend-listener
          - name: APICAST_MANAGEMENT_API
            valueFrom:
              configMapKeyRef:
                key: APICAST_MANAGEMENT_API
                name: apicast-environment
          - name: OPENSSL_VERIFY
            valueFrom:
              configMapKeyRef:
                key: OPENSSL_VERIFY
                name: apicast-environment
          - name: APICAST_RESPONSE_CODES
            valueFrom:
              configMapKeyRef:
                key: APICAST_RESPONSE_CODES
                name: apicast-environment
          - name: APICAST_CONFIGURATION_LOADER
            value: boot
          - name: APICAST_CONFIGURATION_CACHE
            value: "300"
          - name: THREESCALE_DEPLOYMENT_ENV
            value: production
          - name: APICAST_OIDC_LOG_LEVEL
            value: debug
          image: registry.redhat.io/3scale-amp2/apicast-gateway-rhel7@sha256:26700c6cb5f43fa8061cee274caef5561646995a0e7d803273f394d9cdda1391
          imagePullPolicy: IfNotPresent
          livenessProbe:
            failureThreshold: 3
            httpGet:
              path: /status/live
              port: 8090
              scheme: HTTP
            initialDelaySeconds: 10
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 5
          name: apicast-production
          ports:
          - containerPort: 8080
            protocol: TCP
          - containerPort: 8090
            protocol: TCP
          - containerPort: 9421
            name: metrics
            protocol: TCP
          readinessProbe:
            failureThreshold: 3
            httpGet:
              path: /status/ready
              port: 8090
              scheme: HTTP
            initialDelaySeconds: 15
            periodSeconds: 30
            successThreshold: 1
            timeoutSeconds: 5
          resources:
            limits:
              cpu: "1"
              memory: 128Mi
            requests:
              cpu: 500m
              memory: 64Mi
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        dnsPolicy: ClusterFirst
        initContainers:
        - command:
          - sh
          - -c
          - until $(curl --output /dev/null --silent --fail --head http://system-master:3000/status);
            do sleep $SLEEP_SECONDS; done
          env:
          - name: SLEEP_SECONDS
            value: "1"
          image: registry.redhat.io/3scale-amp2/apicast-gateway-rhel7@sha256:26700c6cb5f43fa8061cee274caef5561646995a0e7d803273f394d9cdda1391
          imagePullPolicy: Always
          name: system-master-svc
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: amp
        serviceAccountName: amp
        terminationGracePeriodSeconds: 30
  status:
    observedGeneration: 3
    replicas: 0
- apiVersion: v1
  kind: ReplicationController
  metadata:
    annotations:
      kubectl.kubernetes.io/desired-replicas: "1"
      kubectl.kubernetes.io/update-source-id: apicast-production-1:af71c28b-7342-4e53-b8bf-742f3b224054
      openshift.io/deployer-pod.completed-at: 2024-07-26 22:27:37 +0000 UTC
      openshift.io/deployer-pod.created-at: 2024-07-26 22:01:33 +0000 UTC
      openshift.io/deployer-pod.name: apicast-production-2-deploy
      openshift.io/deployment-config.latest-version: "2"
      openshift.io/deployment-config.name: apicast-production
      openshift.io/deployment.cancelled: "true"
      openshift.io/deployment.phase: Failed
      openshift.io/deployment.replicas: "0"
      openshift.io/deployment.status-reason: newer deployment was found running
      openshift.io/encoded-deployment-config: |
        {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"apicast-production","namespace":"3scale","uid":"c4c62896-edc3-404e-b31b-29dc0e70e08e","resourceVersion":"480948312","generation":3,"creationTimestamp":"2023-06-04T23:50:41Z","labels":{"app":"3scale-api-management","migration.openshift.io/migrated-by-migmigration":"d260e821-c8d9-409f-9013-a81dd35264d4","migration.openshift.io/migrated-by-migplan":"49357516-407e-4d22-8a38-498daa6ef155","threescale_component":"apicast","threescale_component_element":"production","velero.io/backup-name":"migration-05da4-initial-s7jkt","velero.io/restore-name":"migration-05da4-final-h89cb"},"annotations":{"openshift.io/backup-registry-hostname":"docker-registry.default.svc:5000","openshift.io/backup-server-version":"1.11","openshift.io/generated-by":"OpenShiftNewApp","openshift.io/migration-registry":"172.30.138.125:5000","openshift.io/restore-registry-hostname":"image-registry.openshift-image-registry.svc:5000","openshift.io/restore-server-version":"1.23"},"managedFields":[{"manager":"velero-server","operation":"Update","apiVersion":"apps.openshift.io/v1","time":"2023-06-04T23:50:41Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:openshift.io/backup-registry-hostname":{},"f:openshift.io/backup-server-version":{},"f:openshift.io/generated-by":{},"f:openshift.io/migration-registry":{},"f:openshift.io/restore-registry-hostname":{},"f:openshift.io/restore-server-version":{}},"f:labels":{".":{},"f:app":{},"f:migration.openshift.io/migrated-by-migmigration":{},"f:migration.openshift.io/migrated-by-migplan":{},"f:threescale_component":{},"f:threescale_component_element":{},"f:velero.io/backup-name":{},"f:velero.io/restore-name":{}}},"f:spec":{"f:replicas":{},"f:revisionHistoryLimit":{},"f:selector":{".":{},"f:deploymentConfig":{}},"f:strategy":{"f:activeDeadlineSeconds":{},"f:rollingParams":{".":{},"f:intervalSeconds":{},"f:maxSurge":{},"f:maxUnavailable":{},"f:timeoutSeconds":{},"f:updatePeriodSeconds":{}},"f:type":{}},"f:template":{".":{},"f:metadata":{".":{},"f:annotations":{".":{},"f:openshift.io/generated-by":{},"f:prometheus.io/port":{},"f:prometheus.io/scrape":{}},"f:creationTimestamp":{},"f:labels":{".":{},"f:app":{},"f:deploymentConfig":{},"f:threescale_component":{},"f:threescale_component_element":{}}},"f:spec":{".":{},"f:containers":{".":{},"k:{\"name\":\"apicast-production\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"APICAST_CONFIGURATION_CACHE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"APICAST_CONFIGURATION_LOADER\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"APICAST_MANAGEMENT_API\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"APICAST_OIDC_LOG_LEVEL\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"APICAST_RESPONSE_CODES\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"BACKEND_ENDPOINT_OVERRIDE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"OPENSSL_VERIFY\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"THREESCALE_DEPLOYMENT_ENV\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"THREESCALE_PORTAL_ENDPOINT\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}}},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:failureThreshold":{},"f:httpGet":{".":{},"f:path":{},"f:port":{},"f:scheme":{}},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":8080,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:protocol":{}},"k:{\"containerPort\":8090,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:protocol":{}},"k:{\"containerPort\":9421,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:httpGet":{".":{},"f:path":{},"f:port":{},"f:scheme":{}},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:initContainers":{".":{},"k:{\"name\":\"system-master-svc\"}":{".":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"SLEEP_SECONDS\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{}}}}}},{"manager":"openshift-controller-manager","operation":"Update","apiVersion":"apps.openshift.io/v1","time":"2023-06-04T23:50:44Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:triggers":{}}}},{"manager":"openshift-controller-manager","operation":"Update","apiVersion":"apps.openshift.io/v1","time":"2024-07-23T20:01:23Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:availableReplicas":{},"f:conditions":{".":{},"k:{\"type\":\"Available\"}":{".":{},"f:lastTransitionTime":{},"f:lastUpdateTime":{},"f:message":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Progressing\"}":{".":{},"f:lastTransitionTime":{},"f:lastUpdateTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}},"f:details":{".":{},"f:causes":{},"f:message":{}},"f:latestVersion":{},"f:observedGeneration":{},"f:replicas":{},"f:unavailableReplicas":{},"f:updatedReplicas":{}}},"subresource":"status"},{"manager":"Mozilla","operation":"Update","apiVersion":"apps.openshift.io/v1","time":"2024-07-26T22:01:33Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:template":{"f:spec":{"f:containers":{"k:{\"name\":\"apicast-production\"}":{"f:env":{"k:{\"name\":\"APICAST_LOG_LEVEL\"}":{".":{},"f:name":{},"f:value":{}}}}}}}}}}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":1800,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["system-master-svc","apicast-production"],"from":{"kind":"ImageStreamTag","namespace":"3scale","name":"amp-apicast:latest"},"lastTriggeredImage":"registry.redhat.io/3scale-amp2/apicast-gateway-rhel7@sha256:26700c6cb5f43fa8061cee274caef5561646995a0e7d803273f394d9cdda1391"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"apicast-production"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"apicast-production","threescale_component":"apicast","threescale_component_element":"production"},"annotations":{"openshift.io/generated-by":"OpenShiftNewApp","prometheus.io/port":"9421","prometheus.io/scrape":"true"}},"spec":{"initContainers":[{"name":"system-master-svc","image":"registry.redhat.io/3scale-amp2/apicast-gateway-rhel7@sha256:26700c6cb5f43fa8061cee274caef5561646995a0e7d803273f394d9cdda1391","command":["sh","-c","until $(curl --output /dev/null --silent --fail --head http://system-master:3000/status); do sleep $SLEEP_SECONDS; done"],"env":[{"name":"SLEEP_SECONDS","value":"1"}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"apicast-production","image":"registry.redhat.io/3scale-amp2/apicast-gateway-rhel7@sha256:26700c6cb5f43fa8061cee274caef5561646995a0e7d803273f394d9cdda1391","ports":[{"containerPort":8080,"protocol":"TCP"},{"containerPort":8090,"protocol":"TCP"},{"name":"metrics","containerPort":9421,"protocol":"TCP"}],"env":[{"name":"THREESCALE_PORTAL_ENDPOINT","valueFrom":{"secretKeyRef":{"name":"system-master-apicast","key":"PROXY_CONFIGS_ENDPOINT"}}},{"name":"BACKEND_ENDPOINT_OVERRIDE","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"service_endpoint"}}},{"name":"APICAST_MANAGEMENT_API","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"APICAST_MANAGEMENT_API"}}},{"name":"OPENSSL_VERIFY","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"OPENSSL_VERIFY"}}},{"name":"APICAST_RESPONSE_CODES","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"APICAST_RESPONSE_CODES"}}},{"name":"APICAST_CONFIGURATION_LOADER","value":"boot"},{"name":"APICAST_CONFIGURATION_CACHE","value":"300"},{"name":"THREESCALE_DEPLOYMENT_ENV","value":"production"},{"name":"APICAST_OIDC_LOG_LEVEL","value":"debug"},{"name":"APICAST_LOG_LEVEL","value":"debug"}],"resources":{"limits":{"cpu":"1","memory":"128Mi"},"requests":{"cpu":"500m","memory":"64Mi"}},"livenessProbe":{"httpGet":{"path":"/status/live","port":8090,"scheme":"HTTP"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"httpGet":{"path":"/status/ready","port":8090,"scheme":"HTTP"},"initialDelaySeconds":15,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":2,"observedGeneration":2,"replicas":1,"updatedReplicas":1,"availableReplicas":0,"unavailableReplicas":1,"details":{"message":"config change","causes":[{"type":"ConfigChange"}]},"conditions":[{"type":"Progressing","status":"True","lastUpdateTime":"2023-06-04T23:55:20Z","lastTransitionTime":"2023-06-04T23:55:20Z","reason":"NewReplicationControllerAvailable","message":"replication controller \"apicast-production-1\" successfully rolled out"},{"type":"Available","status":"False","lastUpdateTime":"2024-07-23T20:01:23Z","lastTransitionTime":"2024-07-23T20:01:23Z","message":"Deployment config does not have minimum availability."}]}}
    creationTimestamp: "2024-07-26T22:01:33Z"
    generation: 3
    labels:
      app: 3scale-api-management
      migration.openshift.io/migrated-by-migmigration: d260e821-c8d9-409f-9013-a81dd35264d4
      migration.openshift.io/migrated-by-migplan: 49357516-407e-4d22-8a38-498daa6ef155
      openshift.io/deployment-config.name: apicast-production
      threescale_component: apicast
      threescale_component_element: production
      velero.io/backup-name: migration-05da4-initial-s7jkt
      velero.io/restore-name: migration-05da4-final-h89cb
    name: apicast-production-2
    namespace: 3scale
    ownerReferences:
    - apiVersion: apps.openshift.io/v1
      blockOwnerDeletion: true
      controller: true
      kind: DeploymentConfig
      name: apicast-production
      uid: c4c62896-edc3-404e-b31b-29dc0e70e08e
    resourceVersion: "480986559"
    uid: 3da610e8-1146-422e-b0f2-98e67646592f
  spec:
    replicas: 0
    selector:
      deployment: apicast-production-2
      deploymentConfig: apicast-production
      deploymentconfig: apicast-production
    template:
      metadata:
        annotations:
          openshift.io/deployment-config.latest-version: "2"
          openshift.io/deployment-config.name: apicast-production
          openshift.io/deployment.name: apicast-production-2
          openshift.io/generated-by: OpenShiftNewApp
          prometheus.io/port: "9421"
          prometheus.io/scrape: "true"
        creationTimestamp: null
        labels:
          app: 3scale-api-management
          deployment: apicast-production-2
          deploymentConfig: apicast-production
          deploymentconfig: apicast-production
          threescale_component: apicast
          threescale_component_element: production
      spec:
        containers:
        - env:
          - name: THREESCALE_PORTAL_ENDPOINT
            valueFrom:
              secretKeyRef:
                key: PROXY_CONFIGS_ENDPOINT
                name: system-master-apicast
          - name: BACKEND_ENDPOINT_OVERRIDE
            valueFrom:
              secretKeyRef:
                key: service_endpoint
                name: backend-listener
          - name: APICAST_MANAGEMENT_API
            valueFrom:
              configMapKeyRef:
                key: APICAST_MANAGEMENT_API
                name: apicast-environment
          - name: OPENSSL_VERIFY
            valueFrom:
              configMapKeyRef:
                key: OPENSSL_VERIFY
                name: apicast-environment
          - name: APICAST_RESPONSE_CODES
            valueFrom:
              configMapKeyRef:
                key: APICAST_RESPONSE_CODES
                name: apicast-environment
          - name: APICAST_CONFIGURATION_LOADER
            value: boot
          - name: APICAST_CONFIGURATION_CACHE
            value: "300"
          - name: THREESCALE_DEPLOYMENT_ENV
            value: production
          - name: APICAST_OIDC_LOG_LEVEL
            value: debug
          - name: APICAST_LOG_LEVEL
            value: debug
          image: registry.redhat.io/3scale-amp2/apicast-gateway-rhel7@sha256:26700c6cb5f43fa8061cee274caef5561646995a0e7d803273f394d9cdda1391
          imagePullPolicy: IfNotPresent
          livenessProbe:
            failureThreshold: 3
            httpGet:
              path: /status/live
              port: 8090
              scheme: HTTP
            initialDelaySeconds: 10
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 5
          name: apicast-production
          ports:
          - containerPort: 8080
            protocol: TCP
          - containerPort: 8090
            protocol: TCP
          - containerPort: 9421
            name: metrics
            protocol: TCP
          readinessProbe:
            failureThreshold: 3
            httpGet:
              path: /status/ready
              port: 8090
              scheme: HTTP
            initialDelaySeconds: 15
            periodSeconds: 30
            successThreshold: 1
            timeoutSeconds: 5
          resources:
            limits:
              cpu: "1"
              memory: 128Mi
            requests:
              cpu: 500m
              memory: 64Mi
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        dnsPolicy: ClusterFirst
        initContainers:
        - command:
          - sh
          - -c
          - until $(curl --output /dev/null --silent --fail --head http://system-master:3000/status);
            do sleep $SLEEP_SECONDS; done
          env:
          - name: SLEEP_SECONDS
            value: "1"
          image: registry.redhat.io/3scale-amp2/apicast-gateway-rhel7@sha256:26700c6cb5f43fa8061cee274caef5561646995a0e7d803273f394d9cdda1391
          imagePullPolicy: Always
          name: system-master-svc
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: amp
        serviceAccountName: amp
        terminationGracePeriodSeconds: 30
  status:
    observedGeneration: 3
    replicas: 0
- apiVersion: v1
  kind: ReplicationController
  metadata:
    annotations:
      openshift.io/deployer-pod.completed-at: 2024-07-26 22:28:16 +0000 UTC
      openshift.io/deployer-pod.created-at: 2024-07-26 22:27:39 +0000 UTC
      openshift.io/deployer-pod.name: apicast-production-3-deploy
      openshift.io/deployment-config.latest-version: "3"
      openshift.io/deployment-config.name: apicast-production
      openshift.io/deployment.phase: Complete
      openshift.io/deployment.replicas: ""
      openshift.io/deployment.status-reason: config change
      openshift.io/encoded-deployment-config: |
        {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"apicast-production","namespace":"3scale","uid":"c4c62896-edc3-404e-b31b-29dc0e70e08e","resourceVersion":"480986430","generation":4,"creationTimestamp":"2023-06-04T23:50:41Z","labels":{"app":"3scale-api-management","migration.openshift.io/migrated-by-migmigration":"d260e821-c8d9-409f-9013-a81dd35264d4","migration.openshift.io/migrated-by-migplan":"49357516-407e-4d22-8a38-498daa6ef155","threescale_component":"apicast","threescale_component_element":"production","velero.io/backup-name":"migration-05da4-initial-s7jkt","velero.io/restore-name":"migration-05da4-final-h89cb"},"annotations":{"openshift.io/backup-registry-hostname":"docker-registry.default.svc:5000","openshift.io/backup-server-version":"1.11","openshift.io/generated-by":"OpenShiftNewApp","openshift.io/migration-registry":"172.30.138.125:5000","openshift.io/restore-registry-hostname":"image-registry.openshift-image-registry.svc:5000","openshift.io/restore-server-version":"1.23"},"managedFields":[{"manager":"velero-server","operation":"Update","apiVersion":"apps.openshift.io/v1","time":"2023-06-04T23:50:41Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:openshift.io/backup-registry-hostname":{},"f:openshift.io/backup-server-version":{},"f:openshift.io/generated-by":{},"f:openshift.io/migration-registry":{},"f:openshift.io/restore-registry-hostname":{},"f:openshift.io/restore-server-version":{}},"f:labels":{".":{},"f:app":{},"f:migration.openshift.io/migrated-by-migmigration":{},"f:migration.openshift.io/migrated-by-migplan":{},"f:threescale_component":{},"f:threescale_component_element":{},"f:velero.io/backup-name":{},"f:velero.io/restore-name":{}}},"f:spec":{"f:replicas":{},"f:revisionHistoryLimit":{},"f:selector":{".":{},"f:deploymentConfig":{}},"f:strategy":{"f:activeDeadlineSeconds":{},"f:rollingParams":{".":{},"f:intervalSeconds":{},"f:maxSurge":{},"f:maxUnavailable":{},"f:timeoutSeconds":{},"f:updatePeriodSeconds":{}},"f:type":{}},"f:template":{".":{},"f:metadata":{".":{},"f:annotations":{".":{},"f:openshift.io/generated-by":{},"f:prometheus.io/port":{},"f:prometheus.io/scrape":{}},"f:creationTimestamp":{},"f:labels":{".":{},"f:app":{},"f:deploymentConfig":{},"f:threescale_component":{},"f:threescale_component_element":{}}},"f:spec":{".":{},"f:containers":{".":{},"k:{\"name\":\"apicast-production\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"APICAST_CONFIGURATION_CACHE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"APICAST_CONFIGURATION_LOADER\"}":{".":{},"f:name":{}},"k:{\"name\":\"APICAST_MANAGEMENT_API\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"APICAST_OIDC_LOG_LEVEL\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"APICAST_RESPONSE_CODES\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"BACKEND_ENDPOINT_OVERRIDE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"OPENSSL_VERIFY\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"THREESCALE_DEPLOYMENT_ENV\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"THREESCALE_PORTAL_ENDPOINT\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}}},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:failureThreshold":{},"f:httpGet":{".":{},"f:path":{},"f:port":{},"f:scheme":{}},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":8080,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:protocol":{}},"k:{\"containerPort\":8090,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:protocol":{}},"k:{\"containerPort\":9421,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:httpGet":{".":{},"f:path":{},"f:port":{},"f:scheme":{}},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:initContainers":{".":{},"k:{\"name\":\"system-master-svc\"}":{".":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"SLEEP_SECONDS\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{}}}}}},{"manager":"openshift-controller-manager","operation":"Update","apiVersion":"apps.openshift.io/v1","time":"2023-06-04T23:50:44Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:triggers":{}}}},{"manager":"openshift-controller-manager","operation":"Update","apiVersion":"apps.openshift.io/v1","time":"2024-07-26T22:01:37Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:availableReplicas":{},"f:conditions":{".":{},"k:{\"type\":\"Available\"}":{".":{},"f:lastTransitionTime":{},"f:lastUpdateTime":{},"f:message":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Progressing\"}":{".":{},"f:lastTransitionTime":{},"f:lastUpdateTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}},"f:details":{".":{},"f:causes":{},"f:message":{}},"f:latestVersion":{},"f:observedGeneration":{},"f:replicas":{},"f:unavailableReplicas":{},"f:updatedReplicas":{}}},"subresource":"status"},{"manager":"Mozilla","operation":"Update","apiVersion":"apps.openshift.io/v1","time":"2024-07-26T22:27:37Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:template":{"f:spec":{"f:containers":{"k:{\"name\":\"apicast-production\"}":{"f:env":{"k:{\"name\":\"APICAST_CONFIGURATION_LOADER\"}":{"f:value":{}},"k:{\"name\":\"APICAST_LOG_LEVEL\"}":{".":{},"f:name":{},"f:value":{}}}}}}}}}}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":1800,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["system-master-svc","apicast-production"],"from":{"kind":"ImageStreamTag","namespace":"3scale","name":"amp-apicast:latest"},"lastTriggeredImage":"registry.redhat.io/3scale-amp2/apicast-gateway-rhel7@sha256:26700c6cb5f43fa8061cee274caef5561646995a0e7d803273f394d9cdda1391"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"apicast-production"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"apicast-production","threescale_component":"apicast","threescale_component_element":"production"},"annotations":{"openshift.io/generated-by":"OpenShiftNewApp","prometheus.io/port":"9421","prometheus.io/scrape":"true"}},"spec":{"initContainers":[{"name":"system-master-svc","image":"registry.redhat.io/3scale-amp2/apicast-gateway-rhel7@sha256:26700c6cb5f43fa8061cee274caef5561646995a0e7d803273f394d9cdda1391","command":["sh","-c","until $(curl --output /dev/null --silent --fail --head http://system-master:3000/status); do sleep $SLEEP_SECONDS; done"],"env":[{"name":"SLEEP_SECONDS","value":"1"}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"apicast-production","image":"registry.redhat.io/3scale-amp2/apicast-gateway-rhel7@sha256:26700c6cb5f43fa8061cee274caef5561646995a0e7d803273f394d9cdda1391","ports":[{"containerPort":8080,"protocol":"TCP"},{"containerPort":8090,"protocol":"TCP"},{"name":"metrics","containerPort":9421,"protocol":"TCP"}],"env":[{"name":"THREESCALE_PORTAL_ENDPOINT","valueFrom":{"secretKeyRef":{"name":"system-master-apicast","key":"PROXY_CONFIGS_ENDPOINT"}}},{"name":"BACKEND_ENDPOINT_OVERRIDE","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"service_endpoint"}}},{"name":"APICAST_MANAGEMENT_API","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"APICAST_MANAGEMENT_API"}}},{"name":"OPENSSL_VERIFY","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"OPENSSL_VERIFY"}}},{"name":"APICAST_RESPONSE_CODES","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"APICAST_RESPONSE_CODES"}}},{"name":"APICAST_CONFIGURATION_LOADER","value":"lazy"},{"name":"APICAST_CONFIGURATION_CACHE","value":"300"},{"name":"THREESCALE_DEPLOYMENT_ENV","value":"production"},{"name":"APICAST_OIDC_LOG_LEVEL","value":"debug"},{"name":"APICAST_LOG_LEVEL","value":"debug"}],"resources":{"limits":{"cpu":"1","memory":"128Mi"},"requests":{"cpu":"500m","memory":"64Mi"}},"livenessProbe":{"httpGet":{"path":"/status/live","port":8090,"scheme":"HTTP"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"httpGet":{"path":"/status/ready","port":8090,"scheme":"HTTP"},"initialDelaySeconds":15,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":3,"observedGeneration":3,"replicas":2,"updatedReplicas":1,"availableReplicas":0,"unavailableReplicas":2,"details":{"message":"config change","causes":[{"type":"ConfigChange"}]},"conditions":[{"type":"Available","status":"False","lastUpdateTime":"2024-07-23T20:01:23Z","lastTransitionTime":"2024-07-23T20:01:23Z","message":"Deployment config does not have minimum availability."},{"type":"Progressing","status":"True","lastUpdateTime":"2024-07-26T22:14:01Z","lastTransitionTime":"2024-07-26T22:14:01Z","reason":"ReplicationControllerUpdated","message":"replication controller \"apicast-production-2\" is progressing"}]}}
    creationTimestamp: "2024-07-26T22:27:39Z"
    generation: 2
    labels:
      app: 3scale-api-management
      migration.openshift.io/migrated-by-migmigration: d260e821-c8d9-409f-9013-a81dd35264d4
      migration.openshift.io/migrated-by-migplan: 49357516-407e-4d22-8a38-498daa6ef155
      openshift.io/deployment-config.name: apicast-production
      threescale_component: apicast
      threescale_component_element: production
      velero.io/backup-name: migration-05da4-initial-s7jkt
      velero.io/restore-name: migration-05da4-final-h89cb
    name: apicast-production-3
    namespace: 3scale
    ownerReferences:
    - apiVersion: apps.openshift.io/v1
      blockOwnerDeletion: true
      controller: true
      kind: DeploymentConfig
      name: apicast-production
      uid: c4c62896-edc3-404e-b31b-29dc0e70e08e
    resourceVersion: "491646520"
    uid: 762ed4f3-1536-44b8-9674-9252ae898842
  spec:
    replicas: 1
    selector:
      deployment: apicast-production-3
      deploymentConfig: apicast-production
      deploymentconfig: apicast-production
    template:
      metadata:
        annotations:
          openshift.io/deployment-config.latest-version: "3"
          openshift.io/deployment-config.name: apicast-production
          openshift.io/deployment.name: apicast-production-3
          openshift.io/generated-by: OpenShiftNewApp
          prometheus.io/port: "9421"
          prometheus.io/scrape: "true"
        creationTimestamp: null
        labels:
          app: 3scale-api-management
          deployment: apicast-production-3
          deploymentConfig: apicast-production
          deploymentconfig: apicast-production
          threescale_component: apicast
          threescale_component_element: production
      spec:
        containers:
        - env:
          - name: THREESCALE_PORTAL_ENDPOINT
            valueFrom:
              secretKeyRef:
                key: PROXY_CONFIGS_ENDPOINT
                name: system-master-apicast
          - name: BACKEND_ENDPOINT_OVERRIDE
            valueFrom:
              secretKeyRef:
                key: service_endpoint
                name: backend-listener
          - name: APICAST_MANAGEMENT_API
            valueFrom:
              configMapKeyRef:
                key: APICAST_MANAGEMENT_API
                name: apicast-environment
          - name: OPENSSL_VERIFY
            valueFrom:
              configMapKeyRef:
                key: OPENSSL_VERIFY
                name: apicast-environment
          - name: APICAST_RESPONSE_CODES
            valueFrom:
              configMapKeyRef:
                key: APICAST_RESPONSE_CODES
                name: apicast-environment
          - name: APICAST_CONFIGURATION_LOADER
            value: lazy
          - name: APICAST_CONFIGURATION_CACHE
            value: "300"
          - name: THREESCALE_DEPLOYMENT_ENV
            value: production
          - name: APICAST_OIDC_LOG_LEVEL
            value: debug
          - name: APICAST_LOG_LEVEL
            value: debug
          image: registry.redhat.io/3scale-amp2/apicast-gateway-rhel7@sha256:26700c6cb5f43fa8061cee274caef5561646995a0e7d803273f394d9cdda1391
          imagePullPolicy: IfNotPresent
          livenessProbe:
            failureThreshold: 3
            httpGet:
              path: /status/live
              port: 8090
              scheme: HTTP
            initialDelaySeconds: 10
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 5
          name: apicast-production
          ports:
          - containerPort: 8080
            protocol: TCP
          - containerPort: 8090
            protocol: TCP
          - containerPort: 9421
            name: metrics
            protocol: TCP
          readinessProbe:
            failureThreshold: 3
            httpGet:
              path: /status/ready
              port: 8090
              scheme: HTTP
            initialDelaySeconds: 15
            periodSeconds: 30
            successThreshold: 1
            timeoutSeconds: 5
          resources:
            limits:
              cpu: "1"
              memory: 128Mi
            requests:
              cpu: 500m
              memory: 64Mi
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        dnsPolicy: ClusterFirst
        initContainers:
        - command:
          - sh
          - -c
          - until $(curl --output /dev/null --silent --fail --head http://system-master:3000/status);
            do sleep $SLEEP_SECONDS; done
          env:
          - name: SLEEP_SECONDS
            value: "1"
          image: registry.redhat.io/3scale-amp2/apicast-gateway-rhel7@sha256:26700c6cb5f43fa8061cee274caef5561646995a0e7d803273f394d9cdda1391
          imagePullPolicy: Always
          name: system-master-svc
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: amp
        serviceAccountName: amp
        terminationGracePeriodSeconds: 30
  status:
    availableReplicas: 1
    fullyLabeledReplicas: 1
    observedGeneration: 2
    readyReplicas: 1
    replicas: 1
- apiVersion: v1
  kind: ReplicationController
  metadata:
    annotations:
      openshift.io/deployer-pod.completed-at: 2023-06-04 23:52:19 +0000 UTC
      openshift.io/deployer-pod.created-at: 2023-06-04 23:50:45 +0000 UTC
      openshift.io/deployer-pod.name: apicast-staging-1-deploy
      openshift.io/deployment-config.latest-version: "1"
      openshift.io/deployment-config.name: apicast-staging
      openshift.io/deployment.phase: Complete
      openshift.io/deployment.replicas: "1"
      openshift.io/deployment.status-reason: config change
      openshift.io/encoded-deployment-config: |
        {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"apicast-staging","namespace":"3scale","uid":"8655f644-2a33-400b-adad-5848b770f93c","resourceVersion":"20279559","generation":2,"creationTimestamp":"2023-06-04T23:50:41Z","labels":{"app":"3scale-api-management","migration.openshift.io/migrated-by-migmigration":"d260e821-c8d9-409f-9013-a81dd35264d4","migration.openshift.io/migrated-by-migplan":"49357516-407e-4d22-8a38-498daa6ef155","threescale_component":"apicast","threescale_component_element":"staging","velero.io/backup-name":"migration-05da4-initial-s7jkt","velero.io/restore-name":"migration-05da4-final-h89cb"},"annotations":{"openshift.io/backup-registry-hostname":"docker-registry.default.svc:5000","openshift.io/backup-server-version":"1.11","openshift.io/generated-by":"OpenShiftNewApp","openshift.io/migration-registry":"172.30.138.125:5000","openshift.io/restore-registry-hostname":"image-registry.openshift-image-registry.svc:5000","openshift.io/restore-server-version":"1.23"},"managedFields":[{"manager":"velero-server","operation":"Update","apiVersion":"apps.openshift.io/v1","time":"2023-06-04T23:50:41Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:openshift.io/backup-registry-hostname":{},"f:openshift.io/backup-server-version":{},"f:openshift.io/generated-by":{},"f:openshift.io/migration-registry":{},"f:openshift.io/restore-registry-hostname":{},"f:openshift.io/restore-server-version":{}},"f:labels":{".":{},"f:app":{},"f:migration.openshift.io/migrated-by-migmigration":{},"f:migration.openshift.io/migrated-by-migplan":{},"f:threescale_component":{},"f:threescale_component_element":{},"f:velero.io/backup-name":{},"f:velero.io/restore-name":{}}},"f:spec":{"f:replicas":{},"f:revisionHistoryLimit":{},"f:selector":{".":{},"f:deploymentConfig":{}},"f:strategy":{"f:activeDeadlineSeconds":{},"f:rollingParams":{".":{},"f:intervalSeconds":{},"f:maxSurge":{},"f:maxUnavailable":{},"f:timeoutSeconds":{},"f:updatePeriodSeconds":{}},"f:type":{}},"f:template":{".":{},"f:metadata":{".":{},"f:annotations":{".":{},"f:openshift.io/generated-by":{},"f:prometheus.io/port":{},"f:prometheus.io/scrape":{}},"f:creationTimestamp":{},"f:labels":{".":{},"f:app":{},"f:deploymentConfig":{},"f:threescale_component":{},"f:threescale_component_element":{}}},"f:spec":{".":{},"f:containers":{".":{},"k:{\"name\":\"apicast-staging\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"APICAST_CONFIGURATION_CACHE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"APICAST_CONFIGURATION_LOADER\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"APICAST_MANAGEMENT_API\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"APICAST_OIDC_LOG_LEVEL\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"APICAST_RESPONSE_CODES\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"BACKEND_ENDPOINT_OVERRIDE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"OPENSSL_VERIFY\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"THREESCALE_DEPLOYMENT_ENV\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"THREESCALE_PORTAL_ENDPOINT\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}}},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:failureThreshold":{},"f:httpGet":{".":{},"f:path":{},"f:port":{},"f:scheme":{}},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":8080,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:protocol":{}},"k:{\"containerPort\":8090,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:protocol":{}},"k:{\"containerPort\":9421,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:httpGet":{".":{},"f:path":{},"f:port":{},"f:scheme":{}},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{}}}}}},{"manager":"openshift-controller-manager","operation":"Update","apiVersion":"apps.openshift.io/v1","time":"2023-06-04T23:50:44Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:triggers":{}}}},{"manager":"openshift-controller-manager","operation":"Update","apiVersion":"apps.openshift.io/v1","time":"2023-06-04T23:50:44Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{".":{},"k:{\"type\":\"Available\"}":{".":{},"f:lastTransitionTime":{},"f:lastUpdateTime":{},"f:message":{},"f:status":{},"f:type":{}}},"f:details":{".":{},"f:causes":{},"f:message":{}},"f:latestVersion":{},"f:observedGeneration":{}}},"subresource":"status"}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":1800,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["apicast-staging"],"from":{"kind":"ImageStreamTag","namespace":"3scale","name":"amp-apicast:latest"},"lastTriggeredImage":"registry.redhat.io/3scale-amp2/apicast-gateway-rhel7@sha256:26700c6cb5f43fa8061cee274caef5561646995a0e7d803273f394d9cdda1391"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"apicast-staging"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"apicast-staging","threescale_component":"apicast","threescale_component_element":"staging"},"annotations":{"openshift.io/generated-by":"OpenShiftNewApp","prometheus.io/port":"9421","prometheus.io/scrape":"true"}},"spec":{"containers":[{"name":"apicast-staging","image":"registry.redhat.io/3scale-amp2/apicast-gateway-rhel7@sha256:26700c6cb5f43fa8061cee274caef5561646995a0e7d803273f394d9cdda1391","ports":[{"containerPort":8080,"protocol":"TCP"},{"containerPort":8090,"protocol":"TCP"},{"name":"metrics","containerPort":9421,"protocol":"TCP"}],"env":[{"name":"THREESCALE_PORTAL_ENDPOINT","valueFrom":{"secretKeyRef":{"name":"system-master-apicast","key":"PROXY_CONFIGS_ENDPOINT"}}},{"name":"BACKEND_ENDPOINT_OVERRIDE","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"service_endpoint"}}},{"name":"APICAST_MANAGEMENT_API","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"APICAST_MANAGEMENT_API"}}},{"name":"OPENSSL_VERIFY","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"OPENSSL_VERIFY"}}},{"name":"APICAST_RESPONSE_CODES","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"APICAST_RESPONSE_CODES"}}},{"name":"APICAST_CONFIGURATION_LOADER","value":"lazy"},{"name":"APICAST_CONFIGURATION_CACHE","value":"0"},{"name":"THREESCALE_DEPLOYMENT_ENV","value":"staging"},{"name":"APICAST_OIDC_LOG_LEVEL","value":"debug"}],"resources":{"limits":{"cpu":"100m","memory":"128Mi"},"requests":{"cpu":"50m","memory":"64Mi"}},"livenessProbe":{"httpGet":{"path":"/status/live","port":8090,"scheme":"HTTP"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"httpGet":{"path":"/status/ready","port":8090,"scheme":"HTTP"},"initialDelaySeconds":15,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":1,"observedGeneration":1,"replicas":0,"updatedReplicas":0,"availableReplicas":0,"unavailableReplicas":0,"details":{"message":"config change","causes":[{"type":"ConfigChange"}]},"conditions":[{"type":"Available","status":"False","lastUpdateTime":"2023-06-04T23:50:41Z","lastTransitionTime":"2023-06-04T23:50:41Z","message":"Deployment config does not have minimum availability."}]}}
    creationTimestamp: "2023-06-04T23:50:44Z"
    generation: 2
    labels:
      app: 3scale-api-management
      migration.openshift.io/migrated-by-migmigration: d260e821-c8d9-409f-9013-a81dd35264d4
      migration.openshift.io/migrated-by-migplan: 49357516-407e-4d22-8a38-498daa6ef155
      openshift.io/deployment-config.name: apicast-staging
      threescale_component: apicast
      threescale_component_element: staging
      velero.io/backup-name: migration-05da4-initial-s7jkt
      velero.io/restore-name: migration-05da4-final-h89cb
    name: apicast-staging-1
    namespace: 3scale
    ownerReferences:
    - apiVersion: apps.openshift.io/v1
      blockOwnerDeletion: true
      controller: true
      kind: DeploymentConfig
      name: apicast-staging
      uid: 8655f644-2a33-400b-adad-5848b770f93c
    resourceVersion: "491646502"
    uid: 0dfec6e4-4dab-4bae-a30a-d673ae30c4b9
  spec:
    replicas: 1
    selector:
      deployment: apicast-staging-1
      deploymentConfig: apicast-staging
      deploymentconfig: apicast-staging
    template:
      metadata:
        annotations:
          openshift.io/deployment-config.latest-version: "1"
          openshift.io/deployment-config.name: apicast-staging
          openshift.io/deployment.name: apicast-staging-1
          openshift.io/generated-by: OpenShiftNewApp
          prometheus.io/port: "9421"
          prometheus.io/scrape: "true"
        creationTimestamp: null
        labels:
          app: 3scale-api-management
          deployment: apicast-staging-1
          deploymentConfig: apicast-staging
          deploymentconfig: apicast-staging
          threescale_component: apicast
          threescale_component_element: staging
      spec:
        containers:
        - env:
          - name: THREESCALE_PORTAL_ENDPOINT
            valueFrom:
              secretKeyRef:
                key: PROXY_CONFIGS_ENDPOINT
                name: system-master-apicast
          - name: BACKEND_ENDPOINT_OVERRIDE
            valueFrom:
              secretKeyRef:
                key: service_endpoint
                name: backend-listener
          - name: APICAST_MANAGEMENT_API
            valueFrom:
              configMapKeyRef:
                key: APICAST_MANAGEMENT_API
                name: apicast-environment
          - name: OPENSSL_VERIFY
            valueFrom:
              configMapKeyRef:
                key: OPENSSL_VERIFY
                name: apicast-environment
          - name: APICAST_RESPONSE_CODES
            valueFrom:
              configMapKeyRef:
                key: APICAST_RESPONSE_CODES
                name: apicast-environment
          - name: APICAST_CONFIGURATION_LOADER
            value: lazy
          - name: APICAST_CONFIGURATION_CACHE
            value: "0"
          - name: THREESCALE_DEPLOYMENT_ENV
            value: staging
          - name: APICAST_OIDC_LOG_LEVEL
            value: debug
          image: registry.redhat.io/3scale-amp2/apicast-gateway-rhel7@sha256:26700c6cb5f43fa8061cee274caef5561646995a0e7d803273f394d9cdda1391
          imagePullPolicy: IfNotPresent
          livenessProbe:
            failureThreshold: 3
            httpGet:
              path: /status/live
              port: 8090
              scheme: HTTP
            initialDelaySeconds: 10
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 5
          name: apicast-staging
          ports:
          - containerPort: 8080
            protocol: TCP
          - containerPort: 8090
            protocol: TCP
          - containerPort: 9421
            name: metrics
            protocol: TCP
          readinessProbe:
            failureThreshold: 3
            httpGet:
              path: /status/ready
              port: 8090
              scheme: HTTP
            initialDelaySeconds: 15
            periodSeconds: 30
            successThreshold: 1
            timeoutSeconds: 5
          resources:
            limits:
              cpu: 100m
              memory: 128Mi
            requests:
              cpu: 50m
              memory: 64Mi
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: amp
        serviceAccountName: amp
        terminationGracePeriodSeconds: 30
  status:
    availableReplicas: 1
    fullyLabeledReplicas: 1
    observedGeneration: 2
    readyReplicas: 1
    replicas: 1
- apiVersion: v1
  kind: ReplicationController
  metadata:
    annotations:
      openshift.io/deployer-pod.completed-at: 2023-06-04 23:53:08 +0000 UTC
      openshift.io/deployer-pod.created-at: 2023-06-04 23:50:50 +0000 UTC
      openshift.io/deployer-pod.name: backend-cron-1-deploy
      openshift.io/deployment-config.latest-version: "1"
      openshift.io/deployment-config.name: backend-cron
      openshift.io/deployment.phase: Complete
      openshift.io/deployment.replicas: "1"
      openshift.io/deployment.status-reason: config change
      openshift.io/encoded-deployment-config: |
        {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"backend-cron","namespace":"3scale","uid":"464203e6-4b3d-4cc0-9f52-9be690e8d898","resourceVersion":"20279966","generation":2,"creationTimestamp":"2023-06-04T23:50:41Z","labels":{"app":"3scale-api-management","migration.openshift.io/migrated-by-migmigration":"d260e821-c8d9-409f-9013-a81dd35264d4","migration.openshift.io/migrated-by-migplan":"49357516-407e-4d22-8a38-498daa6ef155","threescale_component":"backend","threescale_component_element":"cron","velero.io/backup-name":"migration-05da4-initial-s7jkt","velero.io/restore-name":"migration-05da4-final-h89cb"},"annotations":{"openshift.io/backup-registry-hostname":"docker-registry.default.svc:5000","openshift.io/backup-server-version":"1.11","openshift.io/generated-by":"OpenShiftNewApp","openshift.io/migration-registry":"172.30.138.125:5000","openshift.io/restore-registry-hostname":"image-registry.openshift-image-registry.svc:5000","openshift.io/restore-server-version":"1.23"},"managedFields":[{"manager":"velero-server","operation":"Update","apiVersion":"apps.openshift.io/v1","time":"2023-06-04T23:50:41Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:openshift.io/backup-registry-hostname":{},"f:openshift.io/backup-server-version":{},"f:openshift.io/generated-by":{},"f:openshift.io/migration-registry":{},"f:openshift.io/restore-registry-hostname":{},"f:openshift.io/restore-server-version":{}},"f:labels":{".":{},"f:app":{},"f:migration.openshift.io/migrated-by-migmigration":{},"f:migration.openshift.io/migrated-by-migplan":{},"f:threescale_component":{},"f:threescale_component_element":{},"f:velero.io/backup-name":{},"f:velero.io/restore-name":{}}},"f:spec":{"f:replicas":{},"f:revisionHistoryLimit":{},"f:selector":{".":{},"f:deploymentConfig":{}},"f:strategy":{"f:activeDeadlineSeconds":{},"f:rollingParams":{".":{},"f:intervalSeconds":{},"f:maxSurge":{},"f:maxUnavailable":{},"f:timeoutSeconds":{},"f:updatePeriodSeconds":{}},"f:type":{}},"f:template":{".":{},"f:metadata":{".":{},"f:annotations":{".":{},"f:openshift.io/generated-by":{}},"f:creationTimestamp":{},"f:labels":{".":{},"f:app":{},"f:deploymentConfig":{},"f:threescale_component":{},"f:threescale_component_element":{}}},"f:spec":{".":{},"f:containers":{".":{},"k:{\"name\":\"backend-cron\"}":{".":{},"f:args":{},"f:env":{".":{},"k:{\"name\":\"CONFIG_QUEUES_MASTER_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"CONFIG_QUEUES_SENTINEL_HOSTS\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"CONFIG_QUEUES_SENTINEL_ROLE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"CONFIG_REDIS_PROXY\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"CONFIG_REDIS_SENTINEL_HOSTS\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"CONFIG_REDIS_SENTINEL_ROLE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"RACK_ENV\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:initContainers":{".":{},"k:{\"name\":\"backend-redis-svc\"}":{".":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"CONFIG_QUEUES_MASTER_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"CONFIG_QUEUES_SENTINEL_HOSTS\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"CONFIG_QUEUES_SENTINEL_ROLE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"CONFIG_REDIS_PROXY\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"CONFIG_REDIS_SENTINEL_HOSTS\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"CONFIG_REDIS_SENTINEL_ROLE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"RACK_ENV\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"SLEEP_SECONDS\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{}}}}}},{"manager":"openshift-controller-manager","operation":"Update","apiVersion":"apps.openshift.io/v1","time":"2023-06-04T23:50:49Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:triggers":{}}}},{"manager":"openshift-controller-manager","operation":"Update","apiVersion":"apps.openshift.io/v1","time":"2023-06-04T23:50:49Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{".":{},"k:{\"type\":\"Available\"}":{".":{},"f:lastTransitionTime":{},"f:lastUpdateTime":{},"f:message":{},"f:status":{},"f:type":{}}},"f:details":{".":{},"f:causes":{},"f:message":{}},"f:latestVersion":{},"f:observedGeneration":{}}},"subresource":"status"}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":1200,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["backend-redis-svc","backend-cron"],"from":{"kind":"ImageStreamTag","namespace":"3scale","name":"amp-backend:latest"},"lastTriggeredImage":"registry.redhat.io/3scale-amp2/backend-rhel7@sha256:d13c45ea48efd2a87cb5efb8b745b80a298cdb789e41995fbdedfcc0bfa6a5c5"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"backend-cron"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"backend-cron","threescale_component":"backend","threescale_component_element":"cron"},"annotations":{"openshift.io/generated-by":"OpenShiftNewApp"}},"spec":{"initContainers":[{"name":"backend-redis-svc","image":"registry.redhat.io/3scale-amp2/backend-rhel7@sha256:d13c45ea48efd2a87cb5efb8b745b80a298cdb789e41995fbdedfcc0bfa6a5c5","command":["/opt/app/entrypoint.sh","sh","-c","until rake connectivity:redis_storage_queue_check; do sleep $SLEEP_SECONDS; done"],"env":[{"name":"CONFIG_REDIS_PROXY","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_URL"}}},{"name":"CONFIG_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_HOSTS"}}},{"name":"CONFIG_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_ROLE"}}},{"name":"CONFIG_QUEUES_MASTER_NAME","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_URL"}}},{"name":"CONFIG_QUEUES_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_SENTINEL_HOSTS"}}},{"name":"CONFIG_QUEUES_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_SENTINEL_ROLE"}}},{"name":"RACK_ENV","valueFrom":{"configMapKeyRef":{"name":"backend-environment","key":"RACK_ENV"}}},{"name":"SLEEP_SECONDS","value":"1"}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"backend-cron","image":"registry.redhat.io/3scale-amp2/backend-rhel7@sha256:d13c45ea48efd2a87cb5efb8b745b80a298cdb789e41995fbdedfcc0bfa6a5c5","args":["backend-cron"],"env":[{"name":"CONFIG_REDIS_PROXY","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_URL"}}},{"name":"CONFIG_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_HOSTS"}}},{"name":"CONFIG_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_ROLE"}}},{"name":"CONFIG_QUEUES_MASTER_NAME","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_URL"}}},{"name":"CONFIG_QUEUES_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_SENTINEL_HOSTS"}}},{"name":"CONFIG_QUEUES_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_SENTINEL_ROLE"}}},{"name":"RACK_ENV","valueFrom":{"configMapKeyRef":{"name":"backend-environment","key":"RACK_ENV"}}}],"resources":{"limits":{"cpu":"150m","memory":"80Mi"},"requests":{"cpu":"50m","memory":"40Mi"}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":1,"observedGeneration":1,"replicas":0,"updatedReplicas":0,"availableReplicas":0,"unavailableReplicas":0,"details":{"message":"config change","causes":[{"type":"ConfigChange"}]},"conditions":[{"type":"Available","status":"False","lastUpdateTime":"2023-06-04T23:50:41Z","lastTransitionTime":"2023-06-04T23:50:41Z","message":"Deployment config does not have minimum availability."}]}}
    creationTimestamp: "2023-06-04T23:50:49Z"
    generation: 2
    labels:
      app: 3scale-api-management
      migration.openshift.io/migrated-by-migmigration: d260e821-c8d9-409f-9013-a81dd35264d4
      migration.openshift.io/migrated-by-migplan: 49357516-407e-4d22-8a38-498daa6ef155
      openshift.io/deployment-config.name: backend-cron
      threescale_component: backend
      threescale_component_element: cron
      velero.io/backup-name: migration-05da4-initial-s7jkt
      velero.io/restore-name: migration-05da4-final-h89cb
    name: backend-cron-1
    namespace: 3scale
    ownerReferences:
    - apiVersion: apps.openshift.io/v1
      blockOwnerDeletion: true
      controller: true
      kind: DeploymentConfig
      name: backend-cron
      uid: 464203e6-4b3d-4cc0-9f52-9be690e8d898
    resourceVersion: "472847206"
    uid: 7557d88b-6b5a-4b18-a56a-36362df12957
  spec:
    replicas: 1
    selector:
      deployment: backend-cron-1
      deploymentConfig: backend-cron
      deploymentconfig: backend-cron
    template:
      metadata:
        annotations:
          openshift.io/deployment-config.latest-version: "1"
          openshift.io/deployment-config.name: backend-cron
          openshift.io/deployment.name: backend-cron-1
          openshift.io/generated-by: OpenShiftNewApp
        creationTimestamp: null
        labels:
          app: 3scale-api-management
          deployment: backend-cron-1
          deploymentConfig: backend-cron
          deploymentconfig: backend-cron
          threescale_component: backend
          threescale_component_element: cron
      spec:
        containers:
        - args:
          - backend-cron
          env:
          - name: CONFIG_REDIS_PROXY
            valueFrom:
              secretKeyRef:
                key: REDIS_STORAGE_URL
                name: backend-redis
          - name: CONFIG_REDIS_SENTINEL_HOSTS
            valueFrom:
              secretKeyRef:
                key: REDIS_STORAGE_SENTINEL_HOSTS
                name: backend-redis
          - name: CONFIG_REDIS_SENTINEL_ROLE
            valueFrom:
              secretKeyRef:
                key: REDIS_STORAGE_SENTINEL_ROLE
                name: backend-redis
          - name: CONFIG_QUEUES_MASTER_NAME
            valueFrom:
              secretKeyRef:
                key: REDIS_QUEUES_URL
                name: backend-redis
          - name: CONFIG_QUEUES_SENTINEL_HOSTS
            valueFrom:
              secretKeyRef:
                key: REDIS_QUEUES_SENTINEL_HOSTS
                name: backend-redis
          - name: CONFIG_QUEUES_SENTINEL_ROLE
            valueFrom:
              secretKeyRef:
                key: REDIS_QUEUES_SENTINEL_ROLE
                name: backend-redis
          - name: RACK_ENV
            valueFrom:
              configMapKeyRef:
                key: RACK_ENV
                name: backend-environment
          image: registry.redhat.io/3scale-amp2/backend-rhel7@sha256:d13c45ea48efd2a87cb5efb8b745b80a298cdb789e41995fbdedfcc0bfa6a5c5
          imagePullPolicy: IfNotPresent
          name: backend-cron
          resources:
            limits:
              cpu: 150m
              memory: 80Mi
            requests:
              cpu: 50m
              memory: 40Mi
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        dnsPolicy: ClusterFirst
        initContainers:
        - command:
          - /opt/app/entrypoint.sh
          - sh
          - -c
          - until rake connectivity:redis_storage_queue_check; do sleep $SLEEP_SECONDS;
            done
          env:
          - name: CONFIG_REDIS_PROXY
            valueFrom:
              secretKeyRef:
                key: REDIS_STORAGE_URL
                name: backend-redis
          - name: CONFIG_REDIS_SENTINEL_HOSTS
            valueFrom:
              secretKeyRef:
                key: REDIS_STORAGE_SENTINEL_HOSTS
                name: backend-redis
          - name: CONFIG_REDIS_SENTINEL_ROLE
            valueFrom:
              secretKeyRef:
                key: REDIS_STORAGE_SENTINEL_ROLE
                name: backend-redis
          - name: CONFIG_QUEUES_MASTER_NAME
            valueFrom:
              secretKeyRef:
                key: REDIS_QUEUES_URL
                name: backend-redis
          - name: CONFIG_QUEUES_SENTINEL_HOSTS
            valueFrom:
              secretKeyRef:
                key: REDIS_QUEUES_SENTINEL_HOSTS
                name: backend-redis
          - name: CONFIG_QUEUES_SENTINEL_ROLE
            valueFrom:
              secretKeyRef:
                key: REDIS_QUEUES_SENTINEL_ROLE
                name: backend-redis
          - name: RACK_ENV
            valueFrom:
              configMapKeyRef:
                key: RACK_ENV
                name: backend-environment
          - name: SLEEP_SECONDS
            value: "1"
          image: registry.redhat.io/3scale-amp2/backend-rhel7@sha256:d13c45ea48efd2a87cb5efb8b745b80a298cdb789e41995fbdedfcc0bfa6a5c5
          imagePullPolicy: Always
          name: backend-redis-svc
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: amp
        serviceAccountName: amp
        terminationGracePeriodSeconds: 30
  status:
    availableReplicas: 1
    fullyLabeledReplicas: 1
    observedGeneration: 2
    readyReplicas: 1
    replicas: 1
- apiVersion: v1
  kind: ReplicationController
  metadata:
    annotations:
      openshift.io/deployer-pod.completed-at: 2023-06-04 23:52:32 +0000 UTC
      openshift.io/deployer-pod.created-at: 2023-06-04 23:50:50 +0000 UTC
      openshift.io/deployer-pod.name: backend-listener-1-deploy
      openshift.io/deployment-config.latest-version: "1"
      openshift.io/deployment-config.name: backend-listener
      openshift.io/deployment.phase: Complete
      openshift.io/deployment.replicas: "1"
      openshift.io/deployment.status-reason: config change
      openshift.io/encoded-deployment-config: |
        {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"backend-listener","namespace":"3scale","uid":"62ffca8a-ba17-4cac-b4bd-fc00acc8cc31","resourceVersion":"20279964","generation":2,"creationTimestamp":"2023-06-04T23:50:41Z","labels":{"app":"3scale-api-management","migration.openshift.io/migrated-by-migmigration":"d260e821-c8d9-409f-9013-a81dd35264d4","migration.openshift.io/migrated-by-migplan":"49357516-407e-4d22-8a38-498daa6ef155","threescale_component":"backend","threescale_component_element":"listener","velero.io/backup-name":"migration-05da4-initial-s7jkt","velero.io/restore-name":"migration-05da4-final-h89cb"},"annotations":{"openshift.io/backup-registry-hostname":"docker-registry.default.svc:5000","openshift.io/backup-server-version":"1.11","openshift.io/generated-by":"OpenShiftNewApp","openshift.io/migration-registry":"172.30.138.125:5000","openshift.io/restore-registry-hostname":"image-registry.openshift-image-registry.svc:5000","openshift.io/restore-server-version":"1.23"},"managedFields":[{"manager":"velero-server","operation":"Update","apiVersion":"apps.openshift.io/v1","time":"2023-06-04T23:50:41Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:openshift.io/backup-registry-hostname":{},"f:openshift.io/backup-server-version":{},"f:openshift.io/generated-by":{},"f:openshift.io/migration-registry":{},"f:openshift.io/restore-registry-hostname":{},"f:openshift.io/restore-server-version":{}},"f:labels":{".":{},"f:app":{},"f:migration.openshift.io/migrated-by-migmigration":{},"f:migration.openshift.io/migrated-by-migplan":{},"f:threescale_component":{},"f:threescale_component_element":{},"f:velero.io/backup-name":{},"f:velero.io/restore-name":{}}},"f:spec":{"f:replicas":{},"f:revisionHistoryLimit":{},"f:selector":{".":{},"f:deploymentConfig":{}},"f:strategy":{"f:activeDeadlineSeconds":{},"f:rollingParams":{".":{},"f:intervalSeconds":{},"f:maxSurge":{},"f:maxUnavailable":{},"f:timeoutSeconds":{},"f:updatePeriodSeconds":{}},"f:type":{}},"f:template":{".":{},"f:metadata":{".":{},"f:annotations":{".":{},"f:openshift.io/generated-by":{}},"f:creationTimestamp":{},"f:labels":{".":{},"f:app":{},"f:deploymentConfig":{},"f:threescale_component":{},"f:threescale_component_element":{}}},"f:spec":{".":{},"f:containers":{".":{},"k:{\"name\":\"backend-listener\"}":{".":{},"f:args":{},"f:env":{".":{},"k:{\"name\":\"CONFIG_INTERNAL_API_PASSWORD\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"CONFIG_INTERNAL_API_USER\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"CONFIG_QUEUES_MASTER_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"CONFIG_QUEUES_SENTINEL_HOSTS\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"CONFIG_QUEUES_SENTINEL_ROLE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"CONFIG_REDIS_PROXY\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"CONFIG_REDIS_SENTINEL_HOSTS\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"CONFIG_REDIS_SENTINEL_ROLE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"PUMA_WORKERS\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RACK_ENV\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}}},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":3000,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:httpGet":{".":{},"f:path":{},"f:port":{},"f:scheme":{}},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{}}}}}},{"manager":"openshift-controller-manager","operation":"Update","apiVersion":"apps.openshift.io/v1","time":"2023-06-04T23:50:49Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:triggers":{}}}},{"manager":"openshift-controller-manager","operation":"Update","apiVersion":"apps.openshift.io/v1","time":"2023-06-04T23:50:49Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{".":{},"k:{\"type\":\"Available\"}":{".":{},"f:lastTransitionTime":{},"f:lastUpdateTime":{},"f:message":{},"f:status":{},"f:type":{}}},"f:details":{".":{},"f:causes":{},"f:message":{}},"f:latestVersion":{},"f:observedGeneration":{}}},"subresource":"status"}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":600,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["backend-listener"],"from":{"kind":"ImageStreamTag","namespace":"3scale","name":"amp-backend:latest"},"lastTriggeredImage":"registry.redhat.io/3scale-amp2/backend-rhel7@sha256:d13c45ea48efd2a87cb5efb8b745b80a298cdb789e41995fbdedfcc0bfa6a5c5"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"backend-listener"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"backend-listener","threescale_component":"backend","threescale_component_element":"listener"},"annotations":{"openshift.io/generated-by":"OpenShiftNewApp"}},"spec":{"containers":[{"name":"backend-listener","image":"registry.redhat.io/3scale-amp2/backend-rhel7@sha256:d13c45ea48efd2a87cb5efb8b745b80a298cdb789e41995fbdedfcc0bfa6a5c5","args":["bin/3scale_backend","start","-e","production","-p","3000","-x","/dev/stdout"],"ports":[{"containerPort":3000,"protocol":"TCP"}],"env":[{"name":"CONFIG_REDIS_PROXY","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_URL"}}},{"name":"CONFIG_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_HOSTS"}}},{"name":"CONFIG_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_ROLE"}}},{"name":"CONFIG_QUEUES_MASTER_NAME","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_URL"}}},{"name":"CONFIG_QUEUES_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_SENTINEL_HOSTS"}}},{"name":"CONFIG_QUEUES_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_SENTINEL_ROLE"}}},{"name":"RACK_ENV","valueFrom":{"configMapKeyRef":{"name":"backend-environment","key":"RACK_ENV"}}},{"name":"PUMA_WORKERS","value":"16"},{"name":"CONFIG_INTERNAL_API_USER","valueFrom":{"secretKeyRef":{"name":"backend-internal-api","key":"username"}}},{"name":"CONFIG_INTERNAL_API_PASSWORD","valueFrom":{"secretKeyRef":{"name":"backend-internal-api","key":"password"}}}],"resources":{"limits":{"cpu":"1","memory":"700Mi"},"requests":{"cpu":"500m","memory":"550Mi"}},"livenessProbe":{"tcpSocket":{"port":3000},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"httpGet":{"path":"/status","port":3000,"scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":1,"observedGeneration":1,"replicas":0,"updatedReplicas":0,"availableReplicas":0,"unavailableReplicas":0,"details":{"message":"config change","causes":[{"type":"ConfigChange"}]},"conditions":[{"type":"Available","status":"False","lastUpdateTime":"2023-06-04T23:50:41Z","lastTransitionTime":"2023-06-04T23:50:41Z","message":"Deployment config does not have minimum availability."}]}}
    creationTimestamp: "2023-06-04T23:50:49Z"
    generation: 2
    labels:
      app: 3scale-api-management
      migration.openshift.io/migrated-by-migmigration: d260e821-c8d9-409f-9013-a81dd35264d4
      migration.openshift.io/migrated-by-migplan: 49357516-407e-4d22-8a38-498daa6ef155
      openshift.io/deployment-config.name: backend-listener
      threescale_component: backend
      threescale_component_element: listener
      velero.io/backup-name: migration-05da4-initial-s7jkt
      velero.io/restore-name: migration-05da4-final-h89cb
    name: backend-listener-1
    namespace: 3scale
    ownerReferences:
    - apiVersion: apps.openshift.io/v1
      blockOwnerDeletion: true
      controller: true
      kind: DeploymentConfig
      name: backend-listener
      uid: 62ffca8a-ba17-4cac-b4bd-fc00acc8cc31
    resourceVersion: "428583537"
    uid: 7f0a273e-0079-4178-ac87-d1d113a52c31
  spec:
    replicas: 1
    selector:
      deployment: backend-listener-1
      deploymentConfig: backend-listener
      deploymentconfig: backend-listener
    template:
      metadata:
        annotations:
          openshift.io/deployment-config.latest-version: "1"
          openshift.io/deployment-config.name: backend-listener
          openshift.io/deployment.name: backend-listener-1
          openshift.io/generated-by: OpenShiftNewApp
        creationTimestamp: null
        labels:
          app: 3scale-api-management
          deployment: backend-listener-1
          deploymentConfig: backend-listener
          deploymentconfig: backend-listener
          threescale_component: backend
          threescale_component_element: listener
      spec:
        containers:
        - args:
          - bin/3scale_backend
          - start
          - -e
          - production
          - -p
          - "3000"
          - -x
          - /dev/stdout
          env:
          - name: CONFIG_REDIS_PROXY
            valueFrom:
              secretKeyRef:
                key: REDIS_STORAGE_URL
                name: backend-redis
          - name: CONFIG_REDIS_SENTINEL_HOSTS
            valueFrom:
              secretKeyRef:
                key: REDIS_STORAGE_SENTINEL_HOSTS
                name: backend-redis
          - name: CONFIG_REDIS_SENTINEL_ROLE
            valueFrom:
              secretKeyRef:
                key: REDIS_STORAGE_SENTINEL_ROLE
                name: backend-redis
          - name: CONFIG_QUEUES_MASTER_NAME
            valueFrom:
              secretKeyRef:
                key: REDIS_QUEUES_URL
                name: backend-redis
          - name: CONFIG_QUEUES_SENTINEL_HOSTS
            valueFrom:
              secretKeyRef:
                key: REDIS_QUEUES_SENTINEL_HOSTS
                name: backend-redis
          - name: CONFIG_QUEUES_SENTINEL_ROLE
            valueFrom:
              secretKeyRef:
                key: REDIS_QUEUES_SENTINEL_ROLE
                name: backend-redis
          - name: RACK_ENV
            valueFrom:
              configMapKeyRef:
                key: RACK_ENV
                name: backend-environment
          - name: PUMA_WORKERS
            value: "16"
          - name: CONFIG_INTERNAL_API_USER
            valueFrom:
              secretKeyRef:
                key: username
                name: backend-internal-api
          - name: CONFIG_INTERNAL_API_PASSWORD
            valueFrom:
              secretKeyRef:
                key: password
                name: backend-internal-api
          image: registry.redhat.io/3scale-amp2/backend-rhel7@sha256:d13c45ea48efd2a87cb5efb8b745b80a298cdb789e41995fbdedfcc0bfa6a5c5
          imagePullPolicy: IfNotPresent
          livenessProbe:
            failureThreshold: 3
            initialDelaySeconds: 30
            periodSeconds: 10
            successThreshold: 1
            tcpSocket:
              port: 3000
            timeoutSeconds: 1
          name: backend-listener
          ports:
          - containerPort: 3000
            protocol: TCP
          readinessProbe:
            failureThreshold: 3
            httpGet:
              path: /status
              port: 3000
              scheme: HTTP
            initialDelaySeconds: 30
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 5
          resources:
            limits:
              cpu: "1"
              memory: 700Mi
            requests:
              cpu: 500m
              memory: 550Mi
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: amp
        serviceAccountName: amp
        terminationGracePeriodSeconds: 30
  status:
    availableReplicas: 1
    fullyLabeledReplicas: 1
    observedGeneration: 2
    readyReplicas: 1
    replicas: 1
- apiVersion: v1
  kind: ReplicationController
  metadata:
    annotations:
      openshift.io/deployer-pod.completed-at: 2023-06-04 23:53:06 +0000 UTC
      openshift.io/deployer-pod.created-at: 2023-06-04 23:50:46 +0000 UTC
      openshift.io/deployer-pod.name: backend-redis-1-deploy
      openshift.io/deployment-config.latest-version: "1"
      openshift.io/deployment-config.name: backend-redis
      openshift.io/deployment.phase: Complete
      openshift.io/deployment.replicas: "1"
      openshift.io/deployment.status-reason: config change
      openshift.io/encoded-deployment-config: |
        {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"backend-redis","namespace":"3scale","uid":"08eaac2d-2de9-4f1c-bc3c-3bf9490091f8","resourceVersion":"20279703","generation":2,"creationTimestamp":"2023-06-04T23:50:41Z","labels":{"app":"3scale-api-management","migration.openshift.io/migrated-by-migmigration":"d260e821-c8d9-409f-9013-a81dd35264d4","migration.openshift.io/migrated-by-migplan":"49357516-407e-4d22-8a38-498daa6ef155","threescale_component":"backend","threescale_component_element":"redis","velero.io/backup-name":"migration-05da4-initial-s7jkt","velero.io/restore-name":"migration-05da4-final-h89cb"},"annotations":{"openshift.io/backup-registry-hostname":"docker-registry.default.svc:5000","openshift.io/backup-server-version":"1.11","openshift.io/generated-by":"OpenShiftNewApp","openshift.io/migration-registry":"172.30.138.125:5000","openshift.io/restore-registry-hostname":"image-registry.openshift-image-registry.svc:5000","openshift.io/restore-server-version":"1.23"},"managedFields":[{"manager":"velero-server","operation":"Update","apiVersion":"apps.openshift.io/v1","time":"2023-06-04T23:50:41Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:openshift.io/backup-registry-hostname":{},"f:openshift.io/backup-server-version":{},"f:openshift.io/generated-by":{},"f:openshift.io/migration-registry":{},"f:openshift.io/restore-registry-hostname":{},"f:openshift.io/restore-server-version":{}},"f:labels":{".":{},"f:app":{},"f:migration.openshift.io/migrated-by-migmigration":{},"f:migration.openshift.io/migrated-by-migplan":{},"f:threescale_component":{},"f:threescale_component_element":{},"f:velero.io/backup-name":{},"f:velero.io/restore-name":{}}},"f:spec":{"f:replicas":{},"f:revisionHistoryLimit":{},"f:selector":{".":{},"f:deploymentConfig":{}},"f:strategy":{"f:activeDeadlineSeconds":{},"f:recreateParams":{".":{},"f:timeoutSeconds":{}},"f:type":{}},"f:template":{".":{},"f:metadata":{".":{},"f:annotations":{".":{},"f:openshift.io/generated-by":{}},"f:creationTimestamp":{},"f:labels":{".":{},"f:app":{},"f:deploymentConfig":{},"f:threescale_component":{},"f:threescale_component_element":{}}},"f:spec":{".":{},"f:containers":{".":{},"k:{\"name\":\"backend-redis\"}":{".":{},"f:args":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:name":{},"f:readinessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/etc/redis.d/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/redis/data\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:dnsPolicy":{},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"backend-redis-storage\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"redis-config\"}":{".":{},"f:configMap":{".":{},"f:defaultMode":{},"f:items":{},"f:name":{}},"f:name":{}}}}}}}},{"manager":"openshift-controller-manager","operation":"Update","apiVersion":"apps.openshift.io/v1","time":"2023-06-04T23:50:46Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:triggers":{}}}},{"manager":"openshift-controller-manager","operation":"Update","apiVersion":"apps.openshift.io/v1","time":"2023-06-04T23:50:46Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{".":{},"k:{\"type\":\"Available\"}":{".":{},"f:lastTransitionTime":{},"f:lastUpdateTime":{},"f:message":{},"f:status":{},"f:type":{}}},"f:details":{".":{},"f:causes":{},"f:message":{}},"f:latestVersion":{},"f:observedGeneration":{}}},"subresource":"status"}]},"spec":{"strategy":{"type":"Recreate","recreateParams":{"timeoutSeconds":600},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["backend-redis"],"from":{"kind":"ImageStreamTag","namespace":"3scale","name":"backend-redis:latest"},"lastTriggeredImage":"registry.redhat.io/rhscl/redis-32-rhel7@sha256:a9bdf52384a222635efc0284db47d12fbde8c3d0fcb66517ba8eefad1d4e9dc9"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"backend-redis"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"backend-redis","threescale_component":"backend","threescale_component_element":"redis"},"annotations":{"openshift.io/generated-by":"OpenShiftNewApp"}},"spec":{"volumes":[{"name":"backend-redis-storage","persistentVolumeClaim":{"claimName":"backend-redis-storage"}},{"name":"redis-config","configMap":{"name":"redis-config","items":[{"key":"redis.conf","path":"redis.conf"}],"defaultMode":420}}],"containers":[{"name":"backend-redis","image":"registry.redhat.io/rhscl/redis-32-rhel7@sha256:a9bdf52384a222635efc0284db47d12fbde8c3d0fcb66517ba8eefad1d4e9dc9","command":["/opt/rh/rh-redis32/root/usr/bin/redis-server"],"args":["/etc/redis.d/redis.conf","--daemonize","no"],"resources":{"limits":{"cpu":"200m","memory":"500Mi"},"requests":{"cpu":"10m","memory":"100Mi"}},"volumeMounts":[{"name":"backend-redis-storage","mountPath":"/var/lib/redis/data"},{"name":"redis-config","mountPath":"/etc/redis.d/"}],"livenessProbe":{"tcpSocket":{"port":6379},"initialDelaySeconds":10,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"exec":{"command":["container-entrypoint","bash","-c","redis-cli set liveness-probe \"`date`\" | grep OK"]},"initialDelaySeconds":10,"timeoutSeconds":1,"periodSeconds":30,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":1,"observedGeneration":1,"replicas":0,"updatedReplicas":0,"availableReplicas":0,"unavailableReplicas":0,"details":{"message":"config change","causes":[{"type":"ConfigChange"}]},"conditions":[{"type":"Available","status":"False","lastUpdateTime":"2023-06-04T23:50:41Z","lastTransitionTime":"2023-06-04T23:50:41Z","message":"Deployment config does not have minimum availability."}]}}
    creationTimestamp: "2023-06-04T23:50:46Z"
    generation: 2
    labels:
      app: 3scale-api-management
      migration.openshift.io/migrated-by-migmigration: d260e821-c8d9-409f-9013-a81dd35264d4
      migration.openshift.io/migrated-by-migplan: 49357516-407e-4d22-8a38-498daa6ef155
      openshift.io/deployment-config.name: backend-redis
      threescale_component: backend
      threescale_component_element: redis
      velero.io/backup-name: migration-05da4-initial-s7jkt
      velero.io/restore-name: migration-05da4-final-h89cb
    name: backend-redis-1
    namespace: 3scale
    ownerReferences:
    - apiVersion: apps.openshift.io/v1
      blockOwnerDeletion: true
      controller: true
      kind: DeploymentConfig
      name: backend-redis
      uid: 08eaac2d-2de9-4f1c-bc3c-3bf9490091f8
    resourceVersion: "428583638"
    uid: 6cbd9012-e2e3-40a9-b887-b609ba48f4d3
  spec:
    replicas: 1
    selector:
      deployment: backend-redis-1
      deploymentConfig: backend-redis
      deploymentconfig: backend-redis
    template:
      metadata:
        annotations:
          openshift.io/deployment-config.latest-version: "1"
          openshift.io/deployment-config.name: backend-redis
          openshift.io/deployment.name: backend-redis-1
          openshift.io/generated-by: OpenShiftNewApp
        creationTimestamp: null
        labels:
          app: 3scale-api-management
          deployment: backend-redis-1
          deploymentConfig: backend-redis
          deploymentconfig: backend-redis
          threescale_component: backend
          threescale_component_element: redis
      spec:
        containers:
        - args:
          - /etc/redis.d/redis.conf
          - --daemonize
          - "no"
          command:
          - /opt/rh/rh-redis32/root/usr/bin/redis-server
          image: registry.redhat.io/rhscl/redis-32-rhel7@sha256:a9bdf52384a222635efc0284db47d12fbde8c3d0fcb66517ba8eefad1d4e9dc9
          imagePullPolicy: IfNotPresent
          livenessProbe:
            failureThreshold: 3
            initialDelaySeconds: 10
            periodSeconds: 10
            successThreshold: 1
            tcpSocket:
              port: 6379
            timeoutSeconds: 1
          name: backend-redis
          readinessProbe:
            exec:
              command:
              - container-entrypoint
              - bash
              - -c
              - redis-cli set liveness-probe "`date`" | grep OK
            failureThreshold: 3
            initialDelaySeconds: 10
            periodSeconds: 30
            successThreshold: 1
            timeoutSeconds: 1
          resources:
            limits:
              cpu: 200m
              memory: 500Mi
            requests:
              cpu: 10m
              memory: 100Mi
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /var/lib/redis/data
            name: backend-redis-storage
          - mountPath: /etc/redis.d/
            name: redis-config
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: amp
        serviceAccountName: amp
        terminationGracePeriodSeconds: 30
        volumes:
        - name: backend-redis-storage
          persistentVolumeClaim:
            claimName: backend-redis-storage
        - configMap:
            defaultMode: 420
            items:
            - key: redis.conf
              path: redis.conf
            name: redis-config
          name: redis-config
  status:
    availableReplicas: 1
    fullyLabeledReplicas: 1
    observedGeneration: 2
    readyReplicas: 1
    replicas: 1
- apiVersion: v1
  kind: ReplicationController
  metadata:
    annotations:
      openshift.io/deployer-pod.completed-at: 2023-06-04 23:53:08 +0000 UTC
      openshift.io/deployer-pod.created-at: 2023-06-04 23:50:50 +0000 UTC
      openshift.io/deployer-pod.name: backend-worker-1-deploy
      openshift.io/deployment-config.latest-version: "1"
      openshift.io/deployment-config.name: backend-worker
      openshift.io/deployment.phase: Complete
      openshift.io/deployment.replicas: "1"
      openshift.io/deployment.status-reason: config change
      openshift.io/encoded-deployment-config: |
        {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"backend-worker","namespace":"3scale","uid":"b4bd00b3-21c3-4f62-9082-080863cb891d","resourceVersion":"20279968","generation":2,"creationTimestamp":"2023-06-04T23:50:41Z","labels":{"app":"3scale-api-management","migration.openshift.io/migrated-by-migmigration":"d260e821-c8d9-409f-9013-a81dd35264d4","migration.openshift.io/migrated-by-migplan":"49357516-407e-4d22-8a38-498daa6ef155","threescale_component":"backend","threescale_component_element":"worker","velero.io/backup-name":"migration-05da4-initial-s7jkt","velero.io/restore-name":"migration-05da4-final-h89cb"},"annotations":{"openshift.io/backup-registry-hostname":"docker-registry.default.svc:5000","openshift.io/backup-server-version":"1.11","openshift.io/generated-by":"OpenShiftNewApp","openshift.io/migration-registry":"172.30.138.125:5000","openshift.io/restore-registry-hostname":"image-registry.openshift-image-registry.svc:5000","openshift.io/restore-server-version":"1.23"},"managedFields":[{"manager":"velero-server","operation":"Update","apiVersion":"apps.openshift.io/v1","time":"2023-06-04T23:50:41Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:openshift.io/backup-registry-hostname":{},"f:openshift.io/backup-server-version":{},"f:openshift.io/generated-by":{},"f:openshift.io/migration-registry":{},"f:openshift.io/restore-registry-hostname":{},"f:openshift.io/restore-server-version":{}},"f:labels":{".":{},"f:app":{},"f:migration.openshift.io/migrated-by-migmigration":{},"f:migration.openshift.io/migrated-by-migplan":{},"f:threescale_component":{},"f:threescale_component_element":{},"f:velero.io/backup-name":{},"f:velero.io/restore-name":{}}},"f:spec":{"f:replicas":{},"f:revisionHistoryLimit":{},"f:selector":{".":{},"f:deploymentConfig":{}},"f:strategy":{"f:activeDeadlineSeconds":{},"f:rollingParams":{".":{},"f:intervalSeconds":{},"f:maxSurge":{},"f:maxUnavailable":{},"f:timeoutSeconds":{},"f:updatePeriodSeconds":{}},"f:type":{}},"f:template":{".":{},"f:metadata":{".":{},"f:annotations":{".":{},"f:openshift.io/generated-by":{}},"f:creationTimestamp":{},"f:labels":{".":{},"f:app":{},"f:deploymentConfig":{},"f:threescale_component":{},"f:threescale_component_element":{}}},"f:spec":{".":{},"f:containers":{".":{},"k:{\"name\":\"backend-worker\"}":{".":{},"f:args":{},"f:env":{".":{},"k:{\"name\":\"CONFIG_EVENTS_HOOK\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"CONFIG_EVENTS_HOOK_SHARED_SECRET\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"CONFIG_QUEUES_MASTER_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"CONFIG_QUEUES_SENTINEL_HOSTS\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"CONFIG_QUEUES_SENTINEL_ROLE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"CONFIG_REDIS_PROXY\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"CONFIG_REDIS_SENTINEL_HOSTS\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"CONFIG_REDIS_SENTINEL_ROLE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"RACK_ENV\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:initContainers":{".":{},"k:{\"name\":\"backend-redis-svc\"}":{".":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"CONFIG_QUEUES_MASTER_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"CONFIG_QUEUES_SENTINEL_HOSTS\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"CONFIG_QUEUES_SENTINEL_ROLE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"CONFIG_REDIS_PROXY\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"CONFIG_REDIS_SENTINEL_HOSTS\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"CONFIG_REDIS_SENTINEL_ROLE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"RACK_ENV\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"SLEEP_SECONDS\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{}}}}}},{"manager":"openshift-controller-manager","operation":"Update","apiVersion":"apps.openshift.io/v1","time":"2023-06-04T23:50:49Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:triggers":{}}}},{"manager":"openshift-controller-manager","operation":"Update","apiVersion":"apps.openshift.io/v1","time":"2023-06-04T23:50:49Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{".":{},"k:{\"type\":\"Available\"}":{".":{},"f:lastTransitionTime":{},"f:lastUpdateTime":{},"f:message":{},"f:status":{},"f:type":{}}},"f:details":{".":{},"f:causes":{},"f:message":{}},"f:latestVersion":{},"f:observedGeneration":{}}},"subresource":"status"}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":1200,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["backend-redis-svc","backend-worker"],"from":{"kind":"ImageStreamTag","namespace":"3scale","name":"amp-backend:latest"},"lastTriggeredImage":"registry.redhat.io/3scale-amp2/backend-rhel7@sha256:d13c45ea48efd2a87cb5efb8b745b80a298cdb789e41995fbdedfcc0bfa6a5c5"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"backend-worker"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"backend-worker","threescale_component":"backend","threescale_component_element":"worker"},"annotations":{"openshift.io/generated-by":"OpenShiftNewApp"}},"spec":{"initContainers":[{"name":"backend-redis-svc","image":"registry.redhat.io/3scale-amp2/backend-rhel7@sha256:d13c45ea48efd2a87cb5efb8b745b80a298cdb789e41995fbdedfcc0bfa6a5c5","command":["/opt/app/entrypoint.sh","sh","-c","until rake connectivity:redis_storage_queue_check; do sleep $SLEEP_SECONDS; done"],"env":[{"name":"CONFIG_REDIS_PROXY","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_URL"}}},{"name":"CONFIG_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_HOSTS"}}},{"name":"CONFIG_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_ROLE"}}},{"name":"CONFIG_QUEUES_MASTER_NAME","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_URL"}}},{"name":"CONFIG_QUEUES_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_SENTINEL_HOSTS"}}},{"name":"CONFIG_QUEUES_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_SENTINEL_ROLE"}}},{"name":"RACK_ENV","valueFrom":{"configMapKeyRef":{"name":"backend-environment","key":"RACK_ENV"}}},{"name":"SLEEP_SECONDS","value":"1"}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"backend-worker","image":"registry.redhat.io/3scale-amp2/backend-rhel7@sha256:d13c45ea48efd2a87cb5efb8b745b80a298cdb789e41995fbdedfcc0bfa6a5c5","args":["bin/3scale_backend_worker","run"],"env":[{"name":"CONFIG_REDIS_PROXY","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_URL"}}},{"name":"CONFIG_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_HOSTS"}}},{"name":"CONFIG_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_ROLE"}}},{"name":"CONFIG_QUEUES_MASTER_NAME","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_URL"}}},{"name":"CONFIG_QUEUES_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_SENTINEL_HOSTS"}}},{"name":"CONFIG_QUEUES_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_SENTINEL_ROLE"}}},{"name":"RACK_ENV","valueFrom":{"configMapKeyRef":{"name":"backend-environment","key":"RACK_ENV"}}},{"name":"CONFIG_EVENTS_HOOK","valueFrom":{"secretKeyRef":{"name":"system-events-hook","key":"URL"}}},{"name":"CONFIG_EVENTS_HOOK_SHARED_SECRET","valueFrom":{"secretKeyRef":{"name":"system-events-hook","key":"PASSWORD"}}}],"resources":{"limits":{"cpu":"400m","memory":"600Mi"},"requests":{"cpu":"150m","memory":"50Mi"}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":1,"observedGeneration":1,"replicas":0,"updatedReplicas":0,"availableReplicas":0,"unavailableReplicas":0,"details":{"message":"config change","causes":[{"type":"ConfigChange"}]},"conditions":[{"type":"Available","status":"False","lastUpdateTime":"2023-06-04T23:50:41Z","lastTransitionTime":"2023-06-04T23:50:41Z","message":"Deployment config does not have minimum availability."}]}}
    creationTimestamp: "2023-06-04T23:50:49Z"
    generation: 2
    labels:
      app: 3scale-api-management
      migration.openshift.io/migrated-by-migmigration: d260e821-c8d9-409f-9013-a81dd35264d4
      migration.openshift.io/migrated-by-migplan: 49357516-407e-4d22-8a38-498daa6ef155
      openshift.io/deployment-config.name: backend-worker
      threescale_component: backend
      threescale_component_element: worker
      velero.io/backup-name: migration-05da4-initial-s7jkt
      velero.io/restore-name: migration-05da4-final-h89cb
    name: backend-worker-1
    namespace: 3scale
    ownerReferences:
    - apiVersion: apps.openshift.io/v1
      blockOwnerDeletion: true
      controller: true
      kind: DeploymentConfig
      name: backend-worker
      uid: b4bd00b3-21c3-4f62-9082-080863cb891d
    resourceVersion: "428583502"
    uid: 1370f1c4-1c01-4495-9b02-e83eed9089aa
  spec:
    replicas: 1
    selector:
      deployment: backend-worker-1
      deploymentConfig: backend-worker
      deploymentconfig: backend-worker
    template:
      metadata:
        annotations:
          openshift.io/deployment-config.latest-version: "1"
          openshift.io/deployment-config.name: backend-worker
          openshift.io/deployment.name: backend-worker-1
          openshift.io/generated-by: OpenShiftNewApp
        creationTimestamp: null
        labels:
          app: 3scale-api-management
          deployment: backend-worker-1
          deploymentConfig: backend-worker
          deploymentconfig: backend-worker
          threescale_component: backend
          threescale_component_element: worker
      spec:
        containers:
        - args:
          - bin/3scale_backend_worker
          - run
          env:
          - name: CONFIG_REDIS_PROXY
            valueFrom:
              secretKeyRef:
                key: REDIS_STORAGE_URL
                name: backend-redis
          - name: CONFIG_REDIS_SENTINEL_HOSTS
            valueFrom:
              secretKeyRef:
                key: REDIS_STORAGE_SENTINEL_HOSTS
                name: backend-redis
          - name: CONFIG_REDIS_SENTINEL_ROLE
            valueFrom:
              secretKeyRef:
                key: REDIS_STORAGE_SENTINEL_ROLE
                name: backend-redis
          - name: CONFIG_QUEUES_MASTER_NAME
            valueFrom:
              secretKeyRef:
                key: REDIS_QUEUES_URL
                name: backend-redis
          - name: CONFIG_QUEUES_SENTINEL_HOSTS
            valueFrom:
              secretKeyRef:
                key: REDIS_QUEUES_SENTINEL_HOSTS
                name: backend-redis
          - name: CONFIG_QUEUES_SENTINEL_ROLE
            valueFrom:
              secretKeyRef:
                key: REDIS_QUEUES_SENTINEL_ROLE
                name: backend-redis
          - name: RACK_ENV
            valueFrom:
              configMapKeyRef:
                key: RACK_ENV
                name: backend-environment
          - name: CONFIG_EVENTS_HOOK
            valueFrom:
              secretKeyRef:
                key: URL
                name: system-events-hook
          - name: CONFIG_EVENTS_HOOK_SHARED_SECRET
            valueFrom:
              secretKeyRef:
                key: PASSWORD
                name: system-events-hook
          image: registry.redhat.io/3scale-amp2/backend-rhel7@sha256:d13c45ea48efd2a87cb5efb8b745b80a298cdb789e41995fbdedfcc0bfa6a5c5
          imagePullPolicy: IfNotPresent
          name: backend-worker
          resources:
            limits:
              cpu: 400m
              memory: 600Mi
            requests:
              cpu: 150m
              memory: 50Mi
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        dnsPolicy: ClusterFirst
        initContainers:
        - command:
          - /opt/app/entrypoint.sh
          - sh
          - -c
          - until rake connectivity:redis_storage_queue_check; do sleep $SLEEP_SECONDS;
            done
          env:
          - name: CONFIG_REDIS_PROXY
            valueFrom:
              secretKeyRef:
                key: REDIS_STORAGE_URL
                name: backend-redis
          - name: CONFIG_REDIS_SENTINEL_HOSTS
            valueFrom:
              secretKeyRef:
                key: REDIS_STORAGE_SENTINEL_HOSTS
                name: backend-redis
          - name: CONFIG_REDIS_SENTINEL_ROLE
            valueFrom:
              secretKeyRef:
                key: REDIS_STORAGE_SENTINEL_ROLE
                name: backend-redis
          - name: CONFIG_QUEUES_MASTER_NAME
            valueFrom:
              secretKeyRef:
                key: REDIS_QUEUES_URL
                name: backend-redis
          - name: CONFIG_QUEUES_SENTINEL_HOSTS
            valueFrom:
              secretKeyRef:
                key: REDIS_QUEUES_SENTINEL_HOSTS
                name: backend-redis
          - name: CONFIG_QUEUES_SENTINEL_ROLE
            valueFrom:
              secretKeyRef:
                key: REDIS_QUEUES_SENTINEL_ROLE
                name: backend-redis
          - name: RACK_ENV
            valueFrom:
              configMapKeyRef:
                key: RACK_ENV
                name: backend-environment
          - name: SLEEP_SECONDS
            value: "1"
          image: registry.redhat.io/3scale-amp2/backend-rhel7@sha256:d13c45ea48efd2a87cb5efb8b745b80a298cdb789e41995fbdedfcc0bfa6a5c5
          imagePullPolicy: Always
          name: backend-redis-svc
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: amp
        serviceAccountName: amp
        terminationGracePeriodSeconds: 30
  status:
    availableReplicas: 1
    fullyLabeledReplicas: 1
    observedGeneration: 2
    readyReplicas: 1
    replicas: 1
- apiVersion: v1
  kind: ReplicationController
  metadata:
    annotations:
      openshift.io/deployer-pod.completed-at: 2023-06-05 02:13:43 +0000 UTC
      openshift.io/deployer-pod.created-at: 2023-06-04 23:50:50 +0000 UTC
      openshift.io/deployer-pod.name: system-app-1-deploy
      openshift.io/deployment-config.latest-version: "1"
      openshift.io/deployment-config.name: system-app
      openshift.io/deployment.phase: Complete
      openshift.io/deployment.replicas: "1"
      openshift.io/deployment.status-reason: config change
      openshift.io/encoded-deployment-config: |
        {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"system-app","namespace":"3scale","uid":"b4ebf87f-9188-4046-9ed3-5a71a34a9df1","resourceVersion":"20280009","generation":2,"creationTimestamp":"2023-06-04T23:50:41Z","labels":{"app":"3scale-api-management","migration.openshift.io/migrated-by-migmigration":"d260e821-c8d9-409f-9013-a81dd35264d4","migration.openshift.io/migrated-by-migplan":"49357516-407e-4d22-8a38-498daa6ef155","threescale_component":"system","threescale_component_element":"app","velero.io/backup-name":"migration-05da4-initial-s7jkt","velero.io/restore-name":"migration-05da4-final-h89cb"},"annotations":{"openshift.io/backup-registry-hostname":"docker-registry.default.svc:5000","openshift.io/backup-server-version":"1.11","openshift.io/generated-by":"OpenShiftNewApp","openshift.io/migration-registry":"172.30.138.125:5000","openshift.io/restore-registry-hostname":"image-registry.openshift-image-registry.svc:5000","openshift.io/restore-server-version":"1.23"},"managedFields":[{"manager":"velero-server","operation":"Update","apiVersion":"apps.openshift.io/v1","time":"2023-06-04T23:50:41Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:openshift.io/backup-registry-hostname":{},"f:openshift.io/backup-server-version":{},"f:openshift.io/generated-by":{},"f:openshift.io/migration-registry":{},"f:openshift.io/restore-registry-hostname":{},"f:openshift.io/restore-server-version":{}},"f:labels":{".":{},"f:app":{},"f:migration.openshift.io/migrated-by-migmigration":{},"f:migration.openshift.io/migrated-by-migplan":{},"f:threescale_component":{},"f:threescale_component_element":{},"f:velero.io/backup-name":{},"f:velero.io/restore-name":{}}},"f:spec":{"f:replicas":{},"f:revisionHistoryLimit":{},"f:selector":{".":{},"f:deploymentConfig":{}},"f:strategy":{"f:activeDeadlineSeconds":{},"f:rollingParams":{".":{},"f:intervalSeconds":{},"f:maxSurge":{},"f:maxUnavailable":{},"f:post":{".":{},"f:execNewPod":{".":{},"f:command":{},"f:containerName":{}},"f:failurePolicy":{}},"f:pre":{".":{},"f:execNewPod":{".":{},"f:command":{},"f:containerName":{},"f:env":{},"f:volumes":{}},"f:failurePolicy":{}},"f:timeoutSeconds":{},"f:updatePeriodSeconds":{}},"f:type":{}},"f:template":{".":{},"f:metadata":{".":{},"f:annotations":{".":{},"f:openshift.io/generated-by":{}},"f:creationTimestamp":{},"f:labels":{".":{},"f:app":{},"f:deploymentConfig":{},"f:threescale_component":{},"f:threescale_component_element":{}}},"f:spec":{".":{},"f:containers":{".":{},"k:{\"name\":\"system-developer\"}":{".":{},"f:args":{},"f:env":{".":{},"k:{\"name\":\"ADMIN_ACCESS_TOKEN\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"AMP_RELEASE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"APICAST_ACCESS_TOKEN\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"APICAST_BACKEND_ROOT_ENDPOINT\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"APICAST_REGISTRY_URL\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"BACKEND_REDIS_SENTINEL_HOSTS\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"BACKEND_REDIS_SENTINEL_ROLE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"BACKEND_REDIS_URL\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"BACKEND_ROUTE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"CONFIG_INTERNAL_API_PASSWORD\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"CONFIG_INTERNAL_API_USER\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"DATABASE_URL\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"EVENTS_SHARED_SECRET\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"FORCE_SSL\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"MASTER_DOMAIN\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"MASTER_PASSWORD\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"MASTER_USER\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"MEMCACHE_SERVERS\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"MESSAGE_BUS_REDIS_NAMESPACE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"MESSAGE_BUS_REDIS_SENTINEL_HOSTS\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"MESSAGE_BUS_REDIS_SENTINEL_ROLE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"MESSAGE_BUS_REDIS_URL\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"PROVIDER_PLAN\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"RAILS_ENV\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"RAILS_LOG_LEVEL\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"RAILS_LOG_TO_STDOUT\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"RECAPTCHA_PRIVATE_KEY\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"RECAPTCHA_PUBLIC_KEY\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"REDIS_NAMESPACE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"REDIS_SENTINEL_HOSTS\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"REDIS_SENTINEL_ROLE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"REDIS_URL\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"SECRET_KEY_BASE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"SMTP_ADDRESS\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"SMTP_AUTHENTICATION\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"SMTP_DOMAIN\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"SMTP_OPENSSL_VERIFY_MODE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"SMTP_PASSWORD\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"SMTP_PORT\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"SMTP_USER_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"SSL_CERT_DIR\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"TENANT_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"THINKING_SPHINX_ADDRESS\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"THINKING_SPHINX_CONFIGURATION_FILE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"THINKING_SPHINX_PORT\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"THREESCALE_SUPERDOMAIN\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"USER_EMAIL\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"USER_LOGIN\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"USER_PASSWORD\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"ZYNC_AUTHENTICATION_TOKEN\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}}},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":3001,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:httpGet":{".":{},"f:httpHeaders":{},"f:path":{},"f:port":{},"f:scheme":{}},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/opt/system-extra-configs\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/opt/system/public/system\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}}},"k:{\"name\":\"system-master\"}":{".":{},"f:args":{},"f:env":{".":{},"k:{\"name\":\"ADMIN_ACCESS_TOKEN\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"AMP_RELEASE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"APICAST_ACCESS_TOKEN\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"APICAST_BACKEND_ROOT_ENDPOINT\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"APICAST_REGISTRY_URL\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"BACKEND_REDIS_SENTINEL_HOSTS\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"BACKEND_REDIS_SENTINEL_ROLE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"BACKEND_REDIS_URL\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"BACKEND_ROUTE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"CONFIG_INTERNAL_API_PASSWORD\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"CONFIG_INTERNAL_API_USER\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"DATABASE_URL\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"EVENTS_SHARED_SECRET\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"FORCE_SSL\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"MASTER_DOMAIN\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"MASTER_PASSWORD\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"MASTER_USER\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"MEMCACHE_SERVERS\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"MESSAGE_BUS_REDIS_NAMESPACE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"MESSAGE_BUS_REDIS_SENTINEL_HOSTS\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"MESSAGE_BUS_REDIS_SENTINEL_ROLE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"MESSAGE_BUS_REDIS_URL\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"PROVIDER_PLAN\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"RAILS_ENV\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"RAILS_LOG_LEVEL\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"RAILS_LOG_TO_STDOUT\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"RECAPTCHA_PRIVATE_KEY\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"RECAPTCHA_PUBLIC_KEY\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"REDIS_NAMESPACE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"REDIS_SENTINEL_HOSTS\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"REDIS_SENTINEL_ROLE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"REDIS_URL\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"SECRET_KEY_BASE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"SMTP_ADDRESS\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"SMTP_AUTHENTICATION\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"SMTP_DOMAIN\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"SMTP_OPENSSL_VERIFY_MODE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"SMTP_PASSWORD\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"SMTP_PORT\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"SMTP_USER_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"SSL_CERT_DIR\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"TENANT_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"THINKING_SPHINX_ADDRESS\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"THINKING_SPHINX_CONFIGURATION_FILE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"THINKING_SPHINX_PORT\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"THREESCALE_SUPERDOMAIN\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"USER_EMAIL\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"USER_LOGIN\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"USER_PASSWORD\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"ZYNC_AUTHENTICATION_TOKEN\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}}},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":3002,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:httpGet":{".":{},"f:httpHeaders":{},"f:path":{},"f:port":{},"f:scheme":{}},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/opt/system-extra-configs\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/opt/system/public/system\"}":{".":{},"f:mountPath":{},"f:name":{}}}},"k:{\"name\":\"system-provider\"}":{".":{},"f:args":{},"f:env":{".":{},"k:{\"name\":\"ADMIN_ACCESS_TOKEN\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"AMP_RELEASE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"APICAST_ACCESS_TOKEN\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"APICAST_BACKEND_ROOT_ENDPOINT\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"APICAST_REGISTRY_URL\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"BACKEND_REDIS_SENTINEL_HOSTS\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"BACKEND_REDIS_SENTINEL_ROLE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"BACKEND_REDIS_URL\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"BACKEND_ROUTE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"CONFIG_INTERNAL_API_PASSWORD\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"CONFIG_INTERNAL_API_USER\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"DATABASE_URL\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"EVENTS_SHARED_SECRET\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"FORCE_SSL\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"MASTER_DOMAIN\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"MASTER_PASSWORD\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"MASTER_USER\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"MEMCACHE_SERVERS\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"MESSAGE_BUS_REDIS_NAMESPACE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"MESSAGE_BUS_REDIS_SENTINEL_HOSTS\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"MESSAGE_BUS_REDIS_SENTINEL_ROLE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"MESSAGE_BUS_REDIS_URL\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"PROVIDER_PLAN\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"RAILS_ENV\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"RAILS_LOG_LEVEL\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"RAILS_LOG_TO_STDOUT\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"RECAPTCHA_PRIVATE_KEY\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"RECAPTCHA_PUBLIC_KEY\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"REDIS_NAMESPACE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"REDIS_SENTINEL_HOSTS\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"REDIS_SENTINEL_ROLE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"REDIS_URL\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"SECRET_KEY_BASE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"SMTP_ADDRESS\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"SMTP_AUTHENTICATION\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"SMTP_DOMAIN\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"SMTP_OPENSSL_VERIFY_MODE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"SMTP_PASSWORD\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"SMTP_PORT\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"SMTP_USER_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"SSL_CERT_DIR\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"TENANT_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"THINKING_SPHINX_ADDRESS\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"THINKING_SPHINX_CONFIGURATION_FILE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"THINKING_SPHINX_PORT\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"THREESCALE_SUPERDOMAIN\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"USER_EMAIL\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"USER_LOGIN\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"USER_PASSWORD\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"ZYNC_AUTHENTICATION_TOKEN\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}}},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":3000,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:httpGet":{".":{},"f:httpHeaders":{},"f:path":{},"f:port":{},"f:scheme":{}},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/opt/system-extra-configs\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/opt/system/public/system\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:dnsPolicy":{},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"system-config\"}":{".":{},"f:configMap":{".":{},"f:defaultMode":{},"f:items":{},"f:name":{}},"f:name":{}},"k:{\"name\":\"system-storage\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}}}}}}}},{"manager":"openshift-controller-manager","operation":"Update","apiVersion":"apps.openshift.io/v1","time":"2023-06-04T23:50:50Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:triggers":{}}}},{"manager":"openshift-controller-manager","operation":"Update","apiVersion":"apps.openshift.io/v1","time":"2023-06-04T23:50:50Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{".":{},"k:{\"type\":\"Available\"}":{".":{},"f:lastTransitionTime":{},"f:lastUpdateTime":{},"f:message":{},"f:status":{},"f:type":{}}},"f:details":{".":{},"f:causes":{},"f:message":{}},"f:latestVersion":{},"f:observedGeneration":{}}},"subresource":"status"}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":1200,"maxUnavailable":"25%","maxSurge":"25%","pre":{"failurePolicy":"Retry","execNewPod":{"command":["bash","-c","bundle exec rake boot openshift:deploy MASTER_ACCESS_TOKEN=\"43qyo3ws\" \u0026\u0026 bundle exec rake services:create_backend_apis services:update_metric_owners proxy:update_proxy_rule_owners"],"env":[{"name":"AMP_RELEASE","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"AMP_RELEASE"}}},{"name":"APICAST_REGISTRY_URL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"APICAST_REGISTRY_URL"}}},{"name":"FORCE_SSL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"FORCE_SSL"}}},{"name":"PROVIDER_PLAN","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"PROVIDER_PLAN"}}},{"name":"RAILS_ENV","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_ENV"}}},{"name":"RAILS_LOG_LEVEL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_LOG_LEVEL"}}},{"name":"RAILS_LOG_TO_STDOUT","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_LOG_TO_STDOUT"}}},{"name":"SSL_CERT_DIR","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"SSL_CERT_DIR"}}},{"name":"THINKING_SPHINX_PORT","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THINKING_SPHINX_PORT"}}},{"name":"THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE"}}},{"name":"THREESCALE_SUPERDOMAIN","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THREESCALE_SUPERDOMAIN"}}},{"name":"DATABASE_URL","valueFrom":{"secretKeyRef":{"name":"system-database","key":"URL"}}},{"name":"MASTER_DOMAIN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_DOMAIN"}}},{"name":"MASTER_USER","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_USER"}}},{"name":"MASTER_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_PASSWORD"}}},{"name":"ADMIN_ACCESS_TOKEN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_ACCESS_TOKEN"}}},{"name":"USER_LOGIN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_USER"}}},{"name":"USER_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_PASSWORD"}}},{"name":"USER_EMAIL","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_EMAIL"}}},{"name":"TENANT_NAME","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"TENANT_NAME"}}},{"name":"THINKING_SPHINX_ADDRESS","value":"system-sphinx"},{"name":"THINKING_SPHINX_CONFIGURATION_FILE","value":"/tmp/sphinx.conf"},{"name":"EVENTS_SHARED_SECRET","valueFrom":{"secretKeyRef":{"name":"system-events-hook","key":"PASSWORD"}}},{"name":"RECAPTCHA_PUBLIC_KEY","valueFrom":{"secretKeyRef":{"name":"system-recaptcha","key":"PUBLIC_KEY"}}},{"name":"RECAPTCHA_PRIVATE_KEY","valueFrom":{"secretKeyRef":{"name":"system-recaptcha","key":"PRIVATE_KEY"}}},{"name":"SECRET_KEY_BASE","valueFrom":{"secretKeyRef":{"name":"system-app","key":"SECRET_KEY_BASE"}}},{"name":"MEMCACHE_SERVERS","valueFrom":{"secretKeyRef":{"name":"system-memcache","key":"SERVERS"}}},{"name":"REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"URL"}}},{"name":"MESSAGE_BUS_REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_URL"}}},{"name":"REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"NAMESPACE"}}},{"name":"MESSAGE_BUS_REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_NAMESPACE"}}},{"name":"REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_HOSTS"}}},{"name":"REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_ROLE"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_HOSTS"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_ROLE"}}},{"name":"BACKEND_REDIS_URL","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_URL"}}},{"name":"BACKEND_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_HOSTS"}}},{"name":"BACKEND_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_ROLE"}}},{"name":"APICAST_BACKEND_ROOT_ENDPOINT","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"route_endpoint"}}},{"name":"BACKEND_ROUTE","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"route_endpoint"}}},{"name":"SMTP_ADDRESS","valueFrom":{"configMapKeyRef":{"name":"smtp","key":"address"}}},{"name":"SMTP_USER_NAME","valueFrom":{"configMapKeyRef":{"name":"smtp","key":"username"}}},{"name":"SMTP_PASSWORD","valueFrom":{"configMapKeyRef":{"name":"smtp","key":"password"}}},{"name":"SMTP_DOMAIN","valueFrom":{"configMapKeyRef":{"name":"smtp","key":"domain"}}},{"name":"SMTP_PORT","valueFrom":{"configMapKeyRef":{"name":"smtp","key":"port"}}},{"name":"SMTP_AUTHENTICATION","valueFrom":{"configMapKeyRef":{"name":"smtp","key":"authentication"}}},{"name":"SMTP_OPENSSL_VERIFY_MODE","valueFrom":{"configMapKeyRef":{"name":"smtp","key":"openssl.verify.mode"}}},{"name":"APICAST_ACCESS_TOKEN","valueFrom":{"secretKeyRef":{"name":"system-master-apicast","key":"ACCESS_TOKEN"}}},{"name":"ZYNC_AUTHENTICATION_TOKEN","valueFrom":{"secretKeyRef":{"name":"zync","key":"ZYNC_AUTHENTICATION_TOKEN"}}},{"name":"CONFIG_INTERNAL_API_USER","valueFrom":{"secretKeyRef":{"name":"backend-internal-api","key":"username"}}},{"name":"CONFIG_INTERNAL_API_PASSWORD","valueFrom":{"secretKeyRef":{"name":"backend-internal-api","key":"password"}}}],"containerName":"system-master","volumes":["system-storage"]}},"post":{"failurePolicy":"Abort","execNewPod":{"command":["bash","-c","bundle exec rake boot openshift:post_deploy"],"containerName":"system-master"}}},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["system-provider","system-developer","system-master"],"from":{"kind":"ImageStreamTag","namespace":"3scale","name":"amp-system:latest"},"lastTriggeredImage":"registry.redhat.io/3scale-amp2/system-rhel7@sha256:abe1c074e975b6bf6a1f527a1820671636c393517f2f850f7299c24ae88ba2ab"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"system-app"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"system-app","threescale_component":"system","threescale_component_element":"app"},"annotations":{"openshift.io/generated-by":"OpenShiftNewApp"}},"spec":{"volumes":[{"name":"system-storage","persistentVolumeClaim":{"claimName":"system-storage"}},{"name":"system-config","configMap":{"name":"system","items":[{"key":"zync.yml","path":"zync.yml"},{"key":"rolling_updates.yml","path":"rolling_updates.yml"},{"key":"service_discovery.yml","path":"service_discovery.yml"}],"defaultMode":420}}],"containers":[{"name":"system-master","image":"registry.redhat.io/3scale-amp2/system-rhel7@sha256:abe1c074e975b6bf6a1f527a1820671636c393517f2f850f7299c24ae88ba2ab","args":["env","TENANT_MODE=master","PORT=3002","container-entrypoint","bundle","exec","unicorn","-c","config/unicorn.rb"],"ports":[{"name":"master","containerPort":3002,"protocol":"TCP"}],"env":[{"name":"AMP_RELEASE","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"AMP_RELEASE"}}},{"name":"APICAST_REGISTRY_URL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"APICAST_REGISTRY_URL"}}},{"name":"FORCE_SSL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"FORCE_SSL"}}},{"name":"PROVIDER_PLAN","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"PROVIDER_PLAN"}}},{"name":"RAILS_ENV","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_ENV"}}},{"name":"RAILS_LOG_LEVEL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_LOG_LEVEL"}}},{"name":"RAILS_LOG_TO_STDOUT","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_LOG_TO_STDOUT"}}},{"name":"SSL_CERT_DIR","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"SSL_CERT_DIR"}}},{"name":"THINKING_SPHINX_PORT","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THINKING_SPHINX_PORT"}}},{"name":"THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE"}}},{"name":"THREESCALE_SUPERDOMAIN","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THREESCALE_SUPERDOMAIN"}}},{"name":"DATABASE_URL","valueFrom":{"secretKeyRef":{"name":"system-database","key":"URL"}}},{"name":"MASTER_DOMAIN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_DOMAIN"}}},{"name":"MASTER_USER","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_USER"}}},{"name":"MASTER_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_PASSWORD"}}},{"name":"ADMIN_ACCESS_TOKEN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_ACCESS_TOKEN"}}},{"name":"USER_LOGIN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_USER"}}},{"name":"USER_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_PASSWORD"}}},{"name":"USER_EMAIL","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_EMAIL"}}},{"name":"TENANT_NAME","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"TENANT_NAME"}}},{"name":"THINKING_SPHINX_ADDRESS","value":"system-sphinx"},{"name":"THINKING_SPHINX_CONFIGURATION_FILE","value":"/tmp/sphinx.conf"},{"name":"EVENTS_SHARED_SECRET","valueFrom":{"secretKeyRef":{"name":"system-events-hook","key":"PASSWORD"}}},{"name":"RECAPTCHA_PUBLIC_KEY","valueFrom":{"secretKeyRef":{"name":"system-recaptcha","key":"PUBLIC_KEY"}}},{"name":"RECAPTCHA_PRIVATE_KEY","valueFrom":{"secretKeyRef":{"name":"system-recaptcha","key":"PRIVATE_KEY"}}},{"name":"SECRET_KEY_BASE","valueFrom":{"secretKeyRef":{"name":"system-app","key":"SECRET_KEY_BASE"}}},{"name":"MEMCACHE_SERVERS","valueFrom":{"secretKeyRef":{"name":"system-memcache","key":"SERVERS"}}},{"name":"REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"URL"}}},{"name":"MESSAGE_BUS_REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_URL"}}},{"name":"REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"NAMESPACE"}}},{"name":"MESSAGE_BUS_REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_NAMESPACE"}}},{"name":"REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_HOSTS"}}},{"name":"REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_ROLE"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_HOSTS"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_ROLE"}}},{"name":"BACKEND_REDIS_URL","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_URL"}}},{"name":"BACKEND_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_HOSTS"}}},{"name":"BACKEND_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_ROLE"}}},{"name":"APICAST_BACKEND_ROOT_ENDPOINT","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"route_endpoint"}}},{"name":"BACKEND_ROUTE","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"route_endpoint"}}},{"name":"SMTP_ADDRESS","valueFrom":{"configMapKeyRef":{"name":"smtp","key":"address"}}},{"name":"SMTP_USER_NAME","valueFrom":{"configMapKeyRef":{"name":"smtp","key":"username"}}},{"name":"SMTP_PASSWORD","valueFrom":{"configMapKeyRef":{"name":"smtp","key":"password"}}},{"name":"SMTP_DOMAIN","valueFrom":{"configMapKeyRef":{"name":"smtp","key":"domain"}}},{"name":"SMTP_PORT","valueFrom":{"configMapKeyRef":{"name":"smtp","key":"port"}}},{"name":"SMTP_AUTHENTICATION","valueFrom":{"configMapKeyRef":{"name":"smtp","key":"authentication"}}},{"name":"SMTP_OPENSSL_VERIFY_MODE","valueFrom":{"configMapKeyRef":{"name":"smtp","key":"openssl.verify.mode"}}},{"name":"APICAST_ACCESS_TOKEN","valueFrom":{"secretKeyRef":{"name":"system-master-apicast","key":"ACCESS_TOKEN"}}},{"name":"ZYNC_AUTHENTICATION_TOKEN","valueFrom":{"secretKeyRef":{"name":"zync","key":"ZYNC_AUTHENTICATION_TOKEN"}}},{"name":"CONFIG_INTERNAL_API_USER","valueFrom":{"secretKeyRef":{"name":"backend-internal-api","key":"username"}}},{"name":"CONFIG_INTERNAL_API_PASSWORD","valueFrom":{"secretKeyRef":{"name":"backend-internal-api","key":"password"}}}],"resources":{"limits":{"cpu":"1","memory":"800Mi"},"requests":{"cpu":"50m","memory":"600Mi"}},"volumeMounts":[{"name":"system-storage","mountPath":"/opt/system/public/system"},{"name":"system-config","mountPath":"/opt/system-extra-configs"}],"livenessProbe":{"tcpSocket":{"port":"master"},"initialDelaySeconds":40,"timeoutSeconds":10,"periodSeconds":10,"successThreshold":1,"failureThreshold":40},"readinessProbe":{"httpGet":{"path":"/check.txt","port":"master","scheme":"HTTP","httpHeaders":[{"name":"X-Forwarded-Proto","value":"https"}]},"initialDelaySeconds":60,"timeoutSeconds":10,"periodSeconds":30,"successThreshold":1,"failureThreshold":10},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"},{"name":"system-provider","image":"registry.redhat.io/3scale-amp2/system-rhel7@sha256:abe1c074e975b6bf6a1f527a1820671636c393517f2f850f7299c24ae88ba2ab","args":["env","TENANT_MODE=provider","PORT=3000","container-entrypoint","bundle","exec","unicorn","-c","config/unicorn.rb"],"ports":[{"name":"provider","containerPort":3000,"protocol":"TCP"}],"env":[{"name":"AMP_RELEASE","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"AMP_RELEASE"}}},{"name":"APICAST_REGISTRY_URL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"APICAST_REGISTRY_URL"}}},{"name":"FORCE_SSL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"FORCE_SSL"}}},{"name":"PROVIDER_PLAN","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"PROVIDER_PLAN"}}},{"name":"RAILS_ENV","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_ENV"}}},{"name":"RAILS_LOG_LEVEL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_LOG_LEVEL"}}},{"name":"RAILS_LOG_TO_STDOUT","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_LOG_TO_STDOUT"}}},{"name":"SSL_CERT_DIR","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"SSL_CERT_DIR"}}},{"name":"THINKING_SPHINX_PORT","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THINKING_SPHINX_PORT"}}},{"name":"THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE"}}},{"name":"THREESCALE_SUPERDOMAIN","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THREESCALE_SUPERDOMAIN"}}},{"name":"DATABASE_URL","valueFrom":{"secretKeyRef":{"name":"system-database","key":"URL"}}},{"name":"MASTER_DOMAIN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_DOMAIN"}}},{"name":"MASTER_USER","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_USER"}}},{"name":"MASTER_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_PASSWORD"}}},{"name":"ADMIN_ACCESS_TOKEN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_ACCESS_TOKEN"}}},{"name":"USER_LOGIN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_USER"}}},{"name":"USER_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_PASSWORD"}}},{"name":"USER_EMAIL","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_EMAIL"}}},{"name":"TENANT_NAME","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"TENANT_NAME"}}},{"name":"THINKING_SPHINX_ADDRESS","value":"system-sphinx"},{"name":"THINKING_SPHINX_CONFIGURATION_FILE","value":"/tmp/sphinx.conf"},{"name":"EVENTS_SHARED_SECRET","valueFrom":{"secretKeyRef":{"name":"system-events-hook","key":"PASSWORD"}}},{"name":"RECAPTCHA_PUBLIC_KEY","valueFrom":{"secretKeyRef":{"name":"system-recaptcha","key":"PUBLIC_KEY"}}},{"name":"RECAPTCHA_PRIVATE_KEY","valueFrom":{"secretKeyRef":{"name":"system-recaptcha","key":"PRIVATE_KEY"}}},{"name":"SECRET_KEY_BASE","valueFrom":{"secretKeyRef":{"name":"system-app","key":"SECRET_KEY_BASE"}}},{"name":"MEMCACHE_SERVERS","valueFrom":{"secretKeyRef":{"name":"system-memcache","key":"SERVERS"}}},{"name":"REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"URL"}}},{"name":"MESSAGE_BUS_REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_URL"}}},{"name":"REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"NAMESPACE"}}},{"name":"MESSAGE_BUS_REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_NAMESPACE"}}},{"name":"REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_HOSTS"}}},{"name":"REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_ROLE"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_HOSTS"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_ROLE"}}},{"name":"BACKEND_REDIS_URL","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_URL"}}},{"name":"BACKEND_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_HOSTS"}}},{"name":"BACKEND_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_ROLE"}}},{"name":"APICAST_BACKEND_ROOT_ENDPOINT","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"route_endpoint"}}},{"name":"BACKEND_ROUTE","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"route_endpoint"}}},{"name":"SMTP_ADDRESS","valueFrom":{"configMapKeyRef":{"name":"smtp","key":"address"}}},{"name":"SMTP_USER_NAME","valueFrom":{"configMapKeyRef":{"name":"smtp","key":"username"}}},{"name":"SMTP_PASSWORD","valueFrom":{"configMapKeyRef":{"name":"smtp","key":"password"}}},{"name":"SMTP_DOMAIN","valueFrom":{"configMapKeyRef":{"name":"smtp","key":"domain"}}},{"name":"SMTP_PORT","valueFrom":{"configMapKeyRef":{"name":"smtp","key":"port"}}},{"name":"SMTP_AUTHENTICATION","valueFrom":{"configMapKeyRef":{"name":"smtp","key":"authentication"}}},{"name":"SMTP_OPENSSL_VERIFY_MODE","valueFrom":{"configMapKeyRef":{"name":"smtp","key":"openssl.verify.mode"}}},{"name":"APICAST_ACCESS_TOKEN","valueFrom":{"secretKeyRef":{"name":"system-master-apicast","key":"ACCESS_TOKEN"}}},{"name":"ZYNC_AUTHENTICATION_TOKEN","valueFrom":{"secretKeyRef":{"name":"zync","key":"ZYNC_AUTHENTICATION_TOKEN"}}},{"name":"CONFIG_INTERNAL_API_USER","valueFrom":{"secretKeyRef":{"name":"backend-internal-api","key":"username"}}},{"name":"CONFIG_INTERNAL_API_PASSWORD","valueFrom":{"secretKeyRef":{"name":"backend-internal-api","key":"password"}}}],"resources":{"limits":{"cpu":"1","memory":"800Mi"},"requests":{"cpu":"50m","memory":"600Mi"}},"volumeMounts":[{"name":"system-storage","mountPath":"/opt/system/public/system"},{"name":"system-config","mountPath":"/opt/system-extra-configs"}],"livenessProbe":{"tcpSocket":{"port":"provider"},"initialDelaySeconds":40,"timeoutSeconds":10,"periodSeconds":10,"successThreshold":1,"failureThreshold":40},"readinessProbe":{"httpGet":{"path":"/check.txt","port":"provider","scheme":"HTTP","httpHeaders":[{"name":"X-Forwarded-Proto","value":"https"}]},"initialDelaySeconds":60,"timeoutSeconds":10,"periodSeconds":30,"successThreshold":1,"failureThreshold":10},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"},{"name":"system-developer","image":"registry.redhat.io/3scale-amp2/system-rhel7@sha256:abe1c074e975b6bf6a1f527a1820671636c393517f2f850f7299c24ae88ba2ab","args":["env","PORT=3001","container-entrypoint","bundle","exec","unicorn","-c","config/unicorn.rb"],"ports":[{"name":"developer","containerPort":3001,"protocol":"TCP"}],"env":[{"name":"AMP_RELEASE","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"AMP_RELEASE"}}},{"name":"APICAST_REGISTRY_URL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"APICAST_REGISTRY_URL"}}},{"name":"FORCE_SSL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"FORCE_SSL"}}},{"name":"PROVIDER_PLAN","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"PROVIDER_PLAN"}}},{"name":"RAILS_ENV","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_ENV"}}},{"name":"RAILS_LOG_LEVEL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_LOG_LEVEL"}}},{"name":"RAILS_LOG_TO_STDOUT","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_LOG_TO_STDOUT"}}},{"name":"SSL_CERT_DIR","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"SSL_CERT_DIR"}}},{"name":"THINKING_SPHINX_PORT","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THINKING_SPHINX_PORT"}}},{"name":"THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE"}}},{"name":"THREESCALE_SUPERDOMAIN","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THREESCALE_SUPERDOMAIN"}}},{"name":"DATABASE_URL","valueFrom":{"secretKeyRef":{"name":"system-database","key":"URL"}}},{"name":"MASTER_DOMAIN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_DOMAIN"}}},{"name":"MASTER_USER","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_USER"}}},{"name":"MASTER_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_PASSWORD"}}},{"name":"ADMIN_ACCESS_TOKEN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_ACCESS_TOKEN"}}},{"name":"USER_LOGIN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_USER"}}},{"name":"USER_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_PASSWORD"}}},{"name":"USER_EMAIL","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_EMAIL"}}},{"name":"TENANT_NAME","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"TENANT_NAME"}}},{"name":"THINKING_SPHINX_ADDRESS","value":"system-sphinx"},{"name":"THINKING_SPHINX_CONFIGURATION_FILE","value":"/tmp/sphinx.conf"},{"name":"EVENTS_SHARED_SECRET","valueFrom":{"secretKeyRef":{"name":"system-events-hook","key":"PASSWORD"}}},{"name":"RECAPTCHA_PUBLIC_KEY","valueFrom":{"secretKeyRef":{"name":"system-recaptcha","key":"PUBLIC_KEY"}}},{"name":"RECAPTCHA_PRIVATE_KEY","valueFrom":{"secretKeyRef":{"name":"system-recaptcha","key":"PRIVATE_KEY"}}},{"name":"SECRET_KEY_BASE","valueFrom":{"secretKeyRef":{"name":"system-app","key":"SECRET_KEY_BASE"}}},{"name":"MEMCACHE_SERVERS","valueFrom":{"secretKeyRef":{"name":"system-memcache","key":"SERVERS"}}},{"name":"REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"URL"}}},{"name":"MESSAGE_BUS_REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_URL"}}},{"name":"REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"NAMESPACE"}}},{"name":"MESSAGE_BUS_REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_NAMESPACE"}}},{"name":"REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_HOSTS"}}},{"name":"REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_ROLE"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_HOSTS"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_ROLE"}}},{"name":"BACKEND_REDIS_URL","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_URL"}}},{"name":"BACKEND_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_HOSTS"}}},{"name":"BACKEND_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_ROLE"}}},{"name":"APICAST_BACKEND_ROOT_ENDPOINT","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"route_endpoint"}}},{"name":"BACKEND_ROUTE","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"route_endpoint"}}},{"name":"SMTP_ADDRESS","valueFrom":{"configMapKeyRef":{"name":"smtp","key":"address"}}},{"name":"SMTP_USER_NAME","valueFrom":{"configMapKeyRef":{"name":"smtp","key":"username"}}},{"name":"SMTP_PASSWORD","valueFrom":{"configMapKeyRef":{"name":"smtp","key":"password"}}},{"name":"SMTP_DOMAIN","valueFrom":{"configMapKeyRef":{"name":"smtp","key":"domain"}}},{"name":"SMTP_PORT","valueFrom":{"configMapKeyRef":{"name":"smtp","key":"port"}}},{"name":"SMTP_AUTHENTICATION","valueFrom":{"configMapKeyRef":{"name":"smtp","key":"authentication"}}},{"name":"SMTP_OPENSSL_VERIFY_MODE","valueFrom":{"configMapKeyRef":{"name":"smtp","key":"openssl.verify.mode"}}},{"name":"APICAST_ACCESS_TOKEN","valueFrom":{"secretKeyRef":{"name":"system-master-apicast","key":"ACCESS_TOKEN"}}},{"name":"ZYNC_AUTHENTICATION_TOKEN","valueFrom":{"secretKeyRef":{"name":"zync","key":"ZYNC_AUTHENTICATION_TOKEN"}}},{"name":"CONFIG_INTERNAL_API_USER","valueFrom":{"secretKeyRef":{"name":"backend-internal-api","key":"username"}}},{"name":"CONFIG_INTERNAL_API_PASSWORD","valueFrom":{"secretKeyRef":{"name":"backend-internal-api","key":"password"}}}],"resources":{"limits":{"cpu":"1","memory":"800Mi"},"requests":{"cpu":"50m","memory":"600Mi"}},"volumeMounts":[{"name":"system-storage","readOnly":true,"mountPath":"/opt/system/public/system"},{"name":"system-config","mountPath":"/opt/system-extra-configs"}],"livenessProbe":{"tcpSocket":{"port":"developer"},"initialDelaySeconds":40,"timeoutSeconds":10,"periodSeconds":10,"successThreshold":1,"failureThreshold":40},"readinessProbe":{"httpGet":{"path":"/check.txt","port":"developer","scheme":"HTTP","httpHeaders":[{"name":"X-Forwarded-Proto","value":"https"}]},"initialDelaySeconds":60,"timeoutSeconds":10,"periodSeconds":30,"successThreshold":1,"failureThreshold":10},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":1,"observedGeneration":1,"replicas":0,"updatedReplicas":0,"availableReplicas":0,"unavailableReplicas":0,"details":{"message":"config change","causes":[{"type":"ConfigChange"}]},"conditions":[{"type":"Available","status":"False","lastUpdateTime":"2023-06-04T23:50:41Z","lastTransitionTime":"2023-06-04T23:50:41Z","message":"Deployment config does not have minimum availability."}]}}
    creationTimestamp: "2023-06-04T23:50:50Z"
    generation: 2
    labels:
      app: 3scale-api-management
      migration.openshift.io/migrated-by-migmigration: d260e821-c8d9-409f-9013-a81dd35264d4
      migration.openshift.io/migrated-by-migplan: 49357516-407e-4d22-8a38-498daa6ef155
      openshift.io/deployment-config.name: system-app
      threescale_component: system
      threescale_component_element: app
      velero.io/backup-name: migration-05da4-initial-s7jkt
      velero.io/restore-name: migration-05da4-final-h89cb
    name: system-app-1
    namespace: 3scale
    ownerReferences:
    - apiVersion: apps.openshift.io/v1
      blockOwnerDeletion: true
      controller: true
      kind: DeploymentConfig
      name: system-app
      uid: b4ebf87f-9188-4046-9ed3-5a71a34a9df1
    resourceVersion: "491646488"
    uid: 35c39291-bb40-4e5a-8c46-dc59caf6b26a
  spec:
    replicas: 1
    selector:
      deployment: system-app-1
      deploymentConfig: system-app
      deploymentconfig: system-app
    template:
      metadata:
        annotations:
          openshift.io/deployment-config.latest-version: "1"
          openshift.io/deployment-config.name: system-app
          openshift.io/deployment.name: system-app-1
          openshift.io/generated-by: OpenShiftNewApp
        creationTimestamp: null
        labels:
          app: 3scale-api-management
          deployment: system-app-1
          deploymentConfig: system-app
          deploymentconfig: system-app
          threescale_component: system
          threescale_component_element: app
      spec:
        containers:
        - args:
          - env
          - TENANT_MODE=master
          - PORT=3002
          - container-entrypoint
          - bundle
          - exec
          - unicorn
          - -c
          - config/unicorn.rb
          env:
          - name: AMP_RELEASE
            valueFrom:
              configMapKeyRef:
                key: AMP_RELEASE
                name: system-environment
          - name: APICAST_REGISTRY_URL
            valueFrom:
              configMapKeyRef:
                key: APICAST_REGISTRY_URL
                name: system-environment
          - name: FORCE_SSL
            valueFrom:
              configMapKeyRef:
                key: FORCE_SSL
                name: system-environment
          - name: PROVIDER_PLAN
            valueFrom:
              configMapKeyRef:
                key: PROVIDER_PLAN
                name: system-environment
          - name: RAILS_ENV
            valueFrom:
              configMapKeyRef:
                key: RAILS_ENV
                name: system-environment
          - name: RAILS_LOG_LEVEL
            valueFrom:
              configMapKeyRef:
                key: RAILS_LOG_LEVEL
                name: system-environment
          - name: RAILS_LOG_TO_STDOUT
            valueFrom:
              configMapKeyRef:
                key: RAILS_LOG_TO_STDOUT
                name: system-environment
          - name: SSL_CERT_DIR
            valueFrom:
              configMapKeyRef:
                key: SSL_CERT_DIR
                name: system-environment
          - name: THINKING_SPHINX_PORT
            valueFrom:
              configMapKeyRef:
                key: THINKING_SPHINX_PORT
                name: system-environment
          - name: THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE
            valueFrom:
              configMapKeyRef:
                key: THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE
                name: system-environment
          - name: THREESCALE_SUPERDOMAIN
            valueFrom:
              configMapKeyRef:
                key: THREESCALE_SUPERDOMAIN
                name: system-environment
          - name: DATABASE_URL
            valueFrom:
              secretKeyRef:
                key: URL
                name: system-database
          - name: MASTER_DOMAIN
            valueFrom:
              secretKeyRef:
                key: MASTER_DOMAIN
                name: system-seed
          - name: MASTER_USER
            valueFrom:
              secretKeyRef:
                key: MASTER_USER
                name: system-seed
          - name: MASTER_PASSWORD
            valueFrom:
              secretKeyRef:
                key: MASTER_PASSWORD
                name: system-seed
          - name: ADMIN_ACCESS_TOKEN
            valueFrom:
              secretKeyRef:
                key: ADMIN_ACCESS_TOKEN
                name: system-seed
          - name: USER_LOGIN
            valueFrom:
              secretKeyRef:
                key: ADMIN_USER
                name: system-seed
          - name: USER_PASSWORD
            valueFrom:
              secretKeyRef:
                key: ADMIN_PASSWORD
                name: system-seed
          - name: USER_EMAIL
            valueFrom:
              secretKeyRef:
                key: ADMIN_EMAIL
                name: system-seed
          - name: TENANT_NAME
            valueFrom:
              secretKeyRef:
                key: TENANT_NAME
                name: system-seed
          - name: THINKING_SPHINX_ADDRESS
            value: system-sphinx
          - name: THINKING_SPHINX_CONFIGURATION_FILE
            value: /tmp/sphinx.conf
          - name: EVENTS_SHARED_SECRET
            valueFrom:
              secretKeyRef:
                key: PASSWORD
                name: system-events-hook
          - name: RECAPTCHA_PUBLIC_KEY
            valueFrom:
              secretKeyRef:
                key: PUBLIC_KEY
                name: system-recaptcha
          - name: RECAPTCHA_PRIVATE_KEY
            valueFrom:
              secretKeyRef:
                key: PRIVATE_KEY
                name: system-recaptcha
          - name: SECRET_KEY_BASE
            valueFrom:
              secretKeyRef:
                key: SECRET_KEY_BASE
                name: system-app
          - name: MEMCACHE_SERVERS
            valueFrom:
              secretKeyRef:
                key: SERVERS
                name: system-memcache
          - name: REDIS_URL
            valueFrom:
              secretKeyRef:
                key: URL
                name: system-redis
          - name: MESSAGE_BUS_REDIS_URL
            valueFrom:
              secretKeyRef:
                key: MESSAGE_BUS_URL
                name: system-redis
          - name: REDIS_NAMESPACE
            valueFrom:
              secretKeyRef:
                key: NAMESPACE
                name: system-redis
          - name: MESSAGE_BUS_REDIS_NAMESPACE
            valueFrom:
              secretKeyRef:
                key: MESSAGE_BUS_NAMESPACE
                name: system-redis
          - name: REDIS_SENTINEL_HOSTS
            valueFrom:
              secretKeyRef:
                key: SENTINEL_HOSTS
                name: system-redis
          - name: REDIS_SENTINEL_ROLE
            valueFrom:
              secretKeyRef:
                key: SENTINEL_ROLE
                name: system-redis
          - name: MESSAGE_BUS_REDIS_SENTINEL_HOSTS
            valueFrom:
              secretKeyRef:
                key: MESSAGE_BUS_SENTINEL_HOSTS
                name: system-redis
          - name: MESSAGE_BUS_REDIS_SENTINEL_ROLE
            valueFrom:
              secretKeyRef:
                key: MESSAGE_BUS_SENTINEL_ROLE
                name: system-redis
          - name: BACKEND_REDIS_URL
            valueFrom:
              secretKeyRef:
                key: REDIS_STORAGE_URL
                name: backend-redis
          - name: BACKEND_REDIS_SENTINEL_HOSTS
            valueFrom:
              secretKeyRef:
                key: REDIS_STORAGE_SENTINEL_HOSTS
                name: backend-redis
          - name: BACKEND_REDIS_SENTINEL_ROLE
            valueFrom:
              secretKeyRef:
                key: REDIS_STORAGE_SENTINEL_ROLE
                name: backend-redis
          - name: APICAST_BACKEND_ROOT_ENDPOINT
            valueFrom:
              secretKeyRef:
                key: route_endpoint
                name: backend-listener
          - name: BACKEND_ROUTE
            valueFrom:
              secretKeyRef:
                key: route_endpoint
                name: backend-listener
          - name: SMTP_ADDRESS
            valueFrom:
              configMapKeyRef:
                key: address
                name: smtp
          - name: SMTP_USER_NAME
            valueFrom:
              configMapKeyRef:
                key: username
                name: smtp
          - name: SMTP_PASSWORD
            valueFrom:
              configMapKeyRef:
                key: password
                name: smtp
          - name: SMTP_DOMAIN
            valueFrom:
              configMapKeyRef:
                key: domain
                name: smtp
          - name: SMTP_PORT
            valueFrom:
              configMapKeyRef:
                key: port
                name: smtp
          - name: SMTP_AUTHENTICATION
            valueFrom:
              configMapKeyRef:
                key: authentication
                name: smtp
          - name: SMTP_OPENSSL_VERIFY_MODE
            valueFrom:
              configMapKeyRef:
                key: openssl.verify.mode
                name: smtp
          - name: APICAST_ACCESS_TOKEN
            valueFrom:
              secretKeyRef:
                key: ACCESS_TOKEN
                name: system-master-apicast
          - name: ZYNC_AUTHENTICATION_TOKEN
            valueFrom:
              secretKeyRef:
                key: ZYNC_AUTHENTICATION_TOKEN
                name: zync
          - name: CONFIG_INTERNAL_API_USER
            valueFrom:
              secretKeyRef:
                key: username
                name: backend-internal-api
          - name: CONFIG_INTERNAL_API_PASSWORD
            valueFrom:
              secretKeyRef:
                key: password
                name: backend-internal-api
          image: registry.redhat.io/3scale-amp2/system-rhel7@sha256:abe1c074e975b6bf6a1f527a1820671636c393517f2f850f7299c24ae88ba2ab
          imagePullPolicy: IfNotPresent
          livenessProbe:
            failureThreshold: 40
            initialDelaySeconds: 40
            periodSeconds: 10
            successThreshold: 1
            tcpSocket:
              port: master
            timeoutSeconds: 10
          name: system-master
          ports:
          - containerPort: 3002
            name: master
            protocol: TCP
          readinessProbe:
            failureThreshold: 10
            httpGet:
              httpHeaders:
              - name: X-Forwarded-Proto
                value: https
              path: /check.txt
              port: master
              scheme: HTTP
            initialDelaySeconds: 60
            periodSeconds: 30
            successThreshold: 1
            timeoutSeconds: 10
          resources:
            limits:
              cpu: "1"
              memory: 800Mi
            requests:
              cpu: 50m
              memory: 600Mi
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /opt/system/public/system
            name: system-storage
          - mountPath: /opt/system-extra-configs
            name: system-config
        - args:
          - env
          - TENANT_MODE=provider
          - PORT=3000
          - container-entrypoint
          - bundle
          - exec
          - unicorn
          - -c
          - config/unicorn.rb
          env:
          - name: AMP_RELEASE
            valueFrom:
              configMapKeyRef:
                key: AMP_RELEASE
                name: system-environment
          - name: APICAST_REGISTRY_URL
            valueFrom:
              configMapKeyRef:
                key: APICAST_REGISTRY_URL
                name: system-environment
          - name: FORCE_SSL
            valueFrom:
              configMapKeyRef:
                key: FORCE_SSL
                name: system-environment
          - name: PROVIDER_PLAN
            valueFrom:
              configMapKeyRef:
                key: PROVIDER_PLAN
                name: system-environment
          - name: RAILS_ENV
            valueFrom:
              configMapKeyRef:
                key: RAILS_ENV
                name: system-environment
          - name: RAILS_LOG_LEVEL
            valueFrom:
              configMapKeyRef:
                key: RAILS_LOG_LEVEL
                name: system-environment
          - name: RAILS_LOG_TO_STDOUT
            valueFrom:
              configMapKeyRef:
                key: RAILS_LOG_TO_STDOUT
                name: system-environment
          - name: SSL_CERT_DIR
            valueFrom:
              configMapKeyRef:
                key: SSL_CERT_DIR
                name: system-environment
          - name: THINKING_SPHINX_PORT
            valueFrom:
              configMapKeyRef:
                key: THINKING_SPHINX_PORT
                name: system-environment
          - name: THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE
            valueFrom:
              configMapKeyRef:
                key: THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE
                name: system-environment
          - name: THREESCALE_SUPERDOMAIN
            valueFrom:
              configMapKeyRef:
                key: THREESCALE_SUPERDOMAIN
                name: system-environment
          - name: DATABASE_URL
            valueFrom:
              secretKeyRef:
                key: URL
                name: system-database
          - name: MASTER_DOMAIN
            valueFrom:
              secretKeyRef:
                key: MASTER_DOMAIN
                name: system-seed
          - name: MASTER_USER
            valueFrom:
              secretKeyRef:
                key: MASTER_USER
                name: system-seed
          - name: MASTER_PASSWORD
            valueFrom:
              secretKeyRef:
                key: MASTER_PASSWORD
                name: system-seed
          - name: ADMIN_ACCESS_TOKEN
            valueFrom:
              secretKeyRef:
                key: ADMIN_ACCESS_TOKEN
                name: system-seed
          - name: USER_LOGIN
            valueFrom:
              secretKeyRef:
                key: ADMIN_USER
                name: system-seed
          - name: USER_PASSWORD
            valueFrom:
              secretKeyRef:
                key: ADMIN_PASSWORD
                name: system-seed
          - name: USER_EMAIL
            valueFrom:
              secretKeyRef:
                key: ADMIN_EMAIL
                name: system-seed
          - name: TENANT_NAME
            valueFrom:
              secretKeyRef:
                key: TENANT_NAME
                name: system-seed
          - name: THINKING_SPHINX_ADDRESS
            value: system-sphinx
          - name: THINKING_SPHINX_CONFIGURATION_FILE
            value: /tmp/sphinx.conf
          - name: EVENTS_SHARED_SECRET
            valueFrom:
              secretKeyRef:
                key: PASSWORD
                name: system-events-hook
          - name: RECAPTCHA_PUBLIC_KEY
            valueFrom:
              secretKeyRef:
                key: PUBLIC_KEY
                name: system-recaptcha
          - name: RECAPTCHA_PRIVATE_KEY
            valueFrom:
              secretKeyRef:
                key: PRIVATE_KEY
                name: system-recaptcha
          - name: SECRET_KEY_BASE
            valueFrom:
              secretKeyRef:
                key: SECRET_KEY_BASE
                name: system-app
          - name: MEMCACHE_SERVERS
            valueFrom:
              secretKeyRef:
                key: SERVERS
                name: system-memcache
          - name: REDIS_URL
            valueFrom:
              secretKeyRef:
                key: URL
                name: system-redis
          - name: MESSAGE_BUS_REDIS_URL
            valueFrom:
              secretKeyRef:
                key: MESSAGE_BUS_URL
                name: system-redis
          - name: REDIS_NAMESPACE
            valueFrom:
              secretKeyRef:
                key: NAMESPACE
                name: system-redis
          - name: MESSAGE_BUS_REDIS_NAMESPACE
            valueFrom:
              secretKeyRef:
                key: MESSAGE_BUS_NAMESPACE
                name: system-redis
          - name: REDIS_SENTINEL_HOSTS
            valueFrom:
              secretKeyRef:
                key: SENTINEL_HOSTS
                name: system-redis
          - name: REDIS_SENTINEL_ROLE
            valueFrom:
              secretKeyRef:
                key: SENTINEL_ROLE
                name: system-redis
          - name: MESSAGE_BUS_REDIS_SENTINEL_HOSTS
            valueFrom:
              secretKeyRef:
                key: MESSAGE_BUS_SENTINEL_HOSTS
                name: system-redis
          - name: MESSAGE_BUS_REDIS_SENTINEL_ROLE
            valueFrom:
              secretKeyRef:
                key: MESSAGE_BUS_SENTINEL_ROLE
                name: system-redis
          - name: BACKEND_REDIS_URL
            valueFrom:
              secretKeyRef:
                key: REDIS_STORAGE_URL
                name: backend-redis
          - name: BACKEND_REDIS_SENTINEL_HOSTS
            valueFrom:
              secretKeyRef:
                key: REDIS_STORAGE_SENTINEL_HOSTS
                name: backend-redis
          - name: BACKEND_REDIS_SENTINEL_ROLE
            valueFrom:
              secretKeyRef:
                key: REDIS_STORAGE_SENTINEL_ROLE
                name: backend-redis
          - name: APICAST_BACKEND_ROOT_ENDPOINT
            valueFrom:
              secretKeyRef:
                key: route_endpoint
                name: backend-listener
          - name: BACKEND_ROUTE
            valueFrom:
              secretKeyRef:
                key: route_endpoint
                name: backend-listener
          - name: SMTP_ADDRESS
            valueFrom:
              configMapKeyRef:
                key: address
                name: smtp
          - name: SMTP_USER_NAME
            valueFrom:
              configMapKeyRef:
                key: username
                name: smtp
          - name: SMTP_PASSWORD
            valueFrom:
              configMapKeyRef:
                key: password
                name: smtp
          - name: SMTP_DOMAIN
            valueFrom:
              configMapKeyRef:
                key: domain
                name: smtp
          - name: SMTP_PORT
            valueFrom:
              configMapKeyRef:
                key: port
                name: smtp
          - name: SMTP_AUTHENTICATION
            valueFrom:
              configMapKeyRef:
                key: authentication
                name: smtp
          - name: SMTP_OPENSSL_VERIFY_MODE
            valueFrom:
              configMapKeyRef:
                key: openssl.verify.mode
                name: smtp
          - name: APICAST_ACCESS_TOKEN
            valueFrom:
              secretKeyRef:
                key: ACCESS_TOKEN
                name: system-master-apicast
          - name: ZYNC_AUTHENTICATION_TOKEN
            valueFrom:
              secretKeyRef:
                key: ZYNC_AUTHENTICATION_TOKEN
                name: zync
          - name: CONFIG_INTERNAL_API_USER
            valueFrom:
              secretKeyRef:
                key: username
                name: backend-internal-api
          - name: CONFIG_INTERNAL_API_PASSWORD
            valueFrom:
              secretKeyRef:
                key: password
                name: backend-internal-api
          image: registry.redhat.io/3scale-amp2/system-rhel7@sha256:abe1c074e975b6bf6a1f527a1820671636c393517f2f850f7299c24ae88ba2ab
          imagePullPolicy: IfNotPresent
          livenessProbe:
            failureThreshold: 40
            initialDelaySeconds: 40
            periodSeconds: 10
            successThreshold: 1
            tcpSocket:
              port: provider
            timeoutSeconds: 10
          name: system-provider
          ports:
          - containerPort: 3000
            name: provider
            protocol: TCP
          readinessProbe:
            failureThreshold: 10
            httpGet:
              httpHeaders:
              - name: X-Forwarded-Proto
                value: https
              path: /check.txt
              port: provider
              scheme: HTTP
            initialDelaySeconds: 60
            periodSeconds: 30
            successThreshold: 1
            timeoutSeconds: 10
          resources:
            limits:
              cpu: "1"
              memory: 800Mi
            requests:
              cpu: 50m
              memory: 600Mi
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /opt/system/public/system
            name: system-storage
          - mountPath: /opt/system-extra-configs
            name: system-config
        - args:
          - env
          - PORT=3001
          - container-entrypoint
          - bundle
          - exec
          - unicorn
          - -c
          - config/unicorn.rb
          env:
          - name: AMP_RELEASE
            valueFrom:
              configMapKeyRef:
                key: AMP_RELEASE
                name: system-environment
          - name: APICAST_REGISTRY_URL
            valueFrom:
              configMapKeyRef:
                key: APICAST_REGISTRY_URL
                name: system-environment
          - name: FORCE_SSL
            valueFrom:
              configMapKeyRef:
                key: FORCE_SSL
                name: system-environment
          - name: PROVIDER_PLAN
            valueFrom:
              configMapKeyRef:
                key: PROVIDER_PLAN
                name: system-environment
          - name: RAILS_ENV
            valueFrom:
              configMapKeyRef:
                key: RAILS_ENV
                name: system-environment
          - name: RAILS_LOG_LEVEL
            valueFrom:
              configMapKeyRef:
                key: RAILS_LOG_LEVEL
                name: system-environment
          - name: RAILS_LOG_TO_STDOUT
            valueFrom:
              configMapKeyRef:
                key: RAILS_LOG_TO_STDOUT
                name: system-environment
          - name: SSL_CERT_DIR
            valueFrom:
              configMapKeyRef:
                key: SSL_CERT_DIR
                name: system-environment
          - name: THINKING_SPHINX_PORT
            valueFrom:
              configMapKeyRef:
                key: THINKING_SPHINX_PORT
                name: system-environment
          - name: THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE
            valueFrom:
              configMapKeyRef:
                key: THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE
                name: system-environment
          - name: THREESCALE_SUPERDOMAIN
            valueFrom:
              configMapKeyRef:
                key: THREESCALE_SUPERDOMAIN
                name: system-environment
          - name: DATABASE_URL
            valueFrom:
              secretKeyRef:
                key: URL
                name: system-database
          - name: MASTER_DOMAIN
            valueFrom:
              secretKeyRef:
                key: MASTER_DOMAIN
                name: system-seed
          - name: MASTER_USER
            valueFrom:
              secretKeyRef:
                key: MASTER_USER
                name: system-seed
          - name: MASTER_PASSWORD
            valueFrom:
              secretKeyRef:
                key: MASTER_PASSWORD
                name: system-seed
          - name: ADMIN_ACCESS_TOKEN
            valueFrom:
              secretKeyRef:
                key: ADMIN_ACCESS_TOKEN
                name: system-seed
          - name: USER_LOGIN
            valueFrom:
              secretKeyRef:
                key: ADMIN_USER
                name: system-seed
          - name: USER_PASSWORD
            valueFrom:
              secretKeyRef:
                key: ADMIN_PASSWORD
                name: system-seed
          - name: USER_EMAIL
            valueFrom:
              secretKeyRef:
                key: ADMIN_EMAIL
                name: system-seed
          - name: TENANT_NAME
            valueFrom:
              secretKeyRef:
                key: TENANT_NAME
                name: system-seed
          - name: THINKING_SPHINX_ADDRESS
            value: system-sphinx
          - name: THINKING_SPHINX_CONFIGURATION_FILE
            value: /tmp/sphinx.conf
          - name: EVENTS_SHARED_SECRET
            valueFrom:
              secretKeyRef:
                key: PASSWORD
                name: system-events-hook
          - name: RECAPTCHA_PUBLIC_KEY
            valueFrom:
              secretKeyRef:
                key: PUBLIC_KEY
                name: system-recaptcha
          - name: RECAPTCHA_PRIVATE_KEY
            valueFrom:
              secretKeyRef:
                key: PRIVATE_KEY
                name: system-recaptcha
          - name: SECRET_KEY_BASE
            valueFrom:
              secretKeyRef:
                key: SECRET_KEY_BASE
                name: system-app
          - name: MEMCACHE_SERVERS
            valueFrom:
              secretKeyRef:
                key: SERVERS
                name: system-memcache
          - name: REDIS_URL
            valueFrom:
              secretKeyRef:
                key: URL
                name: system-redis
          - name: MESSAGE_BUS_REDIS_URL
            valueFrom:
              secretKeyRef:
                key: MESSAGE_BUS_URL
                name: system-redis
          - name: REDIS_NAMESPACE
            valueFrom:
              secretKeyRef:
                key: NAMESPACE
                name: system-redis
          - name: MESSAGE_BUS_REDIS_NAMESPACE
            valueFrom:
              secretKeyRef:
                key: MESSAGE_BUS_NAMESPACE
                name: system-redis
          - name: REDIS_SENTINEL_HOSTS
            valueFrom:
              secretKeyRef:
                key: SENTINEL_HOSTS
                name: system-redis
          - name: REDIS_SENTINEL_ROLE
            valueFrom:
              secretKeyRef:
                key: SENTINEL_ROLE
                name: system-redis
          - name: MESSAGE_BUS_REDIS_SENTINEL_HOSTS
            valueFrom:
              secretKeyRef:
                key: MESSAGE_BUS_SENTINEL_HOSTS
                name: system-redis
          - name: MESSAGE_BUS_REDIS_SENTINEL_ROLE
            valueFrom:
              secretKeyRef:
                key: MESSAGE_BUS_SENTINEL_ROLE
                name: system-redis
          - name: BACKEND_REDIS_URL
            valueFrom:
              secretKeyRef:
                key: REDIS_STORAGE_URL
                name: backend-redis
          - name: BACKEND_REDIS_SENTINEL_HOSTS
            valueFrom:
              secretKeyRef:
                key: REDIS_STORAGE_SENTINEL_HOSTS
                name: backend-redis
          - name: BACKEND_REDIS_SENTINEL_ROLE
            valueFrom:
              secretKeyRef:
                key: REDIS_STORAGE_SENTINEL_ROLE
                name: backend-redis
          - name: APICAST_BACKEND_ROOT_ENDPOINT
            valueFrom:
              secretKeyRef:
                key: route_endpoint
                name: backend-listener
          - name: BACKEND_ROUTE
            valueFrom:
              secretKeyRef:
                key: route_endpoint
                name: backend-listener
          - name: SMTP_ADDRESS
            valueFrom:
              configMapKeyRef:
                key: address
                name: smtp
          - name: SMTP_USER_NAME
            valueFrom:
              configMapKeyRef:
                key: username
                name: smtp
          - name: SMTP_PASSWORD
            valueFrom:
              configMapKeyRef:
                key: password
                name: smtp
          - name: SMTP_DOMAIN
            valueFrom:
              configMapKeyRef:
                key: domain
                name: smtp
          - name: SMTP_PORT
            valueFrom:
              configMapKeyRef:
                key: port
                name: smtp
          - name: SMTP_AUTHENTICATION
            valueFrom:
              configMapKeyRef:
                key: authentication
                name: smtp
          - name: SMTP_OPENSSL_VERIFY_MODE
            valueFrom:
              configMapKeyRef:
                key: openssl.verify.mode
                name: smtp
          - name: APICAST_ACCESS_TOKEN
            valueFrom:
              secretKeyRef:
                key: ACCESS_TOKEN
                name: system-master-apicast
          - name: ZYNC_AUTHENTICATION_TOKEN
            valueFrom:
              secretKeyRef:
                key: ZYNC_AUTHENTICATION_TOKEN
                name: zync
          - name: CONFIG_INTERNAL_API_USER
            valueFrom:
              secretKeyRef:
                key: username
                name: backend-internal-api
          - name: CONFIG_INTERNAL_API_PASSWORD
            valueFrom:
              secretKeyRef:
                key: password
                name: backend-internal-api
          image: registry.redhat.io/3scale-amp2/system-rhel7@sha256:abe1c074e975b6bf6a1f527a1820671636c393517f2f850f7299c24ae88ba2ab
          imagePullPolicy: IfNotPresent
          livenessProbe:
            failureThreshold: 40
            initialDelaySeconds: 40
            periodSeconds: 10
            successThreshold: 1
            tcpSocket:
              port: developer
            timeoutSeconds: 10
          name: system-developer
          ports:
          - containerPort: 3001
            name: developer
            protocol: TCP
          readinessProbe:
            failureThreshold: 10
            httpGet:
              httpHeaders:
              - name: X-Forwarded-Proto
                value: https
              path: /check.txt
              port: developer
              scheme: HTTP
            initialDelaySeconds: 60
            periodSeconds: 30
            successThreshold: 1
            timeoutSeconds: 10
          resources:
            limits:
              cpu: "1"
              memory: 800Mi
            requests:
              cpu: 50m
              memory: 600Mi
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /opt/system/public/system
            name: system-storage
            readOnly: true
          - mountPath: /opt/system-extra-configs
            name: system-config
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: amp
        serviceAccountName: amp
        terminationGracePeriodSeconds: 30
        volumes:
        - name: system-storage
          persistentVolumeClaim:
            claimName: system-storage
        - configMap:
            defaultMode: 420
            items:
            - key: zync.yml
              path: zync.yml
            - key: rolling_updates.yml
              path: rolling_updates.yml
            - key: service_discovery.yml
              path: service_discovery.yml
            name: system
          name: system-config
  status:
    availableReplicas: 1
    fullyLabeledReplicas: 1
    observedGeneration: 2
    readyReplicas: 1
    replicas: 1
- apiVersion: v1
  kind: ReplicationController
  metadata:
    annotations:
      openshift.io/deployer-pod.completed-at: 2023-06-04 23:52:23 +0000 UTC
      openshift.io/deployer-pod.created-at: 2023-06-04 23:50:50 +0000 UTC
      openshift.io/deployer-pod.name: system-memcache-1-deploy
      openshift.io/deployment-config.latest-version: "1"
      openshift.io/deployment-config.name: system-memcache
      openshift.io/deployment.phase: Complete
      openshift.io/deployment.replicas: "1"
      openshift.io/deployment.status-reason: config change
      openshift.io/encoded-deployment-config: |
        {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"system-memcache","namespace":"3scale","uid":"90085355-6ec5-452d-8476-30f4926e07b3","resourceVersion":"20280058","generation":2,"creationTimestamp":"2023-06-04T23:50:41Z","labels":{"app":"3scale-api-management","migration.openshift.io/migrated-by-migmigration":"d260e821-c8d9-409f-9013-a81dd35264d4","migration.openshift.io/migrated-by-migplan":"49357516-407e-4d22-8a38-498daa6ef155","threescale_component":"system","threescale_component_element":"memcache","velero.io/backup-name":"migration-05da4-initial-s7jkt","velero.io/restore-name":"migration-05da4-final-h89cb"},"annotations":{"openshift.io/backup-registry-hostname":"docker-registry.default.svc:5000","openshift.io/backup-server-version":"1.11","openshift.io/generated-by":"OpenShiftNewApp","openshift.io/migration-registry":"172.30.138.125:5000","openshift.io/restore-registry-hostname":"image-registry.openshift-image-registry.svc:5000","openshift.io/restore-server-version":"1.23"},"managedFields":[{"manager":"velero-server","operation":"Update","apiVersion":"apps.openshift.io/v1","time":"2023-06-04T23:50:41Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:openshift.io/backup-registry-hostname":{},"f:openshift.io/backup-server-version":{},"f:openshift.io/generated-by":{},"f:openshift.io/migration-registry":{},"f:openshift.io/restore-registry-hostname":{},"f:openshift.io/restore-server-version":{}},"f:labels":{".":{},"f:app":{},"f:migration.openshift.io/migrated-by-migmigration":{},"f:migration.openshift.io/migrated-by-migplan":{},"f:threescale_component":{},"f:threescale_component_element":{},"f:velero.io/backup-name":{},"f:velero.io/restore-name":{}}},"f:spec":{"f:replicas":{},"f:revisionHistoryLimit":{},"f:selector":{".":{},"f:deploymentConfig":{}},"f:strategy":{"f:activeDeadlineSeconds":{},"f:rollingParams":{".":{},"f:intervalSeconds":{},"f:maxSurge":{},"f:maxUnavailable":{},"f:timeoutSeconds":{},"f:updatePeriodSeconds":{}},"f:type":{}},"f:template":{".":{},"f:metadata":{".":{},"f:annotations":{".":{},"f:openshift.io/generated-by":{}},"f:creationTimestamp":{},"f:labels":{".":{},"f:app":{},"f:deploymentConfig":{},"f:threescale_component":{},"f:threescale_component_element":{}}},"f:spec":{".":{},"f:containers":{".":{},"k:{\"name\":\"memcache\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":11211,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{}}}}}},{"manager":"openshift-controller-manager","operation":"Update","apiVersion":"apps.openshift.io/v1","time":"2023-06-04T23:50:50Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:triggers":{}}}},{"manager":"openshift-controller-manager","operation":"Update","apiVersion":"apps.openshift.io/v1","time":"2023-06-04T23:50:50Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{".":{},"k:{\"type\":\"Available\"}":{".":{},"f:lastTransitionTime":{},"f:lastUpdateTime":{},"f:message":{},"f:status":{},"f:type":{}}},"f:details":{".":{},"f:causes":{},"f:message":{}},"f:latestVersion":{},"f:observedGeneration":{}}},"subresource":"status"}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":600,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["memcache"],"from":{"kind":"ImageStreamTag","namespace":"3scale","name":"system-memcached:latest"},"lastTriggeredImage":"registry.redhat.io/3scale-amp2/memcached-rhel7@sha256:9c897d68eebb3a704756b9ddf32358c5b99786055aa1b94cc79be4b9cd3d3f03"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"system-memcache"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"system-memcache","threescale_component":"system","threescale_component_element":"memcache"},"annotations":{"openshift.io/generated-by":"OpenShiftNewApp"}},"spec":{"containers":[{"name":"memcache","image":"registry.redhat.io/3scale-amp2/memcached-rhel7@sha256:9c897d68eebb3a704756b9ddf32358c5b99786055aa1b94cc79be4b9cd3d3f03","command":["memcached","-m","64"],"ports":[{"containerPort":11211,"protocol":"TCP"}],"resources":{"limits":{"cpu":"250m","memory":"96Mi"},"requests":{"cpu":"50m","memory":"64Mi"}},"livenessProbe":{"tcpSocket":{"port":11211},"initialDelaySeconds":10,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"exec":{"command":["sh","-c","echo version | nc $HOSTNAME 11211 | grep VERSION"]},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":1,"observedGeneration":1,"replicas":0,"updatedReplicas":0,"availableReplicas":0,"unavailableReplicas":0,"details":{"message":"config change","causes":[{"type":"ConfigChange"}]},"conditions":[{"type":"Available","status":"False","lastUpdateTime":"2023-06-04T23:50:41Z","lastTransitionTime":"2023-06-04T23:50:41Z","message":"Deployment config does not have minimum availability."}]}}
    creationTimestamp: "2023-06-04T23:50:50Z"
    generation: 2
    labels:
      app: 3scale-api-management
      migration.openshift.io/migrated-by-migmigration: d260e821-c8d9-409f-9013-a81dd35264d4
      migration.openshift.io/migrated-by-migplan: 49357516-407e-4d22-8a38-498daa6ef155
      openshift.io/deployment-config.name: system-memcache
      threescale_component: system
      threescale_component_element: memcache
      velero.io/backup-name: migration-05da4-initial-s7jkt
      velero.io/restore-name: migration-05da4-final-h89cb
    name: system-memcache-1
    namespace: 3scale
    ownerReferences:
    - apiVersion: apps.openshift.io/v1
      blockOwnerDeletion: true
      controller: true
      kind: DeploymentConfig
      name: system-memcache
      uid: 90085355-6ec5-452d-8476-30f4926e07b3
    resourceVersion: "428583579"
    uid: 71a2dc90-e312-4804-8b92-86cf28f594b2
  spec:
    replicas: 1
    selector:
      deployment: system-memcache-1
      deploymentConfig: system-memcache
      deploymentconfig: system-memcache
    template:
      metadata:
        annotations:
          openshift.io/deployment-config.latest-version: "1"
          openshift.io/deployment-config.name: system-memcache
          openshift.io/deployment.name: system-memcache-1
          openshift.io/generated-by: OpenShiftNewApp
        creationTimestamp: null
        labels:
          app: 3scale-api-management
          deployment: system-memcache-1
          deploymentConfig: system-memcache
          deploymentconfig: system-memcache
          threescale_component: system
          threescale_component_element: memcache
      spec:
        containers:
        - command:
          - memcached
          - -m
          - "64"
          image: registry.redhat.io/3scale-amp2/memcached-rhel7@sha256:9c897d68eebb3a704756b9ddf32358c5b99786055aa1b94cc79be4b9cd3d3f03
          imagePullPolicy: IfNotPresent
          livenessProbe:
            failureThreshold: 3
            initialDelaySeconds: 10
            periodSeconds: 10
            successThreshold: 1
            tcpSocket:
              port: 11211
            timeoutSeconds: 1
          name: memcache
          ports:
          - containerPort: 11211
            protocol: TCP
          readinessProbe:
            exec:
              command:
              - sh
              - -c
              - echo version | nc $HOSTNAME 11211 | grep VERSION
            failureThreshold: 3
            initialDelaySeconds: 10
            periodSeconds: 30
            successThreshold: 1
            timeoutSeconds: 5
          resources:
            limits:
              cpu: 250m
              memory: 96Mi
            requests:
              cpu: 50m
              memory: 64Mi
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: amp
        serviceAccountName: amp
        terminationGracePeriodSeconds: 30
  status:
    availableReplicas: 1
    fullyLabeledReplicas: 1
    observedGeneration: 2
    readyReplicas: 1
    replicas: 1
- apiVersion: v1
  kind: ReplicationController
  metadata:
    annotations:
      openshift.io/deployer-pod.completed-at: 2023-06-04 23:52:48 +0000 UTC
      openshift.io/deployer-pod.created-at: 2023-06-04 23:50:46 +0000 UTC
      openshift.io/deployer-pod.name: system-mysql-1-deploy
      openshift.io/deployment-config.latest-version: "1"
      openshift.io/deployment-config.name: system-mysql
      openshift.io/deployment.phase: Complete
      openshift.io/deployment.replicas: "1"
      openshift.io/deployment.status-reason: config change
      openshift.io/encoded-deployment-config: |
        {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"system-mysql","namespace":"3scale","uid":"fa1871dd-2084-495a-a884-8a1e1e42a244","resourceVersion":"20279697","generation":2,"creationTimestamp":"2023-06-04T23:50:41Z","labels":{"app":"3scale-api-management","migration.openshift.io/migrated-by-migmigration":"d260e821-c8d9-409f-9013-a81dd35264d4","migration.openshift.io/migrated-by-migplan":"49357516-407e-4d22-8a38-498daa6ef155","threescale_component":"system","threescale_component_element":"mysql","velero.io/backup-name":"migration-05da4-initial-s7jkt","velero.io/restore-name":"migration-05da4-final-h89cb"},"annotations":{"openshift.io/backup-registry-hostname":"docker-registry.default.svc:5000","openshift.io/backup-server-version":"1.11","openshift.io/generated-by":"OpenShiftNewApp","openshift.io/migration-registry":"172.30.138.125:5000","openshift.io/restore-registry-hostname":"image-registry.openshift-image-registry.svc:5000","openshift.io/restore-server-version":"1.23"},"managedFields":[{"manager":"velero-server","operation":"Update","apiVersion":"apps.openshift.io/v1","time":"2023-06-04T23:50:41Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:openshift.io/backup-registry-hostname":{},"f:openshift.io/backup-server-version":{},"f:openshift.io/generated-by":{},"f:openshift.io/migration-registry":{},"f:openshift.io/restore-registry-hostname":{},"f:openshift.io/restore-server-version":{}},"f:labels":{".":{},"f:app":{},"f:migration.openshift.io/migrated-by-migmigration":{},"f:migration.openshift.io/migrated-by-migplan":{},"f:threescale_component":{},"f:threescale_component_element":{},"f:velero.io/backup-name":{},"f:velero.io/restore-name":{}}},"f:spec":{"f:replicas":{},"f:revisionHistoryLimit":{},"f:selector":{".":{},"f:deploymentConfig":{}},"f:strategy":{"f:activeDeadlineSeconds":{},"f:recreateParams":{".":{},"f:timeoutSeconds":{}},"f:type":{}},"f:template":{".":{},"f:metadata":{".":{},"f:annotations":{".":{},"f:openshift.io/generated-by":{}},"f:creationTimestamp":{},"f:labels":{".":{},"f:app":{},"f:deploymentConfig":{},"f:threescale_component":{},"f:threescale_component_element":{}}},"f:spec":{".":{},"f:containers":{".":{},"k:{\"name\":\"system-mysql\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"MYSQL_DATABASE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MYSQL_DEFAULTS_FILE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MYSQL_LOWER_CASE_TABLE_NAMES\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MYSQL_PASSWORD\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"MYSQL_ROOT_PASSWORD\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MYSQL_USER\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}}},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":3306,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/etc/my-extra\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/my-extra.d\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/mysql/data\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:dnsPolicy":{},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"mysql-extra-conf\"}":{".":{},"f:configMap":{".":{},"f:defaultMode":{},"f:name":{}},"f:name":{}},"k:{\"name\":\"mysql-main-conf\"}":{".":{},"f:configMap":{".":{},"f:defaultMode":{},"f:name":{}},"f:name":{}},"k:{\"name\":\"mysql-storage\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}}}}}}}},{"manager":"openshift-controller-manager","operation":"Update","apiVersion":"apps.openshift.io/v1","time":"2023-06-04T23:50:46Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:triggers":{}}}},{"manager":"openshift-controller-manager","operation":"Update","apiVersion":"apps.openshift.io/v1","time":"2023-06-04T23:50:46Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{".":{},"k:{\"type\":\"Available\"}":{".":{},"f:lastTransitionTime":{},"f:lastUpdateTime":{},"f:message":{},"f:status":{},"f:type":{}}},"f:details":{".":{},"f:causes":{},"f:message":{}},"f:latestVersion":{},"f:observedGeneration":{}}},"subresource":"status"}]},"spec":{"strategy":{"type":"Recreate","recreateParams":{"timeoutSeconds":600},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["system-mysql"],"from":{"kind":"ImageStreamTag","namespace":"3scale","name":"system-mysql:latest"},"lastTriggeredImage":"registry.redhat.io/rhscl/mysql-57-rhel7@sha256:9a781abe7581cc141e14a7e404ec34125b3e89c008b14f4e7b41e094fd3049fe"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"system-mysql"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"system-mysql","threescale_component":"system","threescale_component_element":"mysql"},"annotations":{"openshift.io/generated-by":"OpenShiftNewApp"}},"spec":{"volumes":[{"name":"mysql-storage","persistentVolumeClaim":{"claimName":"mysql-storage"}},{"name":"mysql-extra-conf","configMap":{"name":"mysql-extra-conf","defaultMode":420}},{"name":"mysql-main-conf","configMap":{"name":"mysql-main-conf","defaultMode":420}}],"containers":[{"name":"system-mysql","image":"registry.redhat.io/rhscl/mysql-57-rhel7@sha256:9a781abe7581cc141e14a7e404ec34125b3e89c008b14f4e7b41e094fd3049fe","ports":[{"containerPort":3306,"protocol":"TCP"}],"env":[{"name":"MYSQL_USER","valueFrom":{"secretKeyRef":{"name":"system-database","key":"DB_USER"}}},{"name":"MYSQL_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-database","key":"DB_PASSWORD"}}},{"name":"MYSQL_DATABASE","value":"system"},{"name":"MYSQL_ROOT_PASSWORD","value":"jmba5xl1"},{"name":"MYSQL_LOWER_CASE_TABLE_NAMES","value":"1"},{"name":"MYSQL_DEFAULTS_FILE","value":"/etc/my-extra/my.cnf"}],"resources":{"limits":{"memory":"2Gi"},"requests":{"cpu":"250m","memory":"512Mi"}},"volumeMounts":[{"name":"mysql-storage","mountPath":"/var/lib/mysql/data"},{"name":"mysql-extra-conf","mountPath":"/etc/my-extra.d"},{"name":"mysql-main-conf","mountPath":"/etc/my-extra"}],"livenessProbe":{"tcpSocket":{"port":3306},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"exec":{"command":["/bin/sh","-i","-c","MYSQL_PWD=\"$MYSQL_PASSWORD\" mysql -h 127.0.0.1 -u $MYSQL_USER -D $MYSQL_DATABASE -e 'SELECT 1'"]},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":1,"observedGeneration":1,"replicas":0,"updatedReplicas":0,"availableReplicas":0,"unavailableReplicas":0,"details":{"message":"config change","causes":[{"type":"ConfigChange"}]},"conditions":[{"type":"Available","status":"False","lastUpdateTime":"2023-06-04T23:50:41Z","lastTransitionTime":"2023-06-04T23:50:41Z","message":"Deployment config does not have minimum availability."}]}}
    creationTimestamp: "2023-06-04T23:50:46Z"
    generation: 2
    labels:
      app: 3scale-api-management
      migration.openshift.io/migrated-by-migmigration: d260e821-c8d9-409f-9013-a81dd35264d4
      migration.openshift.io/migrated-by-migplan: 49357516-407e-4d22-8a38-498daa6ef155
      openshift.io/deployment-config.name: system-mysql
      threescale_component: system
      threescale_component_element: mysql
      velero.io/backup-name: migration-05da4-initial-s7jkt
      velero.io/restore-name: migration-05da4-final-h89cb
    name: system-mysql-1
    namespace: 3scale
    ownerReferences:
    - apiVersion: apps.openshift.io/v1
      blockOwnerDeletion: true
      controller: true
      kind: DeploymentConfig
      name: system-mysql
      uid: fa1871dd-2084-495a-a884-8a1e1e42a244
    resourceVersion: "428583659"
    uid: a1f721dd-dd75-4372-bace-087baf54b780
  spec:
    replicas: 1
    selector:
      deployment: system-mysql-1
      deploymentConfig: system-mysql
      deploymentconfig: system-mysql
    template:
      metadata:
        annotations:
          openshift.io/deployment-config.latest-version: "1"
          openshift.io/deployment-config.name: system-mysql
          openshift.io/deployment.name: system-mysql-1
          openshift.io/generated-by: OpenShiftNewApp
        creationTimestamp: null
        labels:
          app: 3scale-api-management
          deployment: system-mysql-1
          deploymentConfig: system-mysql
          deploymentconfig: system-mysql
          threescale_component: system
          threescale_component_element: mysql
      spec:
        containers:
        - env:
          - name: MYSQL_USER
            valueFrom:
              secretKeyRef:
                key: DB_USER
                name: system-database
          - name: MYSQL_PASSWORD
            valueFrom:
              secretKeyRef:
                key: DB_PASSWORD
                name: system-database
          - name: MYSQL_DATABASE
            value: system
          - name: MYSQL_ROOT_PASSWORD
            value: jmba5xl1
          - name: MYSQL_LOWER_CASE_TABLE_NAMES
            value: "1"
          - name: MYSQL_DEFAULTS_FILE
            value: /etc/my-extra/my.cnf
          image: registry.redhat.io/rhscl/mysql-57-rhel7@sha256:9a781abe7581cc141e14a7e404ec34125b3e89c008b14f4e7b41e094fd3049fe
          imagePullPolicy: IfNotPresent
          livenessProbe:
            failureThreshold: 3
            initialDelaySeconds: 30
            periodSeconds: 10
            successThreshold: 1
            tcpSocket:
              port: 3306
            timeoutSeconds: 1
          name: system-mysql
          ports:
          - containerPort: 3306
            protocol: TCP
          readinessProbe:
            exec:
              command:
              - /bin/sh
              - -i
              - -c
              - MYSQL_PWD="$MYSQL_PASSWORD" mysql -h 127.0.0.1 -u $MYSQL_USER -D $MYSQL_DATABASE
                -e 'SELECT 1'
            failureThreshold: 3
            initialDelaySeconds: 10
            periodSeconds: 30
            successThreshold: 1
            timeoutSeconds: 5
          resources:
            limits:
              memory: 2Gi
            requests:
              cpu: 250m
              memory: 512Mi
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /var/lib/mysql/data
            name: mysql-storage
          - mountPath: /etc/my-extra.d
            name: mysql-extra-conf
          - mountPath: /etc/my-extra
            name: mysql-main-conf
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: amp
        serviceAccountName: amp
        terminationGracePeriodSeconds: 30
        volumes:
        - name: mysql-storage
          persistentVolumeClaim:
            claimName: mysql-storage
        - configMap:
            defaultMode: 420
            name: mysql-extra-conf
          name: mysql-extra-conf
        - configMap:
            defaultMode: 420
            name: mysql-main-conf
          name: mysql-main-conf
  status:
    availableReplicas: 1
    fullyLabeledReplicas: 1
    observedGeneration: 2
    readyReplicas: 1
    replicas: 1
- apiVersion: v1
  kind: ReplicationController
  metadata:
    annotations:
      openshift.io/deployer-pod.completed-at: 2023-06-04 23:53:05 +0000 UTC
      openshift.io/deployer-pod.created-at: 2023-06-04 23:50:46 +0000 UTC
      openshift.io/deployer-pod.name: system-redis-1-deploy
      openshift.io/deployment-config.latest-version: "1"
      openshift.io/deployment-config.name: system-redis
      openshift.io/deployment.phase: Complete
      openshift.io/deployment.replicas: "1"
      openshift.io/deployment.status-reason: config change
      openshift.io/encoded-deployment-config: |
        {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"system-redis","namespace":"3scale","uid":"42e1450d-44f4-4651-abfe-957023ba3f9a","resourceVersion":"20279659","generation":2,"creationTimestamp":"2023-06-04T23:50:42Z","labels":{"app":"3scale-api-management","migration.openshift.io/migrated-by-migmigration":"d260e821-c8d9-409f-9013-a81dd35264d4","migration.openshift.io/migrated-by-migplan":"49357516-407e-4d22-8a38-498daa6ef155","threescale_component":"system","threescale_component_element":"redis","velero.io/backup-name":"migration-05da4-initial-s7jkt","velero.io/restore-name":"migration-05da4-final-h89cb"},"annotations":{"openshift.io/backup-registry-hostname":"docker-registry.default.svc:5000","openshift.io/backup-server-version":"1.11","openshift.io/generated-by":"OpenShiftNewApp","openshift.io/migration-registry":"172.30.138.125:5000","openshift.io/restore-registry-hostname":"image-registry.openshift-image-registry.svc:5000","openshift.io/restore-server-version":"1.23"},"managedFields":[{"manager":"velero-server","operation":"Update","apiVersion":"apps.openshift.io/v1","time":"2023-06-04T23:50:42Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:openshift.io/backup-registry-hostname":{},"f:openshift.io/backup-server-version":{},"f:openshift.io/generated-by":{},"f:openshift.io/migration-registry":{},"f:openshift.io/restore-registry-hostname":{},"f:openshift.io/restore-server-version":{}},"f:labels":{".":{},"f:app":{},"f:migration.openshift.io/migrated-by-migmigration":{},"f:migration.openshift.io/migrated-by-migplan":{},"f:threescale_component":{},"f:threescale_component_element":{},"f:velero.io/backup-name":{},"f:velero.io/restore-name":{}}},"f:spec":{"f:replicas":{},"f:revisionHistoryLimit":{},"f:selector":{".":{},"f:deploymentConfig":{}},"f:strategy":{"f:activeDeadlineSeconds":{},"f:recreateParams":{".":{},"f:timeoutSeconds":{}},"f:type":{}},"f:template":{".":{},"f:metadata":{".":{},"f:annotations":{".":{},"f:openshift.io/generated-by":{}},"f:creationTimestamp":{},"f:labels":{".":{},"f:app":{},"f:deploymentConfig":{},"f:threescale_component":{},"f:threescale_component_element":{}}},"f:spec":{".":{},"f:containers":{".":{},"k:{\"name\":\"system-redis\"}":{".":{},"f:args":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:name":{},"f:readinessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/etc/redis.d/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/redis/data\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:dnsPolicy":{},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"redis-config\"}":{".":{},"f:configMap":{".":{},"f:defaultMode":{},"f:items":{},"f:name":{}},"f:name":{}},"k:{\"name\":\"system-redis-storage\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}}}}}}}},{"manager":"openshift-controller-manager","operation":"Update","apiVersion":"apps.openshift.io/v1","time":"2023-06-04T23:50:46Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:triggers":{}}}},{"manager":"openshift-controller-manager","operation":"Update","apiVersion":"apps.openshift.io/v1","time":"2023-06-04T23:50:46Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{".":{},"k:{\"type\":\"Available\"}":{".":{},"f:lastTransitionTime":{},"f:lastUpdateTime":{},"f:message":{},"f:status":{},"f:type":{}}},"f:details":{".":{},"f:causes":{},"f:message":{}},"f:latestVersion":{},"f:observedGeneration":{}}},"subresource":"status"}]},"spec":{"strategy":{"type":"Recreate","recreateParams":{"timeoutSeconds":600},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["system-redis"],"from":{"kind":"ImageStreamTag","namespace":"3scale","name":"system-redis:latest"},"lastTriggeredImage":"registry.redhat.io/rhscl/redis-32-rhel7@sha256:a9bdf52384a222635efc0284db47d12fbde8c3d0fcb66517ba8eefad1d4e9dc9"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"system-redis"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"system-redis","threescale_component":"system","threescale_component_element":"redis"},"annotations":{"openshift.io/generated-by":"OpenShiftNewApp"}},"spec":{"volumes":[{"name":"system-redis-storage","persistentVolumeClaim":{"claimName":"system-redis-storage"}},{"name":"redis-config","configMap":{"name":"redis-config","items":[{"key":"redis.conf","path":"redis.conf"}],"defaultMode":420}}],"containers":[{"name":"system-redis","image":"registry.redhat.io/rhscl/redis-32-rhel7@sha256:a9bdf52384a222635efc0284db47d12fbde8c3d0fcb66517ba8eefad1d4e9dc9","command":["/opt/rh/rh-redis32/root/usr/bin/redis-server"],"args":["/etc/redis.d/redis.conf","--daemonize","no"],"resources":{"limits":{"cpu":"500m","memory":"32Gi"},"requests":{"cpu":"150m","memory":"256Mi"}},"volumeMounts":[{"name":"system-redis-storage","mountPath":"/var/lib/redis/data"},{"name":"redis-config","mountPath":"/etc/redis.d/"}],"livenessProbe":{"tcpSocket":{"port":6379},"initialDelaySeconds":10,"timeoutSeconds":1,"periodSeconds":5,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"exec":{"command":["container-entrypoint","bash","-c","redis-cli set liveness-probe \"`date`\" | grep OK"]},"initialDelaySeconds":30,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":1,"observedGeneration":1,"replicas":0,"updatedReplicas":0,"availableReplicas":0,"unavailableReplicas":0,"details":{"message":"config change","causes":[{"type":"ConfigChange"}]},"conditions":[{"type":"Available","status":"False","lastUpdateTime":"2023-06-04T23:50:42Z","lastTransitionTime":"2023-06-04T23:50:42Z","message":"Deployment config does not have minimum availability."}]}}
    creationTimestamp: "2023-06-04T23:50:46Z"
    generation: 2
    labels:
      app: 3scale-api-management
      migration.openshift.io/migrated-by-migmigration: d260e821-c8d9-409f-9013-a81dd35264d4
      migration.openshift.io/migrated-by-migplan: 49357516-407e-4d22-8a38-498daa6ef155
      openshift.io/deployment-config.name: system-redis
      threescale_component: system
      threescale_component_element: redis
      velero.io/backup-name: migration-05da4-initial-s7jkt
      velero.io/restore-name: migration-05da4-final-h89cb
    name: system-redis-1
    namespace: 3scale
    ownerReferences:
    - apiVersion: apps.openshift.io/v1
      blockOwnerDeletion: true
      controller: true
      kind: DeploymentConfig
      name: system-redis
      uid: 42e1450d-44f4-4651-abfe-957023ba3f9a
    resourceVersion: "428583518"
    uid: 816cc8a1-f827-4588-90f0-b7d865f50f16
  spec:
    replicas: 1
    selector:
      deployment: system-redis-1
      deploymentConfig: system-redis
      deploymentconfig: system-redis
    template:
      metadata:
        annotations:
          openshift.io/deployment-config.latest-version: "1"
          openshift.io/deployment-config.name: system-redis
          openshift.io/deployment.name: system-redis-1
          openshift.io/generated-by: OpenShiftNewApp
        creationTimestamp: null
        labels:
          app: 3scale-api-management
          deployment: system-redis-1
          deploymentConfig: system-redis
          deploymentconfig: system-redis
          threescale_component: system
          threescale_component_element: redis
      spec:
        containers:
        - args:
          - /etc/redis.d/redis.conf
          - --daemonize
          - "no"
          command:
          - /opt/rh/rh-redis32/root/usr/bin/redis-server
          image: registry.redhat.io/rhscl/redis-32-rhel7@sha256:a9bdf52384a222635efc0284db47d12fbde8c3d0fcb66517ba8eefad1d4e9dc9
          imagePullPolicy: IfNotPresent
          livenessProbe:
            failureThreshold: 3
            initialDelaySeconds: 10
            periodSeconds: 5
            successThreshold: 1
            tcpSocket:
              port: 6379
            timeoutSeconds: 1
          name: system-redis
          readinessProbe:
            exec:
              command:
              - container-entrypoint
              - bash
              - -c
              - redis-cli set liveness-probe "`date`" | grep OK
            failureThreshold: 3
            initialDelaySeconds: 30
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 5
          resources:
            limits:
              cpu: 500m
              memory: 32Gi
            requests:
              cpu: 150m
              memory: 256Mi
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /var/lib/redis/data
            name: system-redis-storage
          - mountPath: /etc/redis.d/
            name: redis-config
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: amp
        serviceAccountName: amp
        terminationGracePeriodSeconds: 30
        volumes:
        - name: system-redis-storage
          persistentVolumeClaim:
            claimName: system-redis-storage
        - configMap:
            defaultMode: 420
            items:
            - key: redis.conf
              path: redis.conf
            name: redis-config
          name: redis-config
  status:
    availableReplicas: 1
    fullyLabeledReplicas: 1
    observedGeneration: 2
    readyReplicas: 1
    replicas: 1
- apiVersion: v1
  kind: ReplicationController
  metadata:
    annotations:
      openshift.io/deployer-pod.completed-at: 2023-06-04 23:55:32 +0000 UTC
      openshift.io/deployer-pod.created-at: 2023-06-04 23:50:50 +0000 UTC
      openshift.io/deployer-pod.name: system-sidekiq-1-deploy
      openshift.io/deployment-config.latest-version: "1"
      openshift.io/deployment-config.name: system-sidekiq
      openshift.io/deployment.phase: Complete
      openshift.io/deployment.replicas: "1"
      openshift.io/deployment.status-reason: config change
      openshift.io/encoded-deployment-config: |
        {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"system-sidekiq","namespace":"3scale","uid":"5c83e029-d9b2-4790-8fad-6420eb5c4386","resourceVersion":"20280003","generation":2,"creationTimestamp":"2023-06-04T23:50:42Z","labels":{"app":"3scale-api-management","migration.openshift.io/migrated-by-migmigration":"d260e821-c8d9-409f-9013-a81dd35264d4","migration.openshift.io/migrated-by-migplan":"49357516-407e-4d22-8a38-498daa6ef155","threescale_component":"system","threescale_component_element":"sidekiq","velero.io/backup-name":"migration-05da4-initial-s7jkt","velero.io/restore-name":"migration-05da4-final-h89cb"},"annotations":{"openshift.io/backup-registry-hostname":"docker-registry.default.svc:5000","openshift.io/backup-server-version":"1.11","openshift.io/generated-by":"OpenShiftNewApp","openshift.io/migration-registry":"172.30.138.125:5000","openshift.io/restore-registry-hostname":"image-registry.openshift-image-registry.svc:5000","openshift.io/restore-server-version":"1.23"},"managedFields":[{"manager":"velero-server","operation":"Update","apiVersion":"apps.openshift.io/v1","time":"2023-06-04T23:50:42Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:openshift.io/backup-registry-hostname":{},"f:openshift.io/backup-server-version":{},"f:openshift.io/generated-by":{},"f:openshift.io/migration-registry":{},"f:openshift.io/restore-registry-hostname":{},"f:openshift.io/restore-server-version":{}},"f:labels":{".":{},"f:app":{},"f:migration.openshift.io/migrated-by-migmigration":{},"f:migration.openshift.io/migrated-by-migplan":{},"f:threescale_component":{},"f:threescale_component_element":{},"f:velero.io/backup-name":{},"f:velero.io/restore-name":{}}},"f:spec":{"f:replicas":{},"f:revisionHistoryLimit":{},"f:selector":{".":{},"f:deploymentConfig":{}},"f:strategy":{"f:activeDeadlineSeconds":{},"f:rollingParams":{".":{},"f:intervalSeconds":{},"f:maxSurge":{},"f:maxUnavailable":{},"f:timeoutSeconds":{},"f:updatePeriodSeconds":{}},"f:type":{}},"f:template":{".":{},"f:metadata":{".":{},"f:annotations":{".":{},"f:openshift.io/generated-by":{}},"f:creationTimestamp":{},"f:labels":{".":{},"f:app":{},"f:deploymentConfig":{},"f:threescale_component":{},"f:threescale_component_element":{}}},"f:spec":{".":{},"f:containers":{".":{},"k:{\"name\":\"system-sidekiq\"}":{".":{},"f:args":{},"f:env":{".":{},"k:{\"name\":\"ADMIN_ACCESS_TOKEN\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"AMP_RELEASE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"APICAST_ACCESS_TOKEN\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"APICAST_BACKEND_ROOT_ENDPOINT\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"APICAST_REGISTRY_URL\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"BACKEND_REDIS_SENTINEL_HOSTS\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"BACKEND_REDIS_SENTINEL_ROLE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"BACKEND_REDIS_URL\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"BACKEND_ROUTE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"CONFIG_INTERNAL_API_PASSWORD\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"CONFIG_INTERNAL_API_USER\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"DATABASE_URL\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"EVENTS_SHARED_SECRET\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"FORCE_SSL\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"MASTER_DOMAIN\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"MASTER_PASSWORD\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"MASTER_USER\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"MEMCACHE_SERVERS\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"MESSAGE_BUS_REDIS_NAMESPACE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"MESSAGE_BUS_REDIS_SENTINEL_HOSTS\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"MESSAGE_BUS_REDIS_SENTINEL_ROLE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"MESSAGE_BUS_REDIS_URL\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"PROVIDER_PLAN\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"RAILS_ENV\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"RAILS_LOG_LEVEL\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"RAILS_LOG_TO_STDOUT\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"RECAPTCHA_PRIVATE_KEY\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"RECAPTCHA_PUBLIC_KEY\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"REDIS_NAMESPACE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"REDIS_SENTINEL_HOSTS\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"REDIS_SENTINEL_ROLE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"REDIS_URL\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"SECRET_KEY_BASE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"SMTP_ADDRESS\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"SMTP_AUTHENTICATION\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"SMTP_DOMAIN\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"SMTP_OPENSSL_VERIFY_MODE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"SMTP_PASSWORD\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"SMTP_PORT\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"SMTP_USER_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"SSL_CERT_DIR\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"TENANT_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"THINKING_SPHINX_ADDRESS\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"THINKING_SPHINX_CONFIGURATION_FILE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"THINKING_SPHINX_PORT\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"THREESCALE_SUPERDOMAIN\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"USER_EMAIL\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"USER_LOGIN\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"USER_PASSWORD\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"ZYNC_AUTHENTICATION_TOKEN\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/opt/system-extra-configs\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/opt/system/public/system\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:dnsPolicy":{},"f:initContainers":{".":{},"k:{\"name\":\"check-svc\"}":{".":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"MESSAGE_BUS_REDIS_NAMESPACE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"MESSAGE_BUS_REDIS_SENTINEL_HOSTS\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"MESSAGE_BUS_REDIS_SENTINEL_ROLE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"MESSAGE_BUS_REDIS_URL\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"REDIS_NAMESPACE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"REDIS_SENTINEL_HOSTS\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"REDIS_SENTINEL_ROLE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"REDIS_URL\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"SLEEP_SECONDS\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"system-config\"}":{".":{},"f:configMap":{".":{},"f:defaultMode":{},"f:items":{},"f:name":{}},"f:name":{}},"k:{\"name\":\"system-storage\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"system-tmp\"}":{".":{},"f:emptyDir":{".":{},"f:medium":{}},"f:name":{}}}}}}}},{"manager":"openshift-controller-manager","operation":"Update","apiVersion":"apps.openshift.io/v1","time":"2023-06-04T23:50:50Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:triggers":{}}}},{"manager":"openshift-controller-manager","operation":"Update","apiVersion":"apps.openshift.io/v1","time":"2023-06-04T23:50:50Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{".":{},"k:{\"type\":\"Available\"}":{".":{},"f:lastTransitionTime":{},"f:lastUpdateTime":{},"f:message":{},"f:status":{},"f:type":{}}},"f:details":{".":{},"f:causes":{},"f:message":{}},"f:latestVersion":{},"f:observedGeneration":{}}},"subresource":"status"}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":1200,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["check-svc","system-sidekiq"],"from":{"kind":"ImageStreamTag","namespace":"3scale","name":"amp-system:latest"},"lastTriggeredImage":"registry.redhat.io/3scale-amp2/system-rhel7@sha256:abe1c074e975b6bf6a1f527a1820671636c393517f2f850f7299c24ae88ba2ab"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"system-sidekiq"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"system-sidekiq","threescale_component":"system","threescale_component_element":"sidekiq"},"annotations":{"openshift.io/generated-by":"OpenShiftNewApp"}},"spec":{"volumes":[{"name":"system-tmp","emptyDir":{"medium":"Memory"}},{"name":"system-storage","persistentVolumeClaim":{"claimName":"system-storage"}},{"name":"system-config","configMap":{"name":"system","items":[{"key":"zync.yml","path":"zync.yml"},{"key":"rolling_updates.yml","path":"rolling_updates.yml"},{"key":"service_discovery.yml","path":"service_discovery.yml"}],"defaultMode":420}}],"initContainers":[{"name":"check-svc","image":"registry.redhat.io/3scale-amp2/system-rhel7@sha256:abe1c074e975b6bf6a1f527a1820671636c393517f2f850f7299c24ae88ba2ab","command":["bash","-c","bundle exec sh -c \"until rake boot:redis \u0026\u0026 curl --output /dev/null --silent --fail --head http://system-master:3000/status; do sleep $SLEEP_SECONDS; done\""],"env":[{"name":"REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"URL"}}},{"name":"MESSAGE_BUS_REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_URL"}}},{"name":"REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"NAMESPACE"}}},{"name":"MESSAGE_BUS_REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_NAMESPACE"}}},{"name":"REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_HOSTS"}}},{"name":"REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_ROLE"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_HOSTS"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_ROLE"}}},{"name":"SLEEP_SECONDS","value":"1"}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"system-sidekiq","image":"registry.redhat.io/3scale-amp2/system-rhel7@sha256:abe1c074e975b6bf6a1f527a1820671636c393517f2f850f7299c24ae88ba2ab","args":["rake","sidekiq:worker","RAILS_MAX_THREADS=25"],"env":[{"name":"AMP_RELEASE","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"AMP_RELEASE"}}},{"name":"APICAST_REGISTRY_URL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"APICAST_REGISTRY_URL"}}},{"name":"FORCE_SSL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"FORCE_SSL"}}},{"name":"PROVIDER_PLAN","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"PROVIDER_PLAN"}}},{"name":"RAILS_ENV","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_ENV"}}},{"name":"RAILS_LOG_LEVEL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_LOG_LEVEL"}}},{"name":"RAILS_LOG_TO_STDOUT","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_LOG_TO_STDOUT"}}},{"name":"SSL_CERT_DIR","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"SSL_CERT_DIR"}}},{"name":"THINKING_SPHINX_PORT","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THINKING_SPHINX_PORT"}}},{"name":"THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE"}}},{"name":"THREESCALE_SUPERDOMAIN","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THREESCALE_SUPERDOMAIN"}}},{"name":"DATABASE_URL","valueFrom":{"secretKeyRef":{"name":"system-database","key":"URL"}}},{"name":"MASTER_DOMAIN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_DOMAIN"}}},{"name":"MASTER_USER","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_USER"}}},{"name":"MASTER_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_PASSWORD"}}},{"name":"ADMIN_ACCESS_TOKEN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_ACCESS_TOKEN"}}},{"name":"USER_LOGIN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_USER"}}},{"name":"USER_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_PASSWORD"}}},{"name":"USER_EMAIL","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_EMAIL"}}},{"name":"TENANT_NAME","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"TENANT_NAME"}}},{"name":"THINKING_SPHINX_ADDRESS","value":"system-sphinx"},{"name":"THINKING_SPHINX_CONFIGURATION_FILE","value":"/tmp/sphinx.conf"},{"name":"EVENTS_SHARED_SECRET","valueFrom":{"secretKeyRef":{"name":"system-events-hook","key":"PASSWORD"}}},{"name":"RECAPTCHA_PUBLIC_KEY","valueFrom":{"secretKeyRef":{"name":"system-recaptcha","key":"PUBLIC_KEY"}}},{"name":"RECAPTCHA_PRIVATE_KEY","valueFrom":{"secretKeyRef":{"name":"system-recaptcha","key":"PRIVATE_KEY"}}},{"name":"SECRET_KEY_BASE","valueFrom":{"secretKeyRef":{"name":"system-app","key":"SECRET_KEY_BASE"}}},{"name":"MEMCACHE_SERVERS","valueFrom":{"secretKeyRef":{"name":"system-memcache","key":"SERVERS"}}},{"name":"REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"URL"}}},{"name":"MESSAGE_BUS_REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_URL"}}},{"name":"REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"NAMESPACE"}}},{"name":"MESSAGE_BUS_REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_NAMESPACE"}}},{"name":"REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_HOSTS"}}},{"name":"REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_ROLE"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_HOSTS"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_ROLE"}}},{"name":"BACKEND_REDIS_URL","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_URL"}}},{"name":"BACKEND_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_HOSTS"}}},{"name":"BACKEND_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_ROLE"}}},{"name":"APICAST_BACKEND_ROOT_ENDPOINT","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"route_endpoint"}}},{"name":"BACKEND_ROUTE","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"route_endpoint"}}},{"name":"SMTP_ADDRESS","valueFrom":{"configMapKeyRef":{"name":"smtp","key":"address"}}},{"name":"SMTP_USER_NAME","valueFrom":{"configMapKeyRef":{"name":"smtp","key":"username"}}},{"name":"SMTP_PASSWORD","valueFrom":{"configMapKeyRef":{"name":"smtp","key":"password"}}},{"name":"SMTP_DOMAIN","valueFrom":{"configMapKeyRef":{"name":"smtp","key":"domain"}}},{"name":"SMTP_PORT","valueFrom":{"configMapKeyRef":{"name":"smtp","key":"port"}}},{"name":"SMTP_AUTHENTICATION","valueFrom":{"configMapKeyRef":{"name":"smtp","key":"authentication"}}},{"name":"SMTP_OPENSSL_VERIFY_MODE","valueFrom":{"configMapKeyRef":{"name":"smtp","key":"openssl.verify.mode"}}},{"name":"APICAST_ACCESS_TOKEN","valueFrom":{"secretKeyRef":{"name":"system-master-apicast","key":"ACCESS_TOKEN"}}},{"name":"ZYNC_AUTHENTICATION_TOKEN","valueFrom":{"secretKeyRef":{"name":"zync","key":"ZYNC_AUTHENTICATION_TOKEN"}}},{"name":"CONFIG_INTERNAL_API_USER","valueFrom":{"secretKeyRef":{"name":"backend-internal-api","key":"username"}}},{"name":"CONFIG_INTERNAL_API_PASSWORD","valueFrom":{"secretKeyRef":{"name":"backend-internal-api","key":"password"}}}],"resources":{"limits":{"cpu":"1","memory":"2Gi"},"requests":{"cpu":"100m","memory":"500Mi"}},"volumeMounts":[{"name":"system-storage","mountPath":"/opt/system/public/system"},{"name":"system-tmp","mountPath":"/tmp"},{"name":"system-config","mountPath":"/opt/system-extra-configs"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":1,"observedGeneration":1,"replicas":0,"updatedReplicas":0,"availableReplicas":0,"unavailableReplicas":0,"details":{"message":"config change","causes":[{"type":"ConfigChange"}]},"conditions":[{"type":"Available","status":"False","lastUpdateTime":"2023-06-04T23:50:42Z","lastTransitionTime":"2023-06-04T23:50:42Z","message":"Deployment config does not have minimum availability."}]}}
    creationTimestamp: "2023-06-04T23:50:50Z"
    generation: 2
    labels:
      app: 3scale-api-management
      migration.openshift.io/migrated-by-migmigration: d260e821-c8d9-409f-9013-a81dd35264d4
      migration.openshift.io/migrated-by-migplan: 49357516-407e-4d22-8a38-498daa6ef155
      openshift.io/deployment-config.name: system-sidekiq
      threescale_component: system
      threescale_component_element: sidekiq
      velero.io/backup-name: migration-05da4-initial-s7jkt
      velero.io/restore-name: migration-05da4-final-h89cb
    name: system-sidekiq-1
    namespace: 3scale
    ownerReferences:
    - apiVersion: apps.openshift.io/v1
      blockOwnerDeletion: true
      controller: true
      kind: DeploymentConfig
      name: system-sidekiq
      uid: 5c83e029-d9b2-4790-8fad-6420eb5c4386
    resourceVersion: "494378105"
    uid: 038d346e-2dd4-4008-89ad-1319d6c5c83d
  spec:
    replicas: 1
    selector:
      deployment: system-sidekiq-1
      deploymentConfig: system-sidekiq
      deploymentconfig: system-sidekiq
    template:
      metadata:
        annotations:
          openshift.io/deployment-config.latest-version: "1"
          openshift.io/deployment-config.name: system-sidekiq
          openshift.io/deployment.name: system-sidekiq-1
          openshift.io/generated-by: OpenShiftNewApp
        creationTimestamp: null
        labels:
          app: 3scale-api-management
          deployment: system-sidekiq-1
          deploymentConfig: system-sidekiq
          deploymentconfig: system-sidekiq
          threescale_component: system
          threescale_component_element: sidekiq
      spec:
        containers:
        - args:
          - rake
          - sidekiq:worker
          - RAILS_MAX_THREADS=25
          env:
          - name: AMP_RELEASE
            valueFrom:
              configMapKeyRef:
                key: AMP_RELEASE
                name: system-environment
          - name: APICAST_REGISTRY_URL
            valueFrom:
              configMapKeyRef:
                key: APICAST_REGISTRY_URL
                name: system-environment
          - name: FORCE_SSL
            valueFrom:
              configMapKeyRef:
                key: FORCE_SSL
                name: system-environment
          - name: PROVIDER_PLAN
            valueFrom:
              configMapKeyRef:
                key: PROVIDER_PLAN
                name: system-environment
          - name: RAILS_ENV
            valueFrom:
              configMapKeyRef:
                key: RAILS_ENV
                name: system-environment
          - name: RAILS_LOG_LEVEL
            valueFrom:
              configMapKeyRef:
                key: RAILS_LOG_LEVEL
                name: system-environment
          - name: RAILS_LOG_TO_STDOUT
            valueFrom:
              configMapKeyRef:
                key: RAILS_LOG_TO_STDOUT
                name: system-environment
          - name: SSL_CERT_DIR
            valueFrom:
              configMapKeyRef:
                key: SSL_CERT_DIR
                name: system-environment
          - name: THINKING_SPHINX_PORT
            valueFrom:
              configMapKeyRef:
                key: THINKING_SPHINX_PORT
                name: system-environment
          - name: THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE
            valueFrom:
              configMapKeyRef:
                key: THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE
                name: system-environment
          - name: THREESCALE_SUPERDOMAIN
            valueFrom:
              configMapKeyRef:
                key: THREESCALE_SUPERDOMAIN
                name: system-environment
          - name: DATABASE_URL
            valueFrom:
              secretKeyRef:
                key: URL
                name: system-database
          - name: MASTER_DOMAIN
            valueFrom:
              secretKeyRef:
                key: MASTER_DOMAIN
                name: system-seed
          - name: MASTER_USER
            valueFrom:
              secretKeyRef:
                key: MASTER_USER
                name: system-seed
          - name: MASTER_PASSWORD
            valueFrom:
              secretKeyRef:
                key: MASTER_PASSWORD
                name: system-seed
          - name: ADMIN_ACCESS_TOKEN
            valueFrom:
              secretKeyRef:
                key: ADMIN_ACCESS_TOKEN
                name: system-seed
          - name: USER_LOGIN
            valueFrom:
              secretKeyRef:
                key: ADMIN_USER
                name: system-seed
          - name: USER_PASSWORD
            valueFrom:
              secretKeyRef:
                key: ADMIN_PASSWORD
                name: system-seed
          - name: USER_EMAIL
            valueFrom:
              secretKeyRef:
                key: ADMIN_EMAIL
                name: system-seed
          - name: TENANT_NAME
            valueFrom:
              secretKeyRef:
                key: TENANT_NAME
                name: system-seed
          - name: THINKING_SPHINX_ADDRESS
            value: system-sphinx
          - name: THINKING_SPHINX_CONFIGURATION_FILE
            value: /tmp/sphinx.conf
          - name: EVENTS_SHARED_SECRET
            valueFrom:
              secretKeyRef:
                key: PASSWORD
                name: system-events-hook
          - name: RECAPTCHA_PUBLIC_KEY
            valueFrom:
              secretKeyRef:
                key: PUBLIC_KEY
                name: system-recaptcha
          - name: RECAPTCHA_PRIVATE_KEY
            valueFrom:
              secretKeyRef:
                key: PRIVATE_KEY
                name: system-recaptcha
          - name: SECRET_KEY_BASE
            valueFrom:
              secretKeyRef:
                key: SECRET_KEY_BASE
                name: system-app
          - name: MEMCACHE_SERVERS
            valueFrom:
              secretKeyRef:
                key: SERVERS
                name: system-memcache
          - name: REDIS_URL
            valueFrom:
              secretKeyRef:
                key: URL
                name: system-redis
          - name: MESSAGE_BUS_REDIS_URL
            valueFrom:
              secretKeyRef:
                key: MESSAGE_BUS_URL
                name: system-redis
          - name: REDIS_NAMESPACE
            valueFrom:
              secretKeyRef:
                key: NAMESPACE
                name: system-redis
          - name: MESSAGE_BUS_REDIS_NAMESPACE
            valueFrom:
              secretKeyRef:
                key: MESSAGE_BUS_NAMESPACE
                name: system-redis
          - name: REDIS_SENTINEL_HOSTS
            valueFrom:
              secretKeyRef:
                key: SENTINEL_HOSTS
                name: system-redis
          - name: REDIS_SENTINEL_ROLE
            valueFrom:
              secretKeyRef:
                key: SENTINEL_ROLE
                name: system-redis
          - name: MESSAGE_BUS_REDIS_SENTINEL_HOSTS
            valueFrom:
              secretKeyRef:
                key: MESSAGE_BUS_SENTINEL_HOSTS
                name: system-redis
          - name: MESSAGE_BUS_REDIS_SENTINEL_ROLE
            valueFrom:
              secretKeyRef:
                key: MESSAGE_BUS_SENTINEL_ROLE
                name: system-redis
          - name: BACKEND_REDIS_URL
            valueFrom:
              secretKeyRef:
                key: REDIS_STORAGE_URL
                name: backend-redis
          - name: BACKEND_REDIS_SENTINEL_HOSTS
            valueFrom:
              secretKeyRef:
                key: REDIS_STORAGE_SENTINEL_HOSTS
                name: backend-redis
          - name: BACKEND_REDIS_SENTINEL_ROLE
            valueFrom:
              secretKeyRef:
                key: REDIS_STORAGE_SENTINEL_ROLE
                name: backend-redis
          - name: APICAST_BACKEND_ROOT_ENDPOINT
            valueFrom:
              secretKeyRef:
                key: route_endpoint
                name: backend-listener
          - name: BACKEND_ROUTE
            valueFrom:
              secretKeyRef:
                key: route_endpoint
                name: backend-listener
          - name: SMTP_ADDRESS
            valueFrom:
              configMapKeyRef:
                key: address
                name: smtp
          - name: SMTP_USER_NAME
            valueFrom:
              configMapKeyRef:
                key: username
                name: smtp
          - name: SMTP_PASSWORD
            valueFrom:
              configMapKeyRef:
                key: password
                name: smtp
          - name: SMTP_DOMAIN
            valueFrom:
              configMapKeyRef:
                key: domain
                name: smtp
          - name: SMTP_PORT
            valueFrom:
              configMapKeyRef:
                key: port
                name: smtp
          - name: SMTP_AUTHENTICATION
            valueFrom:
              configMapKeyRef:
                key: authentication
                name: smtp
          - name: SMTP_OPENSSL_VERIFY_MODE
            valueFrom:
              configMapKeyRef:
                key: openssl.verify.mode
                name: smtp
          - name: APICAST_ACCESS_TOKEN
            valueFrom:
              secretKeyRef:
                key: ACCESS_TOKEN
                name: system-master-apicast
          - name: ZYNC_AUTHENTICATION_TOKEN
            valueFrom:
              secretKeyRef:
                key: ZYNC_AUTHENTICATION_TOKEN
                name: zync
          - name: CONFIG_INTERNAL_API_USER
            valueFrom:
              secretKeyRef:
                key: username
                name: backend-internal-api
          - name: CONFIG_INTERNAL_API_PASSWORD
            valueFrom:
              secretKeyRef:
                key: password
                name: backend-internal-api
          image: registry.redhat.io/3scale-amp2/system-rhel7@sha256:abe1c074e975b6bf6a1f527a1820671636c393517f2f850f7299c24ae88ba2ab
          imagePullPolicy: IfNotPresent
          name: system-sidekiq
          resources:
            limits:
              cpu: "1"
              memory: 2Gi
            requests:
              cpu: 100m
              memory: 500Mi
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /opt/system/public/system
            name: system-storage
          - mountPath: /tmp
            name: system-tmp
          - mountPath: /opt/system-extra-configs
            name: system-config
        dnsPolicy: ClusterFirst
        initContainers:
        - command:
          - bash
          - -c
          - bundle exec sh -c "until rake boot:redis && curl --output /dev/null --silent
            --fail --head http://system-master:3000/status; do sleep $SLEEP_SECONDS;
            done"
          env:
          - name: REDIS_URL
            valueFrom:
              secretKeyRef:
                key: URL
                name: system-redis
          - name: MESSAGE_BUS_REDIS_URL
            valueFrom:
              secretKeyRef:
                key: MESSAGE_BUS_URL
                name: system-redis
          - name: REDIS_NAMESPACE
            valueFrom:
              secretKeyRef:
                key: NAMESPACE
                name: system-redis
          - name: MESSAGE_BUS_REDIS_NAMESPACE
            valueFrom:
              secretKeyRef:
                key: MESSAGE_BUS_NAMESPACE
                name: system-redis
          - name: REDIS_SENTINEL_HOSTS
            valueFrom:
              secretKeyRef:
                key: SENTINEL_HOSTS
                name: system-redis
          - name: REDIS_SENTINEL_ROLE
            valueFrom:
              secretKeyRef:
                key: SENTINEL_ROLE
                name: system-redis
          - name: MESSAGE_BUS_REDIS_SENTINEL_HOSTS
            valueFrom:
              secretKeyRef:
                key: MESSAGE_BUS_SENTINEL_HOSTS
                name: system-redis
          - name: MESSAGE_BUS_REDIS_SENTINEL_ROLE
            valueFrom:
              secretKeyRef:
                key: MESSAGE_BUS_SENTINEL_ROLE
                name: system-redis
          - name: SLEEP_SECONDS
            value: "1"
          image: registry.redhat.io/3scale-amp2/system-rhel7@sha256:abe1c074e975b6bf6a1f527a1820671636c393517f2f850f7299c24ae88ba2ab
          imagePullPolicy: Always
          name: check-svc
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: amp
        serviceAccountName: amp
        terminationGracePeriodSeconds: 30
        volumes:
        - emptyDir:
            medium: Memory
          name: system-tmp
        - name: system-storage
          persistentVolumeClaim:
            claimName: system-storage
        - configMap:
            defaultMode: 420
            items:
            - key: zync.yml
              path: zync.yml
            - key: rolling_updates.yml
              path: rolling_updates.yml
            - key: service_discovery.yml
              path: service_discovery.yml
            name: system
          name: system-config
  status:
    availableReplicas: 1
    fullyLabeledReplicas: 1
    observedGeneration: 2
    readyReplicas: 1
    replicas: 1
- apiVersion: v1
  kind: ReplicationController
  metadata:
    annotations:
      openshift.io/deployer-pod.completed-at: 2023-06-04 23:54:46 +0000 UTC
      openshift.io/deployer-pod.created-at: 2023-06-04 23:50:50 +0000 UTC
      openshift.io/deployer-pod.name: system-sphinx-1-deploy
      openshift.io/deployment-config.latest-version: "1"
      openshift.io/deployment-config.name: system-sphinx
      openshift.io/deployment.phase: Complete
      openshift.io/deployment.replicas: "1"
      openshift.io/deployment.status-reason: config change
      openshift.io/encoded-deployment-config: |
        {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"system-sphinx","namespace":"3scale","uid":"62dc7041-e7b1-43f6-8341-f719e6351319","resourceVersion":"20279998","generation":2,"creationTimestamp":"2023-06-04T23:50:42Z","labels":{"app":"3scale-api-management","migration.openshift.io/migrated-by-migmigration":"d260e821-c8d9-409f-9013-a81dd35264d4","migration.openshift.io/migrated-by-migplan":"49357516-407e-4d22-8a38-498daa6ef155","threescale_component":"system","threescale_component_element":"sphinx","velero.io/backup-name":"migration-05da4-initial-s7jkt","velero.io/restore-name":"migration-05da4-final-h89cb"},"annotations":{"openshift.io/backup-registry-hostname":"docker-registry.default.svc:5000","openshift.io/backup-server-version":"1.11","openshift.io/generated-by":"OpenShiftNewApp","openshift.io/migration-registry":"172.30.138.125:5000","openshift.io/restore-registry-hostname":"image-registry.openshift-image-registry.svc:5000","openshift.io/restore-server-version":"1.23"},"managedFields":[{"manager":"velero-server","operation":"Update","apiVersion":"apps.openshift.io/v1","time":"2023-06-04T23:50:42Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:openshift.io/backup-registry-hostname":{},"f:openshift.io/backup-server-version":{},"f:openshift.io/generated-by":{},"f:openshift.io/migration-registry":{},"f:openshift.io/restore-registry-hostname":{},"f:openshift.io/restore-server-version":{}},"f:labels":{".":{},"f:app":{},"f:migration.openshift.io/migrated-by-migmigration":{},"f:migration.openshift.io/migrated-by-migplan":{},"f:threescale_component":{},"f:threescale_component_element":{},"f:velero.io/backup-name":{},"f:velero.io/restore-name":{}}},"f:spec":{"f:replicas":{},"f:revisionHistoryLimit":{},"f:selector":{".":{},"f:deploymentConfig":{}},"f:strategy":{"f:activeDeadlineSeconds":{},"f:rollingParams":{".":{},"f:intervalSeconds":{},"f:maxSurge":{},"f:maxUnavailable":{},"f:timeoutSeconds":{},"f:updatePeriodSeconds":{}},"f:type":{}},"f:template":{".":{},"f:metadata":{".":{},"f:annotations":{".":{},"f:openshift.io/generated-by":{}},"f:creationTimestamp":{},"f:labels":{".":{},"f:app":{},"f:deploymentConfig":{},"f:threescale_component":{},"f:threescale_component_element":{}}},"f:spec":{".":{},"f:containers":{".":{},"k:{\"name\":\"system-sphinx\"}":{".":{},"f:args":{},"f:env":{".":{},"k:{\"name\":\"DATABASE_URL\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"DELTA_INDEX_INTERVAL\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"FULL_REINDEX_INTERVAL\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MESSAGE_BUS_REDIS_NAMESPACE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"MESSAGE_BUS_REDIS_SENTINEL_HOSTS\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"MESSAGE_BUS_REDIS_SENTINEL_ROLE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"MESSAGE_BUS_REDIS_URL\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"RAILS_ENV\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"REDIS_NAMESPACE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"REDIS_SENTINEL_HOSTS\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"REDIS_SENTINEL_ROLE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"REDIS_URL\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"THINKING_SPHINX_ADDRESS\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"THINKING_SPHINX_CONFIGURATION_FILE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"THINKING_SPHINX_PID_FILE\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/opt/system/db/sphinx\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:dnsPolicy":{},"f:initContainers":{".":{},"k:{\"name\":\"system-master-svc\"}":{".":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"SLEEP_SECONDS\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"system-sphinx-database\"}":{".":{},"f:emptyDir":{},"f:name":{}}}}}}}},{"manager":"openshift-controller-manager","operation":"Update","apiVersion":"apps.openshift.io/v1","time":"2023-06-04T23:50:50Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:triggers":{}}}},{"manager":"openshift-controller-manager","operation":"Update","apiVersion":"apps.openshift.io/v1","time":"2023-06-04T23:50:50Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{".":{},"k:{\"type\":\"Available\"}":{".":{},"f:lastTransitionTime":{},"f:lastUpdateTime":{},"f:message":{},"f:status":{},"f:type":{}}},"f:details":{".":{},"f:causes":{},"f:message":{}},"f:latestVersion":{},"f:observedGeneration":{}}},"subresource":"status"}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":1200,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["system-master-svc","system-sphinx"],"from":{"kind":"ImageStreamTag","namespace":"3scale","name":"amp-system:latest"},"lastTriggeredImage":"registry.redhat.io/3scale-amp2/system-rhel7@sha256:abe1c074e975b6bf6a1f527a1820671636c393517f2f850f7299c24ae88ba2ab"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"system-sphinx"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"system-sphinx","threescale_component":"system","threescale_component_element":"sphinx"},"annotations":{"openshift.io/generated-by":"OpenShiftNewApp"}},"spec":{"volumes":[{"name":"system-sphinx-database","emptyDir":{}}],"initContainers":[{"name":"system-master-svc","image":"registry.redhat.io/3scale-amp2/system-rhel7@sha256:abe1c074e975b6bf6a1f527a1820671636c393517f2f850f7299c24ae88ba2ab","command":["sh","-c","until $(curl --output /dev/null --silent --fail --head http://system-master:3000/status); do sleep $SLEEP_SECONDS; done"],"env":[{"name":"SLEEP_SECONDS","value":"1"}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"system-sphinx","image":"registry.redhat.io/3scale-amp2/system-rhel7@sha256:abe1c074e975b6bf6a1f527a1820671636c393517f2f850f7299c24ae88ba2ab","args":["rake","openshift:thinking_sphinx:start"],"env":[{"name":"RAILS_ENV","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_ENV"}}},{"name":"DATABASE_URL","valueFrom":{"secretKeyRef":{"name":"system-database","key":"URL"}}},{"name":"THINKING_SPHINX_ADDRESS","value":"0.0.0.0"},{"name":"THINKING_SPHINX_CONFIGURATION_FILE","value":"db/sphinx/production.conf"},{"name":"THINKING_SPHINX_PID_FILE","value":"db/sphinx/searchd.pid"},{"name":"DELTA_INDEX_INTERVAL","value":"5"},{"name":"FULL_REINDEX_INTERVAL","value":"60"},{"name":"REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"URL"}}},{"name":"MESSAGE_BUS_REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_URL"}}},{"name":"REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"NAMESPACE"}}},{"name":"MESSAGE_BUS_REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_NAMESPACE"}}},{"name":"REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_HOSTS"}}},{"name":"REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_ROLE"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_HOSTS"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_ROLE"}}}],"resources":{"limits":{"cpu":"1","memory":"512Mi"},"requests":{"cpu":"80m","memory":"250Mi"}},"volumeMounts":[{"name":"system-sphinx-database","mountPath":"/opt/system/db/sphinx"}],"livenessProbe":{"tcpSocket":{"port":9306},"initialDelaySeconds":60,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":1,"observedGeneration":1,"replicas":0,"updatedReplicas":0,"availableReplicas":0,"unavailableReplicas":0,"details":{"message":"config change","causes":[{"type":"ConfigChange"}]},"conditions":[{"type":"Available","status":"False","lastUpdateTime":"2023-06-04T23:50:42Z","lastTransitionTime":"2023-06-04T23:50:42Z","message":"Deployment config does not have minimum availability."}]}}
    creationTimestamp: "2023-06-04T23:50:50Z"
    generation: 2
    labels:
      app: 3scale-api-management
      migration.openshift.io/migrated-by-migmigration: d260e821-c8d9-409f-9013-a81dd35264d4
      migration.openshift.io/migrated-by-migplan: 49357516-407e-4d22-8a38-498daa6ef155
      openshift.io/deployment-config.name: system-sphinx
      threescale_component: system
      threescale_component_element: sphinx
      velero.io/backup-name: migration-05da4-initial-s7jkt
      velero.io/restore-name: migration-05da4-final-h89cb
    name: system-sphinx-1
    namespace: 3scale
    ownerReferences:
    - apiVersion: apps.openshift.io/v1
      blockOwnerDeletion: true
      controller: true
      kind: DeploymentConfig
      name: system-sphinx
      uid: 62dc7041-e7b1-43f6-8341-f719e6351319
    resourceVersion: "428583548"
    uid: e68bba66-e7c1-4928-bf08-806b7443bdbd
  spec:
    replicas: 1
    selector:
      deployment: system-sphinx-1
      deploymentConfig: system-sphinx
      deploymentconfig: system-sphinx
    template:
      metadata:
        annotations:
          openshift.io/deployment-config.latest-version: "1"
          openshift.io/deployment-config.name: system-sphinx
          openshift.io/deployment.name: system-sphinx-1
          openshift.io/generated-by: OpenShiftNewApp
        creationTimestamp: null
        labels:
          app: 3scale-api-management
          deployment: system-sphinx-1
          deploymentConfig: system-sphinx
          deploymentconfig: system-sphinx
          threescale_component: system
          threescale_component_element: sphinx
      spec:
        containers:
        - args:
          - rake
          - openshift:thinking_sphinx:start
          env:
          - name: RAILS_ENV
            valueFrom:
              configMapKeyRef:
                key: RAILS_ENV
                name: system-environment
          - name: DATABASE_URL
            valueFrom:
              secretKeyRef:
                key: URL
                name: system-database
          - name: THINKING_SPHINX_ADDRESS
            value: 0.0.0.0
          - name: THINKING_SPHINX_CONFIGURATION_FILE
            value: db/sphinx/production.conf
          - name: THINKING_SPHINX_PID_FILE
            value: db/sphinx/searchd.pid
          - name: DELTA_INDEX_INTERVAL
            value: "5"
          - name: FULL_REINDEX_INTERVAL
            value: "60"
          - name: REDIS_URL
            valueFrom:
              secretKeyRef:
                key: URL
                name: system-redis
          - name: MESSAGE_BUS_REDIS_URL
            valueFrom:
              secretKeyRef:
                key: MESSAGE_BUS_URL
                name: system-redis
          - name: REDIS_NAMESPACE
            valueFrom:
              secretKeyRef:
                key: NAMESPACE
                name: system-redis
          - name: MESSAGE_BUS_REDIS_NAMESPACE
            valueFrom:
              secretKeyRef:
                key: MESSAGE_BUS_NAMESPACE
                name: system-redis
          - name: REDIS_SENTINEL_HOSTS
            valueFrom:
              secretKeyRef:
                key: SENTINEL_HOSTS
                name: system-redis
          - name: REDIS_SENTINEL_ROLE
            valueFrom:
              secretKeyRef:
                key: SENTINEL_ROLE
                name: system-redis
          - name: MESSAGE_BUS_REDIS_SENTINEL_HOSTS
            valueFrom:
              secretKeyRef:
                key: MESSAGE_BUS_SENTINEL_HOSTS
                name: system-redis
          - name: MESSAGE_BUS_REDIS_SENTINEL_ROLE
            valueFrom:
              secretKeyRef:
                key: MESSAGE_BUS_SENTINEL_ROLE
                name: system-redis
          image: registry.redhat.io/3scale-amp2/system-rhel7@sha256:abe1c074e975b6bf6a1f527a1820671636c393517f2f850f7299c24ae88ba2ab
          imagePullPolicy: IfNotPresent
          livenessProbe:
            failureThreshold: 3
            initialDelaySeconds: 60
            periodSeconds: 10
            successThreshold: 1
            tcpSocket:
              port: 9306
            timeoutSeconds: 1
          name: system-sphinx
          resources:
            limits:
              cpu: "1"
              memory: 512Mi
            requests:
              cpu: 80m
              memory: 250Mi
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /opt/system/db/sphinx
            name: system-sphinx-database
        dnsPolicy: ClusterFirst
        initContainers:
        - command:
          - sh
          - -c
          - until $(curl --output /dev/null --silent --fail --head http://system-master:3000/status);
            do sleep $SLEEP_SECONDS; done
          env:
          - name: SLEEP_SECONDS
            value: "1"
          image: registry.redhat.io/3scale-amp2/system-rhel7@sha256:abe1c074e975b6bf6a1f527a1820671636c393517f2f850f7299c24ae88ba2ab
          imagePullPolicy: Always
          name: system-master-svc
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: amp
        serviceAccountName: amp
        terminationGracePeriodSeconds: 30
        volumes:
        - emptyDir: {}
          name: system-sphinx-database
  status:
    availableReplicas: 1
    fullyLabeledReplicas: 1
    observedGeneration: 2
    readyReplicas: 1
    replicas: 1
- apiVersion: v1
  kind: ReplicationController
  metadata:
    annotations:
      openshift.io/deployer-pod.completed-at: 2023-06-04 23:53:52 +0000 UTC
      openshift.io/deployer-pod.created-at: 2023-06-04 23:50:48 +0000 UTC
      openshift.io/deployer-pod.name: zync-1-deploy
      openshift.io/deployment-config.latest-version: "1"
      openshift.io/deployment-config.name: zync
      openshift.io/deployment.phase: Complete
      openshift.io/deployment.replicas: "1"
      openshift.io/deployment.status-reason: config change
      openshift.io/encoded-deployment-config: |
        {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"zync","namespace":"3scale","uid":"58c64a81-fa37-43b7-aa70-9c03754f7cd1","resourceVersion":"20279837","generation":2,"creationTimestamp":"2023-06-04T23:50:42Z","labels":{"app":"3scale-api-management","migration.openshift.io/migrated-by-migmigration":"d260e821-c8d9-409f-9013-a81dd35264d4","migration.openshift.io/migrated-by-migplan":"49357516-407e-4d22-8a38-498daa6ef155","threescale_component":"zync","velero.io/backup-name":"migration-05da4-initial-s7jkt","velero.io/restore-name":"migration-05da4-final-h89cb"},"annotations":{"openshift.io/backup-registry-hostname":"docker-registry.default.svc:5000","openshift.io/backup-server-version":"1.11","openshift.io/generated-by":"OpenShiftNewApp","openshift.io/migration-registry":"172.30.138.125:5000","openshift.io/restore-registry-hostname":"image-registry.openshift-image-registry.svc:5000","openshift.io/restore-server-version":"1.23","prometheus.io/port":"9393","prometheus.io/scrape":"true"},"managedFields":[{"manager":"velero-server","operation":"Update","apiVersion":"apps.openshift.io/v1","time":"2023-06-04T23:50:42Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:openshift.io/backup-registry-hostname":{},"f:openshift.io/backup-server-version":{},"f:openshift.io/generated-by":{},"f:openshift.io/migration-registry":{},"f:openshift.io/restore-registry-hostname":{},"f:openshift.io/restore-server-version":{},"f:prometheus.io/port":{},"f:prometheus.io/scrape":{}},"f:labels":{".":{},"f:app":{},"f:migration.openshift.io/migrated-by-migmigration":{},"f:migration.openshift.io/migrated-by-migplan":{},"f:threescale_component":{},"f:velero.io/backup-name":{},"f:velero.io/restore-name":{}}},"f:spec":{"f:replicas":{},"f:revisionHistoryLimit":{},"f:selector":{".":{},"f:deploymentConfig":{}},"f:strategy":{"f:activeDeadlineSeconds":{},"f:rollingParams":{".":{},"f:intervalSeconds":{},"f:maxSurge":{},"f:maxUnavailable":{},"f:timeoutSeconds":{},"f:updatePeriodSeconds":{}},"f:type":{}},"f:template":{".":{},"f:metadata":{".":{},"f:annotations":{".":{},"f:openshift.io/generated-by":{}},"f:creationTimestamp":{},"f:labels":{".":{},"f:app":{},"f:deploymentConfig":{},"f:threescale_component":{}}},"f:spec":{".":{},"f:containers":{".":{},"k:{\"name\":\"zync\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"DATABASE_URL\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"POD_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{}}},"k:{\"name\":\"POD_NAMESPACE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{}}},"k:{\"name\":\"RAILS_ENV\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RAILS_LOG_TO_STDOUT\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"SECRET_KEY_BASE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"ZYNC_AUTHENTICATION_TOKEN\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}}},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:failureThreshold":{},"f:httpGet":{".":{},"f:path":{},"f:port":{},"f:scheme":{}},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":8080,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:httpGet":{".":{},"f:path":{},"f:port":{},"f:scheme":{}},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:initContainers":{".":{},"k:{\"name\":\"zync-db-svc\"}":{".":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"DATABASE_URL\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"SLEEP_SECONDS\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{}}}}}},{"manager":"openshift-controller-manager","operation":"Update","apiVersion":"apps.openshift.io/v1","time":"2023-06-04T23:50:48Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:triggers":{}}}},{"manager":"openshift-controller-manager","operation":"Update","apiVersion":"apps.openshift.io/v1","time":"2023-06-04T23:50:48Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{".":{},"k:{\"type\":\"Available\"}":{".":{},"f:lastTransitionTime":{},"f:lastUpdateTime":{},"f:message":{},"f:status":{},"f:type":{}}},"f:details":{".":{},"f:causes":{},"f:message":{}},"f:latestVersion":{},"f:observedGeneration":{}}},"subresource":"status"}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":600,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["zync-db-svc","zync"],"from":{"kind":"ImageStreamTag","namespace":"3scale","name":"amp-zync:latest"},"lastTriggeredImage":"registry.redhat.io/3scale-amp2/zync-rhel7@sha256:90a18fccbc5481a1952841cf6497af3f1e5920310a7c469a26bb2d5b4032ef9f"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"zync"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"zync","threescale_component":"zync"},"annotations":{"openshift.io/generated-by":"OpenShiftNewApp"}},"spec":{"initContainers":[{"name":"zync-db-svc","image":"registry.redhat.io/3scale-amp2/zync-rhel7@sha256:90a18fccbc5481a1952841cf6497af3f1e5920310a7c469a26bb2d5b4032ef9f","command":["bash","-c","bundle exec sh -c \"until rake boot:db; do sleep $SLEEP_SECONDS; done\""],"env":[{"name":"SLEEP_SECONDS","value":"1"},{"name":"DATABASE_URL","valueFrom":{"secretKeyRef":{"name":"zync","key":"DATABASE_URL"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"zync","image":"registry.redhat.io/3scale-amp2/zync-rhel7@sha256:90a18fccbc5481a1952841cf6497af3f1e5920310a7c469a26bb2d5b4032ef9f","ports":[{"containerPort":8080,"protocol":"TCP"}],"env":[{"name":"RAILS_LOG_TO_STDOUT","value":"true"},{"name":"RAILS_ENV","value":"production"},{"name":"DATABASE_URL","valueFrom":{"secretKeyRef":{"name":"zync","key":"DATABASE_URL"}}},{"name":"SECRET_KEY_BASE","valueFrom":{"secretKeyRef":{"name":"zync","key":"SECRET_KEY_BASE"}}},{"name":"ZYNC_AUTHENTICATION_TOKEN","valueFrom":{"secretKeyRef":{"name":"zync","key":"ZYNC_AUTHENTICATION_TOKEN"}}},{"name":"POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}}],"resources":{"limits":{"cpu":"1","memory":"512Mi"},"requests":{"cpu":"150m","memory":"250M"}},"livenessProbe":{"httpGet":{"path":"/status/live","port":8080,"scheme":"HTTP"},"initialDelaySeconds":10,"timeoutSeconds":60,"periodSeconds":10,"successThreshold":1,"failureThreshold":10},"readinessProbe":{"httpGet":{"path":"/status/ready","port":8080,"scheme":"HTTP"},"initialDelaySeconds":100,"timeoutSeconds":10,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":1,"observedGeneration":1,"replicas":0,"updatedReplicas":0,"availableReplicas":0,"unavailableReplicas":0,"details":{"message":"config change","causes":[{"type":"ConfigChange"}]},"conditions":[{"type":"Available","status":"False","lastUpdateTime":"2023-06-04T23:50:42Z","lastTransitionTime":"2023-06-04T23:50:42Z","message":"Deployment config does not have minimum availability."}]}}
    creationTimestamp: "2023-06-04T23:50:48Z"
    generation: 2
    labels:
      app: 3scale-api-management
      migration.openshift.io/migrated-by-migmigration: d260e821-c8d9-409f-9013-a81dd35264d4
      migration.openshift.io/migrated-by-migplan: 49357516-407e-4d22-8a38-498daa6ef155
      openshift.io/deployment-config.name: zync
      threescale_component: zync
      velero.io/backup-name: migration-05da4-initial-s7jkt
      velero.io/restore-name: migration-05da4-final-h89cb
    name: zync-1
    namespace: 3scale
    ownerReferences:
    - apiVersion: apps.openshift.io/v1
      blockOwnerDeletion: true
      controller: true
      kind: DeploymentConfig
      name: zync
      uid: 58c64a81-fa37-43b7-aa70-9c03754f7cd1
    resourceVersion: "428583587"
    uid: c12d6a3e-6007-47b2-a949-c6b18d7c3e2d
  spec:
    replicas: 1
    selector:
      deployment: zync-1
      deploymentConfig: zync
      deploymentconfig: zync
    template:
      metadata:
        annotations:
          openshift.io/deployment-config.latest-version: "1"
          openshift.io/deployment-config.name: zync
          openshift.io/deployment.name: zync-1
          openshift.io/generated-by: OpenShiftNewApp
        creationTimestamp: null
        labels:
          app: 3scale-api-management
          deployment: zync-1
          deploymentConfig: zync
          deploymentconfig: zync
          threescale_component: zync
      spec:
        containers:
        - env:
          - name: RAILS_LOG_TO_STDOUT
            value: "true"
          - name: RAILS_ENV
            value: production
          - name: DATABASE_URL
            valueFrom:
              secretKeyRef:
                key: DATABASE_URL
                name: zync
          - name: SECRET_KEY_BASE
            valueFrom:
              secretKeyRef:
                key: SECRET_KEY_BASE
                name: zync
          - name: ZYNC_AUTHENTICATION_TOKEN
            valueFrom:
              secretKeyRef:
                key: ZYNC_AUTHENTICATION_TOKEN
                name: zync
          - name: POD_NAME
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.name
          - name: POD_NAMESPACE
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
          image: registry.redhat.io/3scale-amp2/zync-rhel7@sha256:90a18fccbc5481a1952841cf6497af3f1e5920310a7c469a26bb2d5b4032ef9f
          imagePullPolicy: Always
          livenessProbe:
            failureThreshold: 10
            httpGet:
              path: /status/live
              port: 8080
              scheme: HTTP
            initialDelaySeconds: 10
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 60
          name: zync
          ports:
          - containerPort: 8080
            protocol: TCP
          readinessProbe:
            failureThreshold: 3
            httpGet:
              path: /status/ready
              port: 8080
              scheme: HTTP
            initialDelaySeconds: 100
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 10
          resources:
            limits:
              cpu: "1"
              memory: 512Mi
            requests:
              cpu: 150m
              memory: 250M
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        dnsPolicy: ClusterFirst
        initContainers:
        - command:
          - bash
          - -c
          - bundle exec sh -c "until rake boot:db; do sleep $SLEEP_SECONDS; done"
          env:
          - name: SLEEP_SECONDS
            value: "1"
          - name: DATABASE_URL
            valueFrom:
              secretKeyRef:
                key: DATABASE_URL
                name: zync
          image: registry.redhat.io/3scale-amp2/zync-rhel7@sha256:90a18fccbc5481a1952841cf6497af3f1e5920310a7c469a26bb2d5b4032ef9f
          imagePullPolicy: Always
          name: zync-db-svc
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: amp
        serviceAccountName: amp
        terminationGracePeriodSeconds: 30
  status:
    availableReplicas: 1
    fullyLabeledReplicas: 1
    observedGeneration: 2
    readyReplicas: 1
    replicas: 1
- apiVersion: v1
  kind: ReplicationController
  metadata:
    annotations:
      openshift.io/deployer-pod.completed-at: 2023-06-04 23:51:09 +0000 UTC
      openshift.io/deployer-pod.created-at: 2023-06-04 23:50:46 +0000 UTC
      openshift.io/deployer-pod.name: zync-database-1-deploy
      openshift.io/deployment-config.latest-version: "1"
      openshift.io/deployment-config.name: zync-database
      openshift.io/deployment.phase: Complete
      openshift.io/deployment.replicas: "1"
      openshift.io/deployment.status-reason: config change
      openshift.io/encoded-deployment-config: |
        {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"zync-database","namespace":"3scale","uid":"b02062a0-a8c0-4cf3-b1f0-43a8213341f7","resourceVersion":"20279648","generation":2,"creationTimestamp":"2023-06-04T23:50:42Z","labels":{"app":"3scale-api-management","migration.openshift.io/migrated-by-migmigration":"d260e821-c8d9-409f-9013-a81dd35264d4","migration.openshift.io/migrated-by-migplan":"49357516-407e-4d22-8a38-498daa6ef155","threescale_component":"zync","threescale_component_element":"database","velero.io/backup-name":"migration-05da4-initial-s7jkt","velero.io/restore-name":"migration-05da4-final-h89cb"},"annotations":{"openshift.io/backup-registry-hostname":"docker-registry.default.svc:5000","openshift.io/backup-server-version":"1.11","openshift.io/generated-by":"OpenShiftNewApp","openshift.io/migration-registry":"172.30.138.125:5000","openshift.io/restore-registry-hostname":"image-registry.openshift-image-registry.svc:5000","openshift.io/restore-server-version":"1.23"},"managedFields":[{"manager":"velero-server","operation":"Update","apiVersion":"apps.openshift.io/v1","time":"2023-06-04T23:50:42Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:openshift.io/backup-registry-hostname":{},"f:openshift.io/backup-server-version":{},"f:openshift.io/generated-by":{},"f:openshift.io/migration-registry":{},"f:openshift.io/restore-registry-hostname":{},"f:openshift.io/restore-server-version":{}},"f:labels":{".":{},"f:app":{},"f:migration.openshift.io/migrated-by-migmigration":{},"f:migration.openshift.io/migrated-by-migplan":{},"f:threescale_component":{},"f:threescale_component_element":{},"f:velero.io/backup-name":{},"f:velero.io/restore-name":{}}},"f:spec":{"f:replicas":{},"f:revisionHistoryLimit":{},"f:selector":{".":{},"f:deploymentConfig":{}},"f:strategy":{"f:activeDeadlineSeconds":{},"f:recreateParams":{".":{},"f:timeoutSeconds":{}},"f:type":{}},"f:template":{".":{},"f:metadata":{".":{},"f:annotations":{".":{},"f:openshift.io/generated-by":{}},"f:creationTimestamp":{},"f:labels":{".":{},"f:app":{},"f:deploymentConfig":{},"f:threescale_component":{},"f:threescale_component_element":{}}},"f:spec":{".":{},"f:containers":{".":{},"k:{\"name\":\"postgresql\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"POSTGRESQL_DATABASE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"POSTGRESQL_PASSWORD\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"POSTGRESQL_USER\"}":{".":{},"f:name":{},"f:value":{}}},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":5432,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/var/lib/pgsql/data\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:dnsPolicy":{},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"zync-database-data\"}":{".":{},"f:emptyDir":{},"f:name":{}}}}}}}},{"manager":"openshift-controller-manager","operation":"Update","apiVersion":"apps.openshift.io/v1","time":"2023-06-04T23:50:46Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:template":{"f:spec":{"f:containers":{"k:{\"name\":\"postgresql\"}":{"f:image":{}}}}},"f:triggers":{}}}},{"manager":"openshift-controller-manager","operation":"Update","apiVersion":"apps.openshift.io/v1","time":"2023-06-04T23:50:46Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{".":{},"k:{\"type\":\"Available\"}":{".":{},"f:lastTransitionTime":{},"f:lastUpdateTime":{},"f:message":{},"f:status":{},"f:type":{}}},"f:details":{".":{},"f:causes":{},"f:message":{}},"f:latestVersion":{},"f:observedGeneration":{}}},"subresource":"status"}]},"spec":{"strategy":{"type":"Recreate","recreateParams":{"timeoutSeconds":600},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["postgresql"],"from":{"kind":"ImageStreamTag","namespace":"3scale","name":"zync-database-postgresql:latest"},"lastTriggeredImage":"registry.redhat.io/rhscl/postgresql-10-rhel7@sha256:e32991664f0efc3bf63e9b429ab3f95f626265af4463321f30e50bf91d057f1c"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"zync-database"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"zync-database","threescale_component":"zync","threescale_component_element":"database"},"annotations":{"openshift.io/generated-by":"OpenShiftNewApp"}},"spec":{"volumes":[{"name":"zync-database-data","emptyDir":{}}],"containers":[{"name":"postgresql","image":"registry.redhat.io/rhscl/postgresql-10-rhel7@sha256:e32991664f0efc3bf63e9b429ab3f95f626265af4463321f30e50bf91d057f1c","ports":[{"containerPort":5432,"protocol":"TCP"}],"env":[{"name":"POSTGRESQL_USER","value":"zync"},{"name":"POSTGRESQL_PASSWORD","valueFrom":{"secretKeyRef":{"name":"zync","key":"ZYNC_DATABASE_PASSWORD"}}},{"name":"POSTGRESQL_DATABASE","value":"zync_production"}],"resources":{"limits":{"cpu":"250m","memory":"2G"},"requests":{"cpu":"50m","memory":"250M"}},"volumeMounts":[{"name":"zync-database-data","mountPath":"/var/lib/pgsql/data"}],"livenessProbe":{"tcpSocket":{"port":5432},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"exec":{"command":["/bin/sh","-i","-c","psql -h 127.0.0.1 -U zync -q -d zync_production -c 'SELECT 1'"]},"initialDelaySeconds":5,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":1,"observedGeneration":1,"replicas":0,"updatedReplicas":0,"availableReplicas":0,"unavailableReplicas":0,"details":{"message":"config change","causes":[{"type":"ConfigChange"}]},"conditions":[{"type":"Available","status":"False","lastUpdateTime":"2023-06-04T23:50:42Z","lastTransitionTime":"2023-06-04T23:50:42Z","message":"Deployment config does not have minimum availability."}]}}
    creationTimestamp: "2023-06-04T23:50:46Z"
    generation: 2
    labels:
      app: 3scale-api-management
      migration.openshift.io/migrated-by-migmigration: d260e821-c8d9-409f-9013-a81dd35264d4
      migration.openshift.io/migrated-by-migplan: 49357516-407e-4d22-8a38-498daa6ef155
      openshift.io/deployment-config.name: zync-database
      threescale_component: zync
      threescale_component_element: database
      velero.io/backup-name: migration-05da4-initial-s7jkt
      velero.io/restore-name: migration-05da4-final-h89cb
    name: zync-database-1
    namespace: 3scale
    ownerReferences:
    - apiVersion: apps.openshift.io/v1
      blockOwnerDeletion: true
      controller: true
      kind: DeploymentConfig
      name: zync-database
      uid: b02062a0-a8c0-4cf3-b1f0-43a8213341f7
    resourceVersion: "428583569"
    uid: 50734aa6-1faf-438c-acfa-486320eed32c
  spec:
    replicas: 1
    selector:
      deployment: zync-database-1
      deploymentConfig: zync-database
      deploymentconfig: zync-database
    template:
      metadata:
        annotations:
          openshift.io/deployment-config.latest-version: "1"
          openshift.io/deployment-config.name: zync-database
          openshift.io/deployment.name: zync-database-1
          openshift.io/generated-by: OpenShiftNewApp
        creationTimestamp: null
        labels:
          app: 3scale-api-management
          deployment: zync-database-1
          deploymentConfig: zync-database
          deploymentconfig: zync-database
          threescale_component: zync
          threescale_component_element: database
      spec:
        containers:
        - env:
          - name: POSTGRESQL_USER
            value: zync
          - name: POSTGRESQL_PASSWORD
            valueFrom:
              secretKeyRef:
                key: ZYNC_DATABASE_PASSWORD
                name: zync
          - name: POSTGRESQL_DATABASE
            value: zync_production
          image: registry.redhat.io/rhscl/postgresql-10-rhel7@sha256:e32991664f0efc3bf63e9b429ab3f95f626265af4463321f30e50bf91d057f1c
          imagePullPolicy: IfNotPresent
          livenessProbe:
            failureThreshold: 3
            initialDelaySeconds: 30
            periodSeconds: 10
            successThreshold: 1
            tcpSocket:
              port: 5432
            timeoutSeconds: 1
          name: postgresql
          ports:
          - containerPort: 5432
            protocol: TCP
          readinessProbe:
            exec:
              command:
              - /bin/sh
              - -i
              - -c
              - psql -h 127.0.0.1 -U zync -q -d zync_production -c 'SELECT 1'
            failureThreshold: 3
            initialDelaySeconds: 5
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
          resources:
            limits:
              cpu: 250m
              memory: 2G
            requests:
              cpu: 50m
              memory: 250M
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /var/lib/pgsql/data
            name: zync-database-data
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: amp
        serviceAccountName: amp
        terminationGracePeriodSeconds: 30
        volumes:
        - emptyDir: {}
          name: zync-database-data
  status:
    availableReplicas: 1
    fullyLabeledReplicas: 1
    observedGeneration: 2
    readyReplicas: 1
    replicas: 1
- apiVersion: v1
  kind: ReplicationController
  metadata:
    annotations:
      openshift.io/deployer-pod.completed-at: 2023-06-04 23:52:00 +0000 UTC
      openshift.io/deployer-pod.created-at: 2023-06-04 23:50:48 +0000 UTC
      openshift.io/deployer-pod.name: zync-que-1-deploy
      openshift.io/deployment-config.latest-version: "1"
      openshift.io/deployment-config.name: zync-que
      openshift.io/deployment.phase: Complete
      openshift.io/deployment.replicas: "1"
      openshift.io/deployment.status-reason: config change
      openshift.io/encoded-deployment-config: |
        {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"zync-que","namespace":"3scale","uid":"a5fe38f2-3e00-4bd8-a5c8-46115428d837","resourceVersion":"20279838","generation":2,"creationTimestamp":"2023-06-04T23:50:42Z","labels":{"app":"3scale-api-management","migration.openshift.io/migrated-by-migmigration":"d260e821-c8d9-409f-9013-a81dd35264d4","migration.openshift.io/migrated-by-migplan":"49357516-407e-4d22-8a38-498daa6ef155","threescale_component":"zync","velero.io/backup-name":"migration-05da4-initial-s7jkt","velero.io/restore-name":"migration-05da4-final-h89cb"},"annotations":{"openshift.io/backup-registry-hostname":"docker-registry.default.svc:5000","openshift.io/backup-server-version":"1.11","openshift.io/generated-by":"OpenShiftNewApp","openshift.io/migration-registry":"172.30.138.125:5000","openshift.io/restore-registry-hostname":"image-registry.openshift-image-registry.svc:5000","openshift.io/restore-server-version":"1.23"},"managedFields":[{"manager":"velero-server","operation":"Update","apiVersion":"apps.openshift.io/v1","time":"2023-06-04T23:50:42Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:openshift.io/backup-registry-hostname":{},"f:openshift.io/backup-server-version":{},"f:openshift.io/generated-by":{},"f:openshift.io/migration-registry":{},"f:openshift.io/restore-registry-hostname":{},"f:openshift.io/restore-server-version":{}},"f:labels":{".":{},"f:app":{},"f:migration.openshift.io/migrated-by-migmigration":{},"f:migration.openshift.io/migrated-by-migplan":{},"f:threescale_component":{},"f:velero.io/backup-name":{},"f:velero.io/restore-name":{}}},"f:spec":{"f:replicas":{},"f:revisionHistoryLimit":{},"f:selector":{".":{},"f:deploymentConfig":{}},"f:strategy":{"f:activeDeadlineSeconds":{},"f:rollingParams":{".":{},"f:intervalSeconds":{},"f:maxSurge":{},"f:maxUnavailable":{},"f:timeoutSeconds":{},"f:updatePeriodSeconds":{}},"f:type":{}},"f:template":{".":{},"f:metadata":{".":{},"f:annotations":{".":{},"f:openshift.io/generated-by":{},"f:prometheus.io/port":{},"f:prometheus.io/scrape":{}},"f:creationTimestamp":{},"f:labels":{".":{},"f:app":{},"f:deploymentConfig":{}}},"f:spec":{".":{},"f:containers":{".":{},"k:{\"name\":\"que\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"DATABASE_URL\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"POD_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{}}},"k:{\"name\":\"POD_NAMESPACE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{}}},"k:{\"name\":\"RAILS_ENV\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RAILS_LOG_TO_STDOUT\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"SECRET_KEY_BASE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"ZYNC_AUTHENTICATION_TOKEN\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}}},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:failureThreshold":{},"f:httpGet":{".":{},"f:path":{},"f:port":{},"f:scheme":{}},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":9394,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{}}}}}},{"manager":"openshift-controller-manager","operation":"Update","apiVersion":"apps.openshift.io/v1","time":"2023-06-04T23:50:48Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:triggers":{}}}},{"manager":"openshift-controller-manager","operation":"Update","apiVersion":"apps.openshift.io/v1","time":"2023-06-04T23:50:48Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{".":{},"k:{\"type\":\"Available\"}":{".":{},"f:lastTransitionTime":{},"f:lastUpdateTime":{},"f:message":{},"f:status":{},"f:type":{}}},"f:details":{".":{},"f:causes":{},"f:message":{}},"f:latestVersion":{},"f:observedGeneration":{}}},"subresource":"status"}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":600,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["que"],"from":{"kind":"ImageStreamTag","namespace":"3scale","name":"amp-zync:latest"},"lastTriggeredImage":"registry.redhat.io/3scale-amp2/zync-rhel7@sha256:90a18fccbc5481a1952841cf6497af3f1e5920310a7c469a26bb2d5b4032ef9f"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"zync-que"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"zync-que"},"annotations":{"openshift.io/generated-by":"OpenShiftNewApp","prometheus.io/port":"9394","prometheus.io/scrape":"true"}},"spec":{"containers":[{"name":"que","image":"registry.redhat.io/3scale-amp2/zync-rhel7@sha256:90a18fccbc5481a1952841cf6497af3f1e5920310a7c469a26bb2d5b4032ef9f","command":["/usr/bin/bash"],"args":["-c","bundle exec rake 'que[--worker-count 10]'"],"ports":[{"name":"metrics","containerPort":9394,"protocol":"TCP"}],"env":[{"name":"RAILS_LOG_TO_STDOUT","value":"true"},{"name":"RAILS_ENV","value":"production"},{"name":"DATABASE_URL","valueFrom":{"secretKeyRef":{"name":"zync","key":"DATABASE_URL"}}},{"name":"SECRET_KEY_BASE","valueFrom":{"secretKeyRef":{"name":"zync","key":"SECRET_KEY_BASE"}}},{"name":"ZYNC_AUTHENTICATION_TOKEN","valueFrom":{"secretKeyRef":{"name":"zync","key":"ZYNC_AUTHENTICATION_TOKEN"}}},{"name":"POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}}],"resources":{"limits":{"cpu":"1","memory":"512Mi"},"requests":{"cpu":"250m","memory":"250M"}},"livenessProbe":{"httpGet":{"path":"/metrics","port":9394,"scheme":"HTTP"},"initialDelaySeconds":10,"timeoutSeconds":60,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"zync-que-sa","serviceAccount":"zync-que-sa","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":1,"observedGeneration":1,"replicas":0,"updatedReplicas":0,"availableReplicas":0,"unavailableReplicas":0,"details":{"message":"config change","causes":[{"type":"ConfigChange"}]},"conditions":[{"type":"Available","status":"False","lastUpdateTime":"2023-06-04T23:50:42Z","lastTransitionTime":"2023-06-04T23:50:42Z","message":"Deployment config does not have minimum availability."}]}}
    creationTimestamp: "2023-06-04T23:50:48Z"
    generation: 2
    labels:
      app: 3scale-api-management
      migration.openshift.io/migrated-by-migmigration: d260e821-c8d9-409f-9013-a81dd35264d4
      migration.openshift.io/migrated-by-migplan: 49357516-407e-4d22-8a38-498daa6ef155
      openshift.io/deployment-config.name: zync-que
      threescale_component: zync
      velero.io/backup-name: migration-05da4-initial-s7jkt
      velero.io/restore-name: migration-05da4-final-h89cb
    name: zync-que-1
    namespace: 3scale
    ownerReferences:
    - apiVersion: apps.openshift.io/v1
      blockOwnerDeletion: true
      controller: true
      kind: DeploymentConfig
      name: zync-que
      uid: a5fe38f2-3e00-4bd8-a5c8-46115428d837
    resourceVersion: "491646535"
    uid: 1560cbe0-1d7b-49b7-b8c2-2c3e61d49603
  spec:
    replicas: 1
    selector:
      deployment: zync-que-1
      deploymentConfig: zync-que
      deploymentconfig: zync-que
    template:
      metadata:
        annotations:
          openshift.io/deployment-config.latest-version: "1"
          openshift.io/deployment-config.name: zync-que
          openshift.io/deployment.name: zync-que-1
          openshift.io/generated-by: OpenShiftNewApp
          prometheus.io/port: "9394"
          prometheus.io/scrape: "true"
        creationTimestamp: null
        labels:
          app: 3scale-api-management
          deployment: zync-que-1
          deploymentConfig: zync-que
          deploymentconfig: zync-que
      spec:
        containers:
        - args:
          - -c
          - bundle exec rake 'que[--worker-count 10]'
          command:
          - /usr/bin/bash
          env:
          - name: RAILS_LOG_TO_STDOUT
            value: "true"
          - name: RAILS_ENV
            value: production
          - name: DATABASE_URL
            valueFrom:
              secretKeyRef:
                key: DATABASE_URL
                name: zync
          - name: SECRET_KEY_BASE
            valueFrom:
              secretKeyRef:
                key: SECRET_KEY_BASE
                name: zync
          - name: ZYNC_AUTHENTICATION_TOKEN
            valueFrom:
              secretKeyRef:
                key: ZYNC_AUTHENTICATION_TOKEN
                name: zync
          - name: POD_NAME
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.name
          - name: POD_NAMESPACE
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
          image: registry.redhat.io/3scale-amp2/zync-rhel7@sha256:90a18fccbc5481a1952841cf6497af3f1e5920310a7c469a26bb2d5b4032ef9f
          imagePullPolicy: Always
          livenessProbe:
            failureThreshold: 3
            httpGet:
              path: /metrics
              port: 9394
              scheme: HTTP
            initialDelaySeconds: 10
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 60
          name: que
          ports:
          - containerPort: 9394
            name: metrics
            protocol: TCP
          resources:
            limits:
              cpu: "1"
              memory: 512Mi
            requests:
              cpu: 250m
              memory: 250M
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: zync-que-sa
        serviceAccountName: zync-que-sa
        terminationGracePeriodSeconds: 30
  status:
    availableReplicas: 1
    fullyLabeledReplicas: 1
    observedGeneration: 2
    readyReplicas: 1
    replicas: 1
kind: List
metadata:
  resourceVersion: ""
  selfLink: ""
